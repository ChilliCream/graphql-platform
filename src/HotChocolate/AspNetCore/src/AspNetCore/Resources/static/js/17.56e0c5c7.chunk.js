(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[17],{1073:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return ne}));var r=t(472),c=t(545),i=t(481),a=t(492),u=t(464),o=t(10),s=t.n(o),l=t(463),d=t(461),f=t(471),b=t(466),j=t(474),p=t(514),v=t(488),m=t(489),O=t(477),h=t(591),g=t(468),y=t(557),S=t(496),x=t(542),w=t(623),V=t(638),k=t(639),T=t(599),D=t(641),E=t(518),F=t(783);function I(e,n){return R(e,(function(e){return!Object(D.d)(e)}),C,n)}function C(e){return!Object(T.d)(e)&&!Object(k.d)(e)}function R(e,n,t,r){var c=e.getDirectives().filter(n),i=Object(y.a)(e.getTypeMap()).filter(t);return[B(e)].concat(c.map((function(e){return function(e,n){return J(n,e)+"directive @"+e.name+Q(n,e.args)+(e.isRepeatable?" repeatable":"")+" on "+e.locations.join(" | ")}(e,r)})),i.map((function(e){return function(e,n){if(Object(E.x)(e))return function(e,n){return J(n,e)+"scalar ".concat(e.name)+function(e){if(null==e.specifiedByUrl)return"";var n=e.specifiedByUrl,t=Object(F.a)(n,T.c);return t||Object(x.a)(0,"Unexpected null value returned from `astFromValue` for specifiedByUrl")," @specifiedBy(url: "+Object(w.a)(t)+")"}(e)}(e,n);if(Object(E.v)(e))return function(e,n){return J(n,e)+"type ".concat(e.name)+M(e)+A(n,e)}(e,n);if(Object(E.r)(e))return function(e,n){return J(n,e)+"interface ".concat(e.name)+M(e)+A(n,e)}(e,n);if(Object(E.y)(e))return function(e,n){var t=e.getTypes(),r=t.length?" = "+t.join(" | "):"";return J(n,e)+"union "+e.name+r}(e,n);if(Object(E.o)(e))return function(e,n){var t=e.getValues().map((function(e,t){return J(n,e,"  ",!t)+"  "+e.name+z(e.deprecationReason)}));return J(n,e)+"enum ".concat(e.name)+U(t)}(e,n);if(Object(E.p)(e))return function(e,n){var t=Object(y.a)(e.getFields()).map((function(e,t){return J(n,e,"  ",!t)+"  "+q(e)}));return J(n,e)+"input ".concat(e.name)+U(t)}(e,n);Object(x.a)(0,"Unexpected type: "+Object(S.a)(e))}(e,r)}))).filter(Boolean).join("\n\n")+"\n"}function B(e){if(null!=e.description||!function(e){var n=e.getQueryType();if(n&&"Query"!==n.name)return!1;var t=e.getMutationType();if(t&&"Mutation"!==t.name)return!1;var r=e.getSubscriptionType();if(r&&"Subscription"!==r.name)return!1;return!0}(e)){var n=[],t=e.getQueryType();t&&n.push("  query: ".concat(t.name));var r=e.getMutationType();r&&n.push("  mutation: ".concat(r.name));var c=e.getSubscriptionType();return c&&n.push("  subscription: ".concat(c.name)),J({},e)+"schema {\n".concat(n.join("\n"),"\n}")}}function M(e){var n=e.getInterfaces();return n.length?" implements "+n.map((function(e){return e.name})).join(" & "):""}function A(e,n){return U(Object(y.a)(n.getFields()).map((function(n,t){return J(e,n,"  ",!t)+"  "+n.name+Q(e,n.args,"  ")+": "+String(n.type)+z(n.deprecationReason)})))}function U(e){return 0!==e.length?" {\n"+e.join("\n")+"\n}":""}function Q(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0===n.length?"":n.every((function(e){return!e.description}))?"("+n.map(q).join(", ")+")":"(\n"+n.map((function(n,r){return J(e,n,"  "+t,!r)+"  "+t+q(n)})).join("\n")+"\n"+t+")"}function q(e){var n=Object(F.a)(e.defaultValue,e.type),t=e.name+": "+String(e.type);return n&&(t+=" = ".concat(Object(w.a)(n))),t+z(e.deprecationReason)}function z(e){if(null==e)return"";var n=Object(F.a)(e,T.c);return n&&e!==D.a?" @deprecated(reason: "+Object(w.a)(n)+")":" @deprecated"}function J(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=n.description;if(null==c)return"";if(!0===(null===e||void 0===e?void 0:e.commentDescriptions))return L(c,t,r);var i=c.length>70,a=Object(V.b)(c,"",i),u=t&&!r?"\n"+t:t;return u+a.replace(/\n/g,"\n"+t)+"\n"}function L(e,n,t){return(n&&!t?"\n":"")+e.split("\n").map((function(e){return n+(""!==e?"# "+e:"#")})).join("\n")+"\n"}var P=t(1076),G=(t(278),t(87)),H=t(44),K=t(90),N="schema-sdl",W=Object(H.memo)((function(e){var n=e.documentId,t=Object(u.c)(m.b.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)})),r=function(e,n){var t=Object(v.c)(O.c.selectActiveSchemaSdlEditorViewState),r=Object(b.i)(),c=Object(H.useRef)(null),i=Object(v.c)(O.c.selectActiveFocusedElement),o=Object(u.b)(),s=Object(a.a)((function(n){var t,r=null!==(t=n.saveViewState())&&void 0!==t?t:void 0;o(O.a.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:r}))}),250,[e,o]);return Object(H.useEffect)((function(){var a=c.current,u=Object(d.a)(Object(d.a)({},p.a),{},{model:n,readOnly:!0,theme:"light"}),l=G.editor.create(a,u);return window.setTimeout((function(){return l.render()}),500),r.register(N,l),Object(j.k)(l),t&&l.restoreViewState(t),"schema-sdl-editor"===i&&l.focus(),l.onDidChangeCursorPosition((function(){return s(l)})),l.onDidChangeCursorSelection((function(){return s(l)})),l.onDidScrollChange((function(){return s(l)})),l.onDidFocusEditorText((function(){o(O.a.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),function(){r.unregister(N),l.dispose()}}),[e,r,i,t,n,o,s]),Object(a.b)(N,c),c}(n,function(e,n){var t=Object(b.j)(),r=Object(H.useRef)(G.editor.createModel("","graphql"));return r.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),Object(H.useEffect)((function(){(null===n||void 0===n?void 0:n.exists)?function(e){return X.apply(this,arguments)}(n.endpoint).then((function(e){r.current.setValue(e)})).catch((function(n){t.error(e,"Could not get SDL. Please reload the schema and try again.",Object(d.a)({},n))})):r.current.setValue("")}),[e,t,r,n]),r.current}(n,t));return h.api.schemaInfo=null!==t&&void 0!==t?t:null,Object(K.jsx)(i.o,{ref:r})}));function X(){return(X=Object(l.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.getSchemaQueryResult)(n);case 2:if(!(t=e.sent)){e.next=6;break}return r=I(Object(P.a)(t.result)).replace(/""""""/gi,""),e.abrupt("return",Object(g.n)(r));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=t(479),Z=t(649),$=t(480),_=function(e){var n=e.documentId,t=e.isFetchingSchema;return Object(K.jsxs)(i.c,{children:[Object(K.jsx)(i.i,{children:Object(K.jsx)(Z.a,{documentId:n})}),Object(K.jsx)(i.h,{}),Object(K.jsx)(ee,{disabled:t})]})},ee=function(e){var n=e.disabled,t=Object(b.i)(),r=Object(u.c)(m.b.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)}));return Object(K.jsx)(Y.c,{disabled:n||!r,title:"Download as SDL",onClick:function(){var e,n;if(null===r||void 0===r?void 0:r.exists){var c=null===(e=t.get("schema-sdl"))||void 0===e||null===(n=e.getModel())||void 0===n?void 0:n.getValue();if(c){var i=new Blob([c],{type:"text/plain"});Object(j.m)(i)}}},children:Object(K.jsx)($.k,{})})},ne=function(){var e=Object(u.c)(r.c.selectActiveId),n=Object(a.d)();return Object(K.jsx)(i.k,{children:Object(K.jsxs)(i.a,{children:[Object(K.jsx)(_,{documentId:e,isFetchingSchema:n}),n?Object(K.jsx)(c.a,{}):Object(K.jsx)(W,{documentId:e})]})})}}}]);