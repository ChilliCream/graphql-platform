(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[15],{1217:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return te}));var r=t(106),c=t(241),i=t(132),a=t(140),u=t(96),o=t(289),s=t(80),l=t.n(s),d=t(99),f=t(82),b=t(113),j=t(103),p=t(121),v=t(7),O=t(139),m=t(169),h=t(133),g=t(343),S=t(127),y=t(27),x=t(187),w=t(342),T=t(222),k=t(417),R=t(514),V=t(515),D=t(341),C=t(517),E=t(225),I=t(776);function F(e){return A(e,(function(e){return!Object(C.d)(e)}),M)}function M(e){return!Object(D.d)(e)&&!Object(V.d)(e)}function A(e,n,t){var r=e.getDirectives().filter(n),c=Object.values(e.getTypeMap()).filter(t);return[B(e)].concat(Object(y.a)(r.map((function(e){return function(e){return U(e)+"directive @"+e.name+z(e.args)+(e.isRepeatable?" repeatable":"")+" on "+e.locations.join(" | ")}(e)}))),Object(y.a)(c.map((function(e){return function(e){if(Object(E.y)(e))return function(e){return U(e)+"scalar ".concat(e.name)+function(e){if(null==e.specifiedByURL)return"";var n=Object(k.a)({kind:T.a.STRING,value:e.specifiedByURL});return" @specifiedBy(url: ".concat(n,")")}(e)}(e);if(Object(E.w)(e))return function(e){return U(e)+"type ".concat(e.name)+L(e)+Q(e)}(e);if(Object(E.s)(e))return function(e){return U(e)+"interface ".concat(e.name)+L(e)+Q(e)}(e);if(Object(E.z)(e))return function(e){var n=e.getTypes(),t=n.length?" = "+n.join(" | "):"";return U(e)+"union "+e.name+t}(e);if(Object(E.p)(e))return function(e){var n=e.getValues().map((function(e,n){return U(e,"  ",!n)+"  "+e.name+N(e.deprecationReason)}));return U(e)+"enum ".concat(e.name)+q(n)}(e);if(Object(E.q)(e))return function(e){var n=Object.values(e.getFields()).map((function(e,n){return U(e,"  ",!n)+"  "+G(e)}));return U(e)+"input ".concat(e.name)+q(n)}(e);Object(w.a)(!1,"Unexpected type: "+Object(x.a)(e))}(e)})))).filter(Boolean).join("\n\n")}function B(e){if(null!=e.description||!function(e){var n=e.getQueryType();if(n&&"Query"!==n.name)return!1;var t=e.getMutationType();if(t&&"Mutation"!==t.name)return!1;var r=e.getSubscriptionType();if(r&&"Subscription"!==r.name)return!1;return!0}(e)){var n=[],t=e.getQueryType();t&&n.push("  query: ".concat(t.name));var r=e.getMutationType();r&&n.push("  mutation: ".concat(r.name));var c=e.getSubscriptionType();return c&&n.push("  subscription: ".concat(c.name)),U(e)+"schema {\n".concat(n.join("\n"),"\n}")}}function L(e){var n=e.getInterfaces();return n.length?" implements "+n.map((function(e){return e.name})).join(" & "):""}function Q(e){return q(Object.values(e.getFields()).map((function(e,n){return U(e,"  ",!n)+"  "+e.name+z(e.args,"  ")+": "+String(e.type)+N(e.deprecationReason)})))}function q(e){return 0!==e.length?" {\n"+e.join("\n")+"\n}":""}function z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return 0===e.length?"":e.every((function(e){return!e.description}))?"("+e.map(G).join(", ")+")":"(\n"+e.map((function(e,t){return U(e,"  "+n,!t)+"  "+n+G(e)})).join("\n")+"\n"+n+")"}function G(e){var n=Object(I.a)(e.defaultValue,e.type),t=e.name+": "+String(e.type);return n&&(t+=" = ".concat(Object(k.a)(n))),t+N(e.deprecationReason)}function N(e){if(null==e)return"";if(e!==C.a){var n=Object(k.a)({kind:T.a.STRING,value:e});return" @deprecated(reason: ".concat(n,")")}return" @deprecated"}function U(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.description;if(null==r)return"";var c=Object(k.a)({kind:T.a.STRING,value:r,block:Object(R.b)(r)}),i=n&&!t?"\n"+n:n;return i+c.replace(/\n/g,"\n"+n)+"\n"}var J=t(1223),P=(t(263),t(108)),H=t(1),K=t(30),W=t(2),X="schema-sdl",Y=Object(H.memo)((function(e){var n=e.documentId,t=Object(u.c)(m.b.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)})),r=function(e,n){var t=Object(O.c)(h.c.selectActiveSchemaSdlEditorViewState),r=Object(j.i)(),c=Object(H.useRef)(null),i=Object(O.c)(h.c.selectActiveFocusedElement),o=Object(u.b)(),s=Object(a.a)((function(n){var t,r=null!==(t=n.saveViewState())&&void 0!==t?t:void 0;o(h.a.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:r}))}),250,[e,o]);return Object(H.useEffect)((function(){var a=c.current,u=Object(f.a)(Object(f.a)({},v.a),{},{model:n,readOnly:!0}),l=P.editor.create(a,u);return window.setTimeout((function(){return l.render()}),500),r.register(X,l),Object(p.k)(l),t&&l.restoreViewState(t),"schema-sdl-editor"===i&&l.focus(),l.onContextMenu((function(){return Object(K.b)(a)})),l.onDidChangeCursorPosition((function(){return s(l)})),l.onDidChangeCursorSelection((function(){return s(l)})),l.onDidScrollChange((function(){return s(l)})),l.onDidFocusEditorText((function(){o(h.a.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),function(){r.unregister(X),l.dispose()}}),[e,r,i,t,n,o,s]),Object(a.b)(X,c),c}(n,function(e,n){var t=Object(j.j)(),r=Object(H.useRef)(P.editor.createModel("","graphql"));return r.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),Object(H.useEffect)((function(){(null===n||void 0===n?void 0:n.exists)?function(e){return Z.apply(this,arguments)}(n.endpoint).then((function(e){r.current.setValue(e)})).catch((function(n){t.error(e,"Could not get SDL. Please reload the schema and try again.",Object(f.a)({},n))})):r.current.setValue("")}),[e,t,r,n]),r.current}(n,t));return g.api.schemaInfo=null!==t&&void 0!==t?t:null,Object(W.jsx)(i.p,{ref:r})}));function Z(){return(Z=Object(d.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.getSchemaQueryResult)(n);case 2:if(!(t=e.sent)){e.next=6;break}return r=F(Object(J.a)(t.result)).replace(/""""""/gi,""),e.abrupt("return",Object(S.n)(r));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=t(129),_=t(125),ee=function(e){var n=e.isFetchingSchema;return Object(W.jsxs)(i.f,{children:[Object(W.jsx)(i.n,{children:"Schema Definition"}),Object(W.jsx)(i.m,{}),Object(W.jsx)(ne,{disabled:n})]})},ne=function(e){var n=e.disabled,t=Object(j.i)(),r=Object(u.c)(m.b.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)}));return Object(W.jsx)($.c,{disabled:n||!r,tooltip:"Download as SDL",onClick:function(){var e,n;if(null===r||void 0===r?void 0:r.exists){var c=null===(e=t.get("schema-sdl"))||void 0===e||null===(n=e.getModel())||void 0===n?void 0:n.getValue();if(c){var i=new Blob([c],{type:"text/plain"});Object(p.m)(i)}}},children:Object(W.jsx)(_.m,{})})},te=function(){var e=Object(u.c)(r.c.selectActiveId),n=Object(a.d)();return Object(W.jsx)(o.a,{children:Object(W.jsxs)(i.a,{children:[Object(W.jsx)(ee,{isFetchingSchema:n}),Object(W.jsx)(i.o,{}),n?Object(W.jsx)(c.a,{}):Object(W.jsx)(Y,{documentId:e})]})})}}}]);