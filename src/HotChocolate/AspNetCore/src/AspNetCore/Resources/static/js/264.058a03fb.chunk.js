"use strict";(self.webpackChunkbanana_cake_pop=self.webpackChunkbanana_cake_pop||[]).push([[264],{94264:function(e,n,r){r.r(n),r.d(n,{default:function(){return R}});var t=r(30168),o=r(37762),a=r(15861),i=r(87757),c=r.n(i),s=r(26994),u=r(29158),l=r(77268),d=r(43203),f=r(2970),p=r(87373),x=r(55567),m=r(10487),h=r(3189),v=r(68224),k=r(27420),g=r(65640),b=r(21855),y=r(996),j=r(20040),T=r(47313),w=r(85554),Z=r(5983),C=r(49184),H=r(5153),F=r(1413),S=r(13369),_=r(48548),P=r(25323),I=r(73253);var N,O,E=r(46417),R=function(){var e=(0,w.I0)(),n=(0,w.v9)(b.G0.selectIsUserSignedIn),r=(0,w.v9)(b.G0.selectIsFetchingUser),t=(0,g.mA)(k.Ut.selectActiveNodeId),i=(0,g.Qn)(H.qv.selectSearchTerm),m=(0,T.useRef)([]),j=(0,T.useRef)(),C=function(e){return{comparer:function(e,n){var r="item"===e.metadata.kind?e.metadata.created:e.metadata.day,t="item"===n.metadata.kind?n.metadata.created:n.metadata.day;return r>t?-1:r<t?1:0},getNodes:function(n,r,t){return(0,P.n)(e.pipe((0,Z.q)(1),(0,I.z)((function(e){return h.y$.isRoot(n)?(0,y.nJ)(t?function(e){return t({name:e})}:void 0).then((function(n){return n.map((function(n,r){var o=(0,_.J2)(n);return(0,F.Z)((0,F.Z)({},o),{},{expanded:e.includes(o.name)||!!t})}))})):h.y$.getSegments(n).length>1||!r?Promise.resolve([]):(0,y.Kj)(r.metadata.day,t?function(e){return t({name:e})}:void 0).then((function(e){return e.map((function(e){return(0,F.Z)((0,F.Z)({},(0,_.Gm)(e)),{},{expanded:!1})}))}))}))))},validate:function(e,n){return Promise.resolve(S.Z.fail("This tree is read-only."))}}}((0,g.mA)(H.qv.selectExpandedFolders)),N=(0,v.Nr)(function(){var n=(0,a.Z)(c().mark((function n(r,t,o){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),r.stopPropagation(),t.selected||((0,h.gF)(t.model),t.selected=!0),"group"!==t.metadata.kind){n.next=7;break}t.toggleExpanded(),n.next=9;break;case 7:return n.next=9,(0,y.Me)(t.metadata.id).then((function(n){n&&e(s.RW.activateOrOpenDocument({documentId:t.metadata.id,isHistory:!0,isPreview:o}))}));case 9:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),25,[e]),O=function(e,n){return N(e,n,!0)},R=function(e,n){return N(e,n,!1)},z=function(e){var n=t.subscribe(function(){var n=(0,a.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r=e.subscribeFor(function(){var n=(0,a.Z)(c().mark((function n(r){var t,a,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=(0,o.Z)(r),n.prev=1,t.s();case 3:if((a=t.n()).done){n.next=19;break}i=a.value,n.t0=i.kind,n.next="collapsed"===n.t0?8:"expanded"===n.t0?11:"reset-filter"===n.t0?13:"set-filter"===n.t0?15:17;break;case 8:return n.next=10,M(i.node);case 10:return n.abrupt("break",17);case 11:return A(i.node),n.abrupt("break",17);case 13:case 15:return J(e),n.abrupt("break",17);case 17:n.next=3;break;case 19:n.next=24;break;case 21:n.prev=21,n.t1=n.catch(1),t.e(n.t1);case 24:return n.prev=24,t.f(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})));return function(e){return n.apply(this,arguments)}}(),"collapsed","expanded","reset-filter","set-filter");i&&i.length>0&&e.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(i.toLowerCase())})),m.current.push((function(){return n.unsubscribe()})),m.current.push((function(){return r()})),j.current=e},M=function(n){var r=n.name;e(H.vu.collapseFolder({folderName:r}))},A=function(n){var r=n.name;e(H.vu.expandFolder({folderName:r}))},B=function(){var n=(0,a.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(H.vu.changeHistorySearchTerm({searchTerm:r})),!j.current){n.next=9;break}if(!(r.length>0)){n.next=7;break}return n.next=5,j.current.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(r.toLowerCase())}));case 5:n.next=9;break;case 7:return n.next=9,j.current.resetFilter();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),J=function(e){t.pipe((0,Z.q)(1)).subscribe(function(){var n=(0,a.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},L=function(){e(b.EJ.signIn())},G=function(e){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(D,{title:e.name,children:e.name}),(0,E.jsx)(U,{title:e.metadata.time,children:e.metadata.time}),"group"===e.metadata.kind?(0,E.jsx)(E.Fragment,{}):K(e)]})},K=function(e){switch(e.metadata.operationStatus){case"cancelled":return(0,E.jsx)(h._c,{colorSelector:function(e){return e.warning},title:"Operation cancelled",children:(0,E.jsx)(p.KH,{})});case"failed":return(0,E.jsx)(h._c,{colorSelector:function(e){return e.failure},title:"Operation failed",children:(0,E.jsx)(p.Pz,{})});default:return(0,E.jsx)(h._c,{colorSelector:function(e){return e.success},title:"Operation succeeded",children:(0,E.jsx)(p.nq,{})})}};function Q(e,n){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(c().mark((function e(n,r){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}if(!(t=n.find((function(e){return e.metadata&&e.metadata.id&&e.metadata.id===r})))){e.next=8;break}return t.selected||((0,h.gF)(n),t.selected=!0),e.next=6,t.ensureVisible();case 6:e.next=9;break;case 8:(0,h.gF)(n);case 9:e.next=12;break;case 11:(0,h.gF)(n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,T.useEffect)((function(){var e=m.current;return function(){for(var n;n=e.pop();)n();j.current=void 0}}),[]),(0,E.jsxs)(x.sg,{children:[(0,E.jsxs)(x.x8,{children:[(0,E.jsx)(x.qF,{children:"History"}),(0,E.jsx)(x.Jm,{}),(0,E.jsx)(u.hE,{children:(0,E.jsx)(u.hU,{disabled:!n,tooltip:"Clear History",onClick:function(){e(H.vu.clearHistory())},children:(0,E.jsx)(p.KH,{})})})]}),(0,E.jsx)(x.F0,{children:(0,E.jsx)(l.k,{searchTerm:i,onSearchTermChange:B})}),r?(0,E.jsx)(d.N,{}):n?(0,E.jsx)(x.f,{children:(0,E.jsx)(h.mp,{id:"history",itemHeight:h.C_,provider:C,onInitialized:z,children:function(e){return(0,E.jsx)(h.OF,{id:e.id,depth:e.depth,name:e.name,path:e.path,expanded:e.expanded,expandable:e.expandable,node:e,onClick:O,onDoubleClick:R,renderIcon:q,renderName:G})}})}):(0,E.jsx)(f.z,{title:"Sign in to access history data",icon:(0,E.jsx)(p.qD,{}),children:(0,E.jsx)(u.zx,{primary:!0,onClick:L,children:"Sign in"})})]})};function q(e){return"group"===e.metadata.kind?(0,E.jsx)(h._c,{colorSelector:function(e){return e.calendarIcon},children:(0,E.jsx)(p.Qu,{})}):(0,E.jsx)(h._c,{children:e.metadata.operationType===j.ku.MUTATION?(0,E.jsx)(m.mm,{title:"Mutation"}):e.metadata.operationType===j.ku.SUBSCRIPTION?(0,E.jsx)(m.w0,{title:"Subscription"}):(0,E.jsx)(m.AE,{title:"Query"})})}var D=C.ZP.h3(N||(N=(0,t.Z)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  padding: 0 4px 0 0;\n  font-weight: normal;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),U=C.ZP.div(O||(O=(0,t.Z)(["\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  padding: 0 4px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])))},77268:function(e,n,r){r.d(n,{k:function(){return m}});var t,o,a,i,c=r(30168),s=r(68224),u=r(47313),l=r(49184),d=r(2603),f=r(29158),p=r(87373),x=r(46417),m=(0,u.memo)((0,u.forwardRef)((function(e,n){var r=e.searchTerm,t=e.onSearchTermChange,o=(0,u.useRef)(null),a=(0,u.useRef)(null),i=(0,s.Nr)((function(e){t(e.target.value.trim())}),250,[t]),c=(0,u.useCallback)((function(e){i(e),a.current.style.display=e.currentTarget.value.length>0?"flex":"none"}),[i]),l=(0,u.useCallback)((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),[]);return(0,u.useEffect)((function(){var e=o.current,n=a.current;r&&r.length>0?(e.value=r,n.style.display="flex"):n.style.display="none"}),[r]),(0,x.jsx)(h,{ref:n,onClick:l,children:(0,x.jsxs)(g,{children:[(0,x.jsx)(v,{children:(0,x.jsx)(p.W1,{})}),(0,x.jsx)(k,{ref:o,placeholder:"Find...",onChange:c}),(0,x.jsx)(f.hU,{innerRef:a,onClick:function(){t(""),o.current.value="",a.current.style.display="none"},children:(0,x.jsx)(p.Tw,{})})]})})}))),h=l.ZP.div(t||(t=(0,c.Z)(["\n  z-index: 1;\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: row;\n  align-items: center;\n"]))),v=l.ZP.div(o||(o=(0,c.Z)(["\n  display: flex;\n  flex: 0 0 24px;\n  align-items: center;\n  justify-content: center;\n  transition: fill 0.2s ease;\n\n  & > svg {\n    fill: "," !important;\n  }\n"])),d.kT.components.fieldText),k=l.ZP.input(a||(a=(0,c.Z)(["\n  flex: 1 1 auto;\n  border: 0 none;\n  padding: 0 9px;\n  color: ",";\n  background-color: ",";\n  transition: background-color 0.2s ease, color 0.2s ease;\n  user-select: initial;\n\n  ::placeholder {\n    color: ",";\n    transition: color 0.2s ease;\n  }\n"])),d.kT.components.fieldText,d.kT.components.field,d.kT.components.fieldPlaceholder),g=l.ZP.div(i||(i=(0,c.Z)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  border-radius: 8px;\n  border: 1px solid ",";\n  padding-left: 5px;\n  height: 28px;\n  background-color: ",";\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n  cursor: text;\n\n  &:focus-within,\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      background-color: ",";\n      color: ",";\n\n      ::placeholder {\n        color: ",";\n      }\n    }\n  }\n\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      color: ",";\n      background-color: ",";\n    }\n  }\n"])),d.kT.components.fieldBorder,d.kT.components.field,d.kT.components.fieldHoverBorder,d.kT.components.fieldHover,v,d.kT.components.fieldHoverText,k,d.kT.components.fieldHover,d.kT.components.fieldHoverText,d.kT.components.fieldHoverPlaceholder,d.kT.components.fieldHoverBorder,d.kT.components.fieldHover,v,d.kT.components.fieldHoverText,k,d.kT.components.fieldHoverText,d.kT.components.fieldHover)},13369:function(e,n,r){r.d(n,{Z:function(){return a}});var t=r(15671),o=r(43144),a=function(){function e(n,r,o){(0,t.Z)(this,e),this._succeeded=n,this._errorMessage=r,this._errorDetails=o}return(0,o.Z)(e,[{key:"succeeded",get:function(){return this._succeeded}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"errorDetails",get:function(){return this._errorDetails}}],[{key:"fail",value:function(n,r){return new e(!1,n,r)}},{key:"success",value:function(){return new e(!0)}}]),e}()},25323:function(e,n,r){r.d(n,{n:function(){return o}});var t=(0,r(71982).d)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function o(e,n){var r="object"===typeof n;return new Promise((function(o,a){var i,c=!1;e.subscribe({next:function(e){i=e,c=!0},error:a,complete:function(){c?o(i):r?o(n.defaultValue):a(new t)}})}))}}}]);