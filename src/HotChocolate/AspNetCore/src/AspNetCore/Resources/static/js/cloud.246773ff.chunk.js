!function(){"use strict";var e={36466:function(e,n,t){t.d(n,{R:function(){return r}});var r="user-session"},40712:function(e,n,t){t.d(n,{RQ:function(){return u.R},Ke:function(){return c},cw:function(){return s},Sm:function(){return p}});var r=t(15861),a=t(87757),i=t.n(a),o=t(34502),u=t(36466);function c(){return(0,o.Ks)("app",u.R)}function s(){return(0,o.aU)("app",u.R)}function p(e){return d(u.R,e)}function d(e,n){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(i().mark((function e(n,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.bA)().then((function(e){return e.put("app",t,n)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},24329:function(e,n,t){t.d(n,{Ix:function(){return a},MK:function(){return o},Wr:function(){return i},eX:function(){return r},qm:function(){return u}});var r="Bearer",a="no-auth",i="bearer",o="oauth2",u="basic"},16118:function(e,n,t){t.d(n,{qV:function(){return d}});var r=t(40918),a=t(24329),i={kind:a.Ix,text:"No Auth",createAuthHeaderValue:function(){return null}},o={kind:a.qm,text:"Basic",createAuthHeaderValue:function(e){var n=e.basicOptions;return n?function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf8",a="".concat(null!==e&&void 0!==e?e:"",":").concat(null!==n&&void 0!==n?n:""),i=r.Buffer.from(a,t).toString("base64");return"Basic ".concat(i)}(n.username,n.password):null}},u={kind:a.Wr,text:"Bearer",createAuthHeaderValue:function(e){var n=e.bearerOptions;return n?p(n.token,n.prefix):null}},c={kind:a.MK,text:"OAuth 2",createAuthHeaderValue:function(e){var n,t=e.oAuth2Options;return null!==t&&void 0!==t&&null!==(n=t.token)&&void 0!==n&&n.accessToken?p(t.token.accessToken,t.prefix):null}},s={"no-auth":i,basic:o,bearer:u,oauth2:c};function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.eX;return"".concat(null!==n&&void 0!==n&&n.length?n:a.eX," ").concat(e)}function d(e){return s[e.activeAuthenticationKind].createAuthHeaderValue(e)}},92360:function(e,n,t){t.d(n,{Fj:function(){return p},kX:function(){return c},kj:function(){return d}});var r=t(1413),a=t(15861),i=t(87757),o=t.n(i),u=(t(34502),t(88656),t(59859),t(90524),t(19614),t(32789));function c(e,n){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)(o().mark((function e(n,t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.delete(d(t)),n.delete(t)]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var n=(0,u.js)(JSON.stringify((0,r.Z)((0,r.Z)({},e),{},{id:"",name:"",hash:"",isDraft:!1})));return(0,r.Z)((0,r.Z)({},e),{},{hash:n})}function d(e){return e.endsWith("-origin")?e:e+"-origin"}},60251:function(e,n,t){t.d(n,{Fj:function(){return r.Fj},Sk:function(){return r.kj},kX:function(){return r.kX},qV:function(){return a.qV}});var r=t(92360),a=t(16118)},34502:function(e,n,t){t.d(n,{IP:function(){return k},Ks:function(){return s},aU:function(){return d},bA:function(){return v},i8:function(){return l}});var r=t(15861),a=t(87757),i=t.n(a),o=t(29725),u=t(40712),c=t(69078);function s(e,n){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(i().mark((function e(n,t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return r=e.sent,e.next=5,r.delete(n,t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,n){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(i().mark((function e(n,t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return r=e.sent,e.next=5,r.get(n,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,n,t){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(i().mark((function e(n,t,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get(t);case 2:if(!(a=e.sent)){e.next=8;break}if(!(a=r(a))){e.next=8;break}return e.next=8,n.put(a);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(0,o.X3)("banana-cake-pop",2,{upgrade:function(e,n,t,r){for(var a=0;a<c.X.length;a++)c.X[a].version>=n&&c.X[a].up(e,r)}})}function k(){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return n=e.sent,t=n.transaction(["app","document","file","history","node","schema-query-result","update-log","variable-json-schema","workspace-sync"],"readwrite"),e.next=6,Promise.all([t.objectStore("app").delete(u.RQ),t.objectStore("document").clear(),t.objectStore("file").clear(),t.objectStore("history").clear(),t.objectStore("node").clear(),t.objectStore("schema-query-result").clear(),t.objectStore("update-log").clear(),t.objectStore("variable-json-schema").clear(),t.objectStore("workspace-sync").clear()]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8415:function(e,n,t){t.d(n,{nu:function(){return u}});var r=t(15861),a=t(87757),i=t.n(a),o=t(34502);t(88656),t(32789);function u(){return c.apply(this,arguments)}function c(){return c=(0,r.Z)(i().mark((function e(){var n,t,r,a,u,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.bA)();case 2:for(n=e.sent,t=n.transaction("file","readonly"),r=c.length,a=new Array(r),u=0;u<r;u++)a[u]=c[u];return e.abrupt("return",Promise.all(a.map((function(e){return t.store.get(e).then((function(n){return{id:e,content:n}}))}))));case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},13324:function(e,n,t){t.d(n,{nu:function(){return r.nu}});var r=t(8415)},18063:function(e,n,t){t(87757),t(92360),t(34502),t(32789)},71941:function(e,n,t){t(18063)},996:function(e,n,t){t.d(n,{HJ:function(){return o.HJ},Ke:function(){return r.Ke},LC:function(){return o.LC},Sm:function(){return r.Sm},cw:function(){return r.cw},j6:function(){return o.j6},mI:function(){return i.mI},nu:function(){return a.nu},rS:function(){return o.rS},rT:function(){return o.rT}});var r=t(40712),a=(t(60251),t(13324)),i=(t(71941),t(88656)),o=(t(3116),t(91841),t(90524),t(25291))},59859:function(e,n,t){t.d(n,{jb:function(){return c}});var r=t(15861),a=t(87757),i=t.n(a),o=(t(60251),t(25291),t(32789)),u=t(15189);function c(e,n,t,r,a,i,o,u){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(i().mark((function e(n,t,r,a,c,s,p,d){var f,l,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===d||void 0===d){e.next=4;break}e.t0=d,e.next=7;break;case 4:return e.next=6,(0,u._X)(n,r,a,c);case 6:e.t0=e.sent;case 7:return f=e.t0,l=(0,o.zO)(),h={id:r,parentId:null!==c&&void 0!==c?c:a,workspaceId:a,remoteId:s,version:p,name:t,path:f,kind:"document",created:l,modified:l},e.next=12,n.put(h);case 12:return e.abrupt("return",h);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},318:function(e,n,t){t(87757),t(32789),t(15189)},58070:function(e,n,t){t.d(n,{O3:function(){return s},mI:function(){return d}});var r=t(15861),a=t(16296),i=t(87757),o=t.n(i),u=t(34502),c=t(32789);t(15189);function s(e,n,t,r,a,i){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(o().mark((function e(n,t,r,a,i,u){var s,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,c.zO)(),p={id:t,parentId:null!==u&&void 0!==u?u:i,workspaceId:i,name:r,path:a,kind:"folder",created:s,modified:s},e.next=4,n.put(p);case 4:return e.abrupt("return",p);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(o().mark((function e(n){var t,r,i,c,s,p,d,f,l,h,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.bA)();case 2:t=e.sent,r=t.transaction("node","readonly"),i=r.store.index("workspace"),c=[],s=!1,p=!1,e.prev=8,f=(0,a.Z)(i.iterate(n));case 10:return e.next=12,f.next();case 12:if(!(s=!(l=e.sent).done)){e.next=19;break}h=l.value,"folder"===(v=h.value).kind&&c.push(v);case 16:s=!1,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),p=!0,d=e.t0;case 25:if(e.prev=25,e.prev=26,!s||null==f.return){e.next=30;break}return e.next=30,f.return();case 30:if(e.prev=30,!p){e.next=33;break}throw d;case 33:return e.finish(30);case 34:return e.finish(25);case 35:return e.abrupt("return",c);case 36:case"end":return e.stop()}}),e,null,[[8,21,25,35],[26,,30,34]])})))).apply(this,arguments)}},88656:function(e,n,t){t.d(n,{O3:function(){return a.O3},jb:function(){return r.jb},mI:function(){return a.mI}});var r=t(59859),a=(t(318),t(58070));t(15189)},15189:function(e,n,t){t.d(n,{_X:function(){return u}});var r=t(93433),a=t(15861),i=t(87757),o=t.n(i);t(60251),t(34502),t(25291),t(32789),t(59859),t(318);function u(e,n,t,r){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)(o().mark((function e(n,t,a,i){var u,c,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=13;break}return e.next=3,n.get(i);case 3:if(u=e.sent,(null===(p=u)||void 0===p?void 0:p.workspaceId)!==a||!s(u)){e.next=8;break}c=[].concat((0,r.Z)(u.path),[t]),e.next=11;break;case 8:return e.next=10,Promise.reject("Parent does not exist, parent lives in a different workspace or is not of type folder");case 10:return e.abrupt("return",e.sent);case 11:e.next=14;break;case 13:c=[t];case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return"folder"===e.kind}},3116:function(e,n,t){t(74576)},74576:function(e,n,t){t(34502),t(32789)},90524:function(e,n,t){t(30021)},30021:function(e,n,t){t(87757),t(34502)},25291:function(e,n,t){t.d(n,{HJ:function(){return r.HJ},LC:function(){return r.LC},j6:function(){return r.j6},rS:function(){return r.rS},rT:function(){return r.rT}});var r=t(19614)},19614:function(e,n,t){t.d(n,{HJ:function(){return y},LC:function(){return A},j6:function(){return k},rS:function(){return m},rT:function(){return w}});var r=t(29439),a=t(93433),i=t(37762),o=t(1413),u=t(15861),c=t(16296),s=t(87757),p=t.n(s),d=t(60251),f=t(34502),l=t(88656),h=t(32789),v="DefaultWorkspace";function k(){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.bA)();case 2:return n=e.sent,e.next=5,n.count("workspace-sync");case 5:return e.abrupt("return",!!e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)(p().mark((function e(n){var t,r,a,i,o,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.bA)();case 2:return t=e.sent,r=t.transaction(["document","node","workspace-sync"],"readwrite"),a=r.objectStore("document"),i=r.objectStore("node"),o=r.objectStore("workspace-sync"),u=i.index("workspace"),e.next=10,u.count(v);case 10:if(!e.sent){e.next=18;break}return e.next=14,V(i,u,n);case 14:return e.next=16,K(a,i,o,u,n);case 16:return e.next=18,r.done;case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return g.apply(this,arguments)}function g(){return(g=(0,u.Z)(p().mark((function e(){var n,t,r,a,i,o,u,s,d,l,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.bA)();case 2:n=e.sent,t=n.transaction("workspace-sync","readwrite"),r=t.store.index("created"),a=[],i=!1,o=!1,e.prev=8,s=(0,c.Z)(r);case 10:return e.next=12,s.next();case 12:if(!(i=!(d=e.sent).done)){e.next=22;break}if(l=d.value,(h=l.value).conflictKind){e.next=19;break}if(5!==a.push(h)){e.next=19;break}return e.abrupt("break",22);case 19:i=!1,e.next=10;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(8),o=!0,u=e.t0;case 28:if(e.prev=28,e.prev=29,!i||null==s.return){e.next=33;break}return e.next=33,s.return();case 33:if(e.prev=33,!o){e.next=36;break}throw u;case 36:return e.finish(33);case 37:return e.finish(28);case 38:return e.abrupt("return",a);case 39:case"end":return e.stop()}}),e,null,[[8,24,28,38],[29,,33,37]])})))).apply(this,arguments)}function y(e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)(p().mark((function e(n,t){var r,a,u,c,s,l,h,v,k,x,m,b;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.bA)();case 2:r=e.sent,a=r.transaction(["document","node","workspace-sync"],"readwrite"),u=a.objectStore("document"),c=a.objectStore("node"),s=a.objectStore("workspace-sync"),l=[],h=(0,i.Z)(t),e.prev=9,k=function(){var e=v.value,n=e.id,t=e.conflict;switch(t.kind){case"deleted":case"existed":return l.push((0,d.kX)(u,n)),l.push(c.delete(n)),l.push(s.delete(n)),"continue";case"updated":return l.push(N(u,c,n,t.remoteId,t.remoteDocument,t.remoteVersion)),l.push(s.delete(n)),"continue";case"unexpected-error":case"validation-failed":case"workspace-not-found":return l.push(s.get(n).then((function(e){return e?O(s,(0,o.Z)((0,o.Z)({},e),{},{conflictKind:t.kind})):Promise.resolve()}))),"continue"}},h.s();case 12:if((v=h.n()).done){e.next=18;break}if("continue"!==k()){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),h.e(e.t0);case 23:return e.prev=23,h.f(),e.finish(23);case 26:x=(0,i.Z)(n);try{for(b=function(){var e=m.value,n=e.id,t=e.remoteId,r=e.remoteVersion;l.push((0,f.i8)(c,n,(function(e){return(0,o.Z)((0,o.Z)({},e),{},{remoteId:t,version:r})}))),l.push(s.delete(n))},x.s();!(m=x.n()).done;)b()}catch(p){x.e(p)}finally{x.f()}return l.push(a.done),e.next=31,Promise.all(l);case 31:case"end":return e.stop()}}),e,null,[[9,20,23,26]])})))).apply(this,arguments)}function O(e,n){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(p().mark((function e(n,t){var r,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get(t.id);case 2:if(r=e.sent,"delete"!==t.kind||"create"!==(null===r||void 0===r?void 0:r.kind)){e.next=8;break}return e.next=6,n.delete(t.id);case 6:case 12:e.next=16;break;case 8:if("update"!==t.kind||"create"!==(null===r||void 0===r?void 0:r.kind)){e.next=14;break}return a=t.document,i=t.documentNode,e.next=12,n.put((0,o.Z)((0,o.Z)({},r),{},{conflictKind:t.conflictKind,document:a,documentNode:i}));case 14:return e.next=16,n.put((0,o.Z)((0,o.Z)({},t),{},{created:Date.now()}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)(p().mark((function e(n){var t,r,a,o,u,c,s,d,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.bA)();case 2:t=e.sent,r=t.transaction(["document","node"],"readwrite"),a=r.objectStore("document"),o=r.objectStore("node"),u=o.index("children"),c=o.index("remote"),s=(0,i.Z)(n),e.prev=9,s.s();case 11:if((d=s.n()).done){e.next=22;break}if("create-or-update"!==(l=d.value).kind){e.next=18;break}return e.next=16,T(a,o,u,c,l);case 16:e.next=20;break;case 18:return e.next=20,M(a,o,c,l.remoteId);case 20:e.next=11;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(9),s.e(e.t0);case 27:return e.prev=27,s.f(),e.finish(27);case 30:return e.next=32,r.done;case 32:case"end":return e.stop()}}),e,null,[[9,24,27,30]])})))).apply(this,arguments)}function T(e,n,t,r,a){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(p().mark((function e(n,t,r,a,u){var c,s,f,v,k,x,m,b,w,g,y,Z,O,I,A,C;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=u.remoteId,f=u.version,v=u.workspaceId,k=u.namePath,x=u.remoteDocument,m=[],b=(0,i.Z)(k),e.prev=3,b.s();case 5:if((w=b.n()).done){e.next=14;break}return g=w.value,y=m[m.length-1],e.next=10,S(t,r,g,m,v,y);case 10:Z=e.sent,m.push(Z.id);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),b.e(e.t0);case 19:return e.prev=19,b.f(),e.finish(19);case 22:return e.next=24,a.get(s);case 24:if(I=e.sent,A=null!==(c=m[m.length-1])&&void 0!==c?c:v,!I){e.next=33;break}return O=I.id,m.push(O),e.next=31,Promise.all([t.put((0,o.Z)((0,o.Z)({},I),{},{name:x.name,parentId:A,path:m,version:f})),N(n,t,O,s,x,f)]);case 31:e.next=38;break;case 33:return C=U(x.httpConnection),O=(0,h.A0)(),m.push(O),e.next=38,Promise.all([(0,l.jb)(t,x.name,O,v,A,s,f,m),n.put((0,d.Fj)((0,o.Z)((0,o.Z)({},x),{},{httpConnection:C,id:O})))]);case 38:return e.next=40,n.get(O);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})))).apply(this,arguments)}function S(e,n,t,r,a,i){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)(p().mark((function e(n,t,r,i,u,s){var d,f,v,k,x,m,b,w;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=!1,v=!1,e.prev=2,x=(0,c.Z)(t.iterate(null!==s&&void 0!==s?s:u));case 4:return e.next=6,x.next();case 6:if(!(f=!(m=e.sent).done)){e.next=14;break}if(0!==(b=m.value).value.name.localeCompare(r,void 0,{sensitivity:"base"})){e.next=11;break}return d=b.value,e.abrupt("break",14);case 11:f=!1,e.next=4;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),v=!0,k=e.t0;case 20:if(e.prev=20,e.prev=21,!f||null==x.return){e.next=25;break}return e.next=25,x.return();case 25:if(e.prev=25,!v){e.next=28;break}throw k;case 28:return e.finish(25);case 29:return e.finish(20);case 30:if(!d){e.next=33;break}return d.name!==r&&n.put((0,o.Z)((0,o.Z)({},d),{},{name:r})),e.abrupt("return",d);case 33:return w=(0,h.NN)(),e.abrupt("return",(0,l.O3)(n,w,r,[].concat((0,a.Z)(i),[w]),u,s));case 35:case"end":return e.stop()}}),e,null,[[2,16,20,30],[21,,25,29]])})))).apply(this,arguments)}function M(e,n,t,r){return _.apply(this,arguments)}function _(){return(_=(0,u.Z)(p().mark((function e(n,t,r,a){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(a);case 2:if(!(i=e.sent)){e.next=6;break}return e.next=6,Promise.all([(0,d.kX)(n,i.id),t.delete(i.id)]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,n,t,r,a,i){return D.apply(this,arguments)}function D(){return(D=(0,u.Z)(p().mark((function e(n,t,r,a,i,u){var c,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get(r);case 2:if(!(c=e.sent)){e.next=12;break}if(!c.isDraft){e.next=10;break}return s=(0,d.Sk)(r),e.next=8,Promise.all([(0,f.i8)(t,r,(function(e){return(0,o.Z)((0,o.Z)({},e),{},{name:i.name,remoteId:a,version:u})})),n.put(H(i,s,!0))]);case 8:e.next=12;break;case 10:return e.next=12,Promise.all([(0,f.i8)(t,r,(function(e){return(0,o.Z)((0,o.Z)({},e),{},{name:i.name,remoteId:a,version:u})})),n.put(H(i,r,!1))]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,n,t){var r=U(e.httpConnection);return(0,d.Fj)((0,o.Z)((0,o.Z)({},e),{},{httpConnection:r,id:n,isDraft:t,isNew:!1}))}function U(e){if(null!==e&&void 0!==e&&e.authentication){var n=(0,d.qV)(e.authentication);return n?(0,o.Z)((0,o.Z)({},e),{},{authentication:(0,o.Z)((0,o.Z)({},e.authentication),{},{headerValue:n})}):e}return e}function K(e,n,t,r,a){return R.apply(this,arguments)}function R(){return(R=(0,u.Z)(p().mark((function e(n,t,r,a,o){var u,c,s,d,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(a,o);case 2:u=e.sent,c=[],s=(0,i.Z)(u);try{for(s.s();!(d=s.n()).done;)f=d.value,c.push(z(n,t,r,f))}catch(p){s.e(p)}finally{s.f()}return e.next=8,Promise.all(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,n,t,r){return E.apply(this,arguments)}function E(){return(E=(0,u.Z)(p().mark((function e(n,t,a,i){var o,u,c,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.get(i),t.get(i).then((function(e){return"document"===(null===e||void 0===e?void 0:e.kind)?e:void 0}))]);case 2:if(o=e.sent,u=(0,r.Z)(o,2),c=u[0],s=u[1],c&&s){e.next=8;break}throw new Error("Unexpected error");case 8:return e.next=10,O(a,{id:i,kind:"create",document:c,documentNode:s});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,n){return B.apply(this,arguments)}function B(){return(B=(0,u.Z)(p().mark((function e(n,t){var r,a,i,o,u,s,d,f,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=!1,i=!1,e.prev=3,u=(0,c.Z)(n.iterate(t));case 5:return e.next=7,u.next();case 7:if(!(a=!(s=e.sent).done)){e.next=14;break}d=s.value,f=d.value,l=f.id,"document"===f.kind&&r.push(l);case 11:a=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),i=!0,o=e.t0;case 20:if(e.prev=20,e.prev=21,!a||null==u.return){e.next=25;break}return e.next=25,u.return();case 25:if(e.prev=25,!i){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}function V(e,n,t){return X.apply(this,arguments)}function X(){return(X=(0,u.Z)(p().mark((function e(n,t,r){var a,i,u,s,d,f,l,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=!1,u=!1,e.prev=3,d=(0,c.Z)(t.iterate(v));case 5:return e.next=7,d.next();case 7:if(!(i=!(f=e.sent).done)){e.next=14;break}l=f.value,h=l.value,a.push(n.put((0,o.Z)((0,o.Z)({},h),{},{workspaceId:r,parentId:h.parentId===v?r:h.parentId})));case 11:i=!1,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),u=!0,s=e.t0;case 20:if(e.prev=20,e.prev=21,!i||null==d.return){e.next=25;break}return e.next=25,d.return();case 25:if(e.prev=25,!u){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(20);case 30:return e.next=32,Promise.all(a);case 32:case"end":return e.stop()}}),e,null,[[3,16,20,30],[21,,25,29]])})))).apply(this,arguments)}},54766:function(e,n,t){t.d(n,{p:function(){return b},x:function(){return m}});var r,a=t(43144),i=t(15671),o=t(60136),u=t(43668),c=t(28664),s=t(15861),p=t(87757),d=t.n(p),f=t(48097),l=t(66567),h=t(60114),v=t(44477),k=null!==(r="https://api.chillicream.com/graphql")?r:"";var x=function(){var e=(0,s.Z)(d().mark((function e(n,t){var r,a,i,o,u,c,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.G6)(n)[0],a=r.name,i=r.type,e.next=3,(0,l.jk)().then((function(e){var n=new Headers,t=h.v.bcpAgent();if(t&&n.set("BCP-Agent",t),!e)throw new b;return n.set("Authorization","Bearer ".concat(e.accessToken)),n}));case 3:if(o=e.sent,u={uri:k,headers:o},c=(0,f.print)(n),s={query:c,variables:t,operationName:a},"subscription"!==i){e.next=11;break}return e.abrupt("return",void 0);case 11:return e.abrupt("return",(0,l.Q4)(u,s,i,{onComplete:function(){},onError:function(){},onNext:function(){}}).then((function(e){var n;return null===(n=e.response.parsedBody)||void 0===n?void 0:n.data})));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=(0,v.mK)(x),b=function(e){(0,o.Z)(t,e);var n=(0,u.Z)(t);function t(){return(0,i.Z)(this,t),n.call(this,"User session has been expired")}return(0,a.Z)(t)}((0,c.Z)(Error))},98090:function(e,n,t){t.d(n,{p$:function(){return r.p},x1:function(){return r.x}});var r=t(54766);t(44477)},86471:function(e,n,t){var r=t(15671),a=t(43144),i=t(60136),o=t(43668),u=t(60114),c=t(15861),s=t(87757),p=t.n(s),d=t(89932),f=new Map;function l(){return(l=(0,c.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],f.forEach((function(e){return n.push(e.cancel())})),e.next=4,Promise.all(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){f.has(e.id)||(f.set(e.id,e),u.v.sendMessage(new d.v("scheduler-status-updated",{idling:!1,lastUpdated:Date.now()})),e.execute().finally((function(){f.delete(e.id),u.v.sendMessage(new d.v("scheduler-status-updated",{idling:0===f.size,lastUpdated:Date.now()}))})))}var v=t(996),k=t(98090),x=t(66567);var m=t(37762);function b(e,n){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)(p().mark((function e(n,t){var r,a,i,o,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.x1.pullChanges({workspaceId:n,version:t});case 2:if(a=e.sent,null===(i=a.workspaceById)||void 0===i||null===(r=i.documentChanges)||void 0===r||!r.pageInfo.endCursor){e.next=7;break}return c=i.documentChanges.pageInfo.endCursor,e.abrupt("return",{changes:null!==(o=null===(u=i.documentChanges.edges)||void 0===u?void 0:u.filter((function(e){return!!e.node})).map((function(e){return e.node})))&&void 0!==o?o:[],version:c});case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,n){return y.apply(this,arguments)}function y(){return(y=(0,c.Z)(p().mark((function e(n,t){var r,a,i,o,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Map,e.next=3,(0,v.mI)(n);case 3:if(e.sent.forEach((function(e){var n=e.id,t=e.name;r.set(n,t)})),!(a=t.map((function(e){var t,a=e.id,i=e.kind,o=e.document,u=e.documentNode;return"delete"===i?_(a,u.remoteId,n,null!==(t=u.version)&&void 0!==t?t:""):N(u,o,(function(e){return r.get(e)}))})).filter((function(e){return e.delete||e.put&&!e.put.path.includes(null)}))).length){e.next=11;break}return e.next=8,k.x1.pushChanges({changes:a});case 8:return o=e.sent,u=o.pushDocumentChanges,e.abrupt("return",null!==(i=u.changes)&&void 0!==i?i:[]);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=["unexpected-error","validation-failed","workspace-not-found"];function O(e,n){return I.apply(this,arguments)}function I(){return(I=(0,c.Z)(p().mark((function e(n,t){var r,a,i,o,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=30;break}r=A(t),a=C(t),i=r.filter((function(e){var n=e.conflict.kind;return Z.includes(n)})).map((function(e){return e.conflict})),o=(0,m.Z)(i),e.prev=5,o.s();case 7:if((u=o.n()).done){e.next=20;break}c=u.value,e.t0=c.kind,e.next="unexpected-error"===e.t0?12:"validation-failed"===e.t0?14:"workspace-not-found"===e.t0?16:18;break;case 12:return(0,x.H)(n,"Unexpected error occurred while synchronizing this document.",c.id,c.errors),e.abrupt("continue",18);case 14:return(0,x.H)(n,"Validation error occurred while synchronizing this document.",c.id,c.errors),e.abrupt("continue",18);case 16:return(0,x.H)(n,"Unable to synchronize this document, because it's assigned to a non-existing workspace.",c.id,c.errors),e.abrupt("continue",18);case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(5),o.e(e.t1);case 25:return e.prev=25,o.f(),e.finish(25);case 28:return e.next=30,(0,v.HJ)(a,r);case 30:case"end":return e.stop()}}),e,null,[[5,22,25,28]])})))).apply(this,arguments)}function A(e){return e.filter((function(e){return!!e.error})).map((function(e){var n=e.error,t=e.referenceId,r=n;switch(r.__typename){case"DocumentChangedConflict":return{id:t,kind:"updated",remoteId:r.document.id,remoteVersion:r.document.version,remoteDocument:T(r.document)};case"DocumentNameCollisionConflict":return{id:t,kind:"existed",remoteId:r.document.id,remoteVersion:r.document.version,remoteDocument:T(r.document)};case"DocumentDeletionConflict":return{id:t,kind:"deleted"};case"DocumentChangeValidationFailed":return{id:t,kind:"validation-failed",errors:r.errors.map((function(e){return e.message}))};case"WorkspaceNotFoundForDocument":return{id:t,kind:"workspace-not-found"};default:return{id:t,kind:"unexpected-error"}}})).map((function(e){return{id:e.id,remoteId:"remoteId"in e?e.remoteId:void 0,conflict:e}}))}function C(e){return e.filter((function(e){var n=e.error,t=e.document;return!n&&!!t})).map((function(e){var n=e.document;return{id:e.referenceId,remoteId:n.id,remoteVersion:n.version}}))}function T(e){var n,t,r,a;return{id:e.id,name:e.name,body:e.body,variables:null!==(n=e.variables)&&void 0!==n?n:void 0,hash:"",isDraft:!1,isNew:!1,activeConnectionKind:e.activeConnectionKind,httpConnection:e.httpConnection?{endpoint:e.httpConnection.endpoint,subscriptionEndpoint:null!==(t=e.httpConnection.subscriptionEndpoint)&&void 0!==t?t:void 0,subscriptionProtocol:null!==(r=e.httpConnection.subscriptionProtocol)&&void 0!==r?r:void 0,headers:null===(a=e.httpConnection.headers)||void 0===a?void 0:a.map((function(e){return{name:e.name,value:e.value,enabled:e.enabled}})),includeCookies:e.httpConnection.includeCookies,useGet:e.httpConnection.useGet,useTunnel:e.httpConnection.useTunnel,authentication:e.httpConnection.authentication?j(e.httpConnection.authentication):void 0}:void 0}}function j(e){var n=e.activeAuthenticationKind,t=e.basicOptions,r=e.bearerOptions,a=e.oAuth2Options;return{activeAuthenticationKind:n,basicOptions:S(t),bearerOptions:P(r),oAuth2Options:M(a)}}function S(e){if(e)return{password:e.password,username:e.username}}function P(e){var n;if(e)return{token:e.token,prefix:null!==(n=e.prefix)&&void 0!==n?n:void 0}}function M(e){if(e)return{activeFlowKind:e.activeFlowKind,accessTokenUrl:e.accessTokenUrl,audience:e.audience,authorizationUrl:e.authorizationUrl,clientId:e.clientId,clientSecret:e.clientSecret,credentialsInBody:e.credentialsInBody,grantType:e.grantType,origin:e.origin,password:e.password,pkceMethod:e.pkceMethod,prefix:e.prefix,redirectUrl:e.redirectUrl,resource:e.resource,responseType:e.responseType,scope:e.scope,state:e.state,usePkce:e.usePkce,username:e.username}}function _(e,n,t,r){return{delete:{id:n,referenceId:e,workspaceId:t,version:r}}}function N(e,n,t){var r=e.id,a=e.name,i=e.path,o=e.remoteId,u=e.version,c=e.workspaceId,s=n.body,p=n.variables,d=n.httpConnection;return{put:{id:o,referenceId:r,name:a,workspaceId:c,version:u,path:i.slice(0,i.length-1).map(t),body:s,variables:p,activeConnectionKind:"http",httpConnection:d?{authentication:D(d.authentication),endpoint:d.endpoint,subscriptionEndpoint:d.subscriptionEndpoint,subscriptionProtocol:d.subscriptionProtocol,headers:d.headers,includeCookies:d.includeCookies,useGet:d.useGet,useTunnel:d.useTunnel}:void 0}}}function D(e){if(e)return{activeAuthenticationKind:e.activeAuthenticationKind,basicOptions:e.basicOptions?{password:e.basicOptions.password,username:e.basicOptions.username}:void 0,bearerOptions:e.bearerOptions?{prefix:e.bearerOptions.prefix,token:e.bearerOptions.token}:void 0,oAuth2Options:e.oAuth2Options?{activeFlowKind:e.oAuth2Options.activeFlowKind,accessTokenUrl:e.oAuth2Options.accessTokenUrl,audience:e.oAuth2Options.audience,authorizationUrl:e.oAuth2Options.authorizationUrl,clientId:e.oAuth2Options.clientId,clientSecret:e.oAuth2Options.clientSecret,credentialsInBody:e.oAuth2Options.credentialsInBody,grantType:e.oAuth2Options.grantType,origin:e.oAuth2Options.origin,password:e.oAuth2Options.password,pkceMethod:e.oAuth2Options.pkceMethod,prefix:e.oAuth2Options.prefix,redirectUrl:e.oAuth2Options.redirectUrl,resource:e.oAuth2Options.resource,responseType:e.oAuth2Options.responseType,scope:e.oAuth2Options.scope,state:e.oAuth2Options.state,usePkce:e.oAuth2Options.usePkce,username:e.oAuth2Options.username}:void 0}}function H(e){return U.apply(this,arguments)}function U(){return U=(0,c.Z)(p().mark((function e(n){var t,r,a,i,o=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:5e3,r=o.length>2&&void 0!==o[2]?o[2]:3e5,a=(new Date).getTime()+r,i=function e(r,i){Promise.resolve(n()).then((function(n){var o=(new Date).getTime();n.done?r(n.data):o<a?self.setTimeout(e,t,r,i):i(new Error("Polling: Reached timeout"))})).catch((function(e){i(e)}))},e.abrupt("return",new Promise(i));case 5:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function K(e){return R.apply(this,arguments)}function R(){return(R=(0,c.Z)(p().mark((function e(n){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,r=new URLSearchParams,t.append("Content-Type","application/x-www-form-urlencoded"),r.append("client_id","0910a943-9561-4b7c-8aaa-197c222c076c"),r.append("scope","openid offline_access documents:read documents:write"),e.next=7,fetch("https://identity.chillicream.com/connect/deviceauthorization",{method:"POST",headers:t,body:r,signal:n});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,n){return E.apply(this,arguments)}function E(){return(E=(0,c.Z)(p().mark((function e(n,t){var r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Headers,a=new URLSearchParams,r.append("Content-Type","application/x-www-form-urlencoded"),a.append("client_id","0910a943-9561-4b7c-8aaa-197c222c076c"),a.append("grant_type","urn:ietf:params:oauth:grant-type:device_code"),a.append("device_code",n),e.next=8,fetch("https://identity.chillicream.com/connect/token",{method:"POST",headers:r,body:a,signal:t});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=t(34502),B=t(80810);function V(e,n){var t=e.id,r=e.type;return{id:t,cancel:function(){return Promise.resolve()},execute:function(){return(0,B.jk)().then((function(e){return n.sendMessage(new d.v(r,{idToken:null===e||void 0===e?void 0:e.idToken},t)),function(){return l.apply(this,arguments)}().then(F.IP).then(B.aU)}))}}}function X(e,n){h(function(e,n){var t=e.id;return{id:t,cancel:function(){return Promise.resolve()},execute:function(){return k.x1.createUserAccount().then((function(e){e.createAccount&&n.sendMessage(new d.v("authentication-succeeded",void 0,t))}))}}}(e,n))}function W(e,n){h(function(e,n){var t=e.id,r=e.type;return{id:t,cancel:function(){return Promise.resolve()},execute:function(){return k.x1.fetchUserAccount().then((function(e){var a=e.me,i=void 0;if(a){var o,u,c,s,p,f,l,h,v=null===(o=a.workspaces)||void 0===o||null===(u=o.edges)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.node,k=a.settings.theme;i={sessionId:a.sessionId,themeSettings:{usePreferredOsAppearance:k.usePreferredOsAppearance,darkThemeName:null!==(s=k.darkThemeName)&&void 0!==s?s:void 0,lightThemeName:null!==(p=k.lightThemeName)&&void 0!==p?p:void 0,themeName:null!==(f=k.themeName)&&void 0!==f?f:void 0},userId:null===(l=a.user)||void 0===l?void 0:l.id,username:null===(h=a.user)||void 0===h?void 0:h.username,activeWorkspace:v?{id:v.id,name:v.name}:null}}n.sendMessage(new d.v(r,i,t))}))}}}(e,n))}function q(e,n){h(function(e,n){var t=e.id,r=e.type,a=e.payload,i=a.workspaceId,o=a.version;return{id:t,cancel:function(){return Promise.resolve()},execute:function(){var e=(0,c.Z)(p().mark((function e(){var a,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.prev=1,e.next=4,k.x1.hasChanges({workspaceId:i,version:o});case 4:if(u=e.sent,c=u.workspaceById,a=!(null===c||void 0===c||!c.documentsChanged)){e.next=11;break}return e.next=10,(0,v.j6)();case 10:a=e.sent;case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(1),!(0,x.Nu)(e.t0)){e.next=19;break}(0,x.fh)(n),e.next=20;break;case 19:throw e.t0;case 20:n.sendMessage(new d.v(r,{workspaceId:i,version:o,hasChanges:a},t));case 21:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}()}}(e,n))}function L(e){h(function(e){var n=e.id,t=e.payload,r=t.usePreferredOsAppearance,a=t.darkThemeName,i=t.lightThemeName,o=t.themeName;return{id:n,cancel:function(){return Promise.resolve()},execute:function(){var e=(0,c.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.x1.persistThemeSettings({usePreferredOsAppearance:r,darkThemeName:a,lightThemeName:i,themeName:o});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}(e))}function G(e,n){h(function(e,n){var t=e.id,r=e.type,a=e.payload,i=a.workspaceId,o=a.version;return{id:t,cancel:function(){return Promise.resolve()},execute:function(){var e=(0,c.Z)(p().mark((function e(){var a,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,!o){e.next=24;break}return e.next=4,(0,v.j6)();case 4:if(e.t1=e.sent,e.t1){e.next=18;break}return e.next=8,k.x1.hasChanges({workspaceId:i,version:o});case 8:if(e.t3=u=e.sent.workspaceById,e.t2=null===e.t3,e.t2){e.next=12;break}e.t2=void 0===u;case 12:if(!e.t2){e.next=16;break}e.t4=void 0,e.next=17;break;case 16:e.t4=u.documentsChanged;case 17:e.t1=e.t4;case 18:if(e.t0=e.t1,e.t0){e.next=21;break}e.t0=!1;case 21:a=e.t0,e.next=27;break;case 24:return e.next=26,(0,v.rS)(i);case 26:a=!0;case 27:n.sendMessage(new d.v(r,{workspaceId:i,version:o,hasChanges:a},t));case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}(e,n))}function J(e,n){h(function(e,n){var t=e.id,r=new AbortController,a=self.setTimeout((function(){return r.abort()}),3e5);return{id:t,cancel:function(){var e=(0,c.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.abort(),self.clearTimeout(a);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),execute:function(){var e=(0,c.Z)(p().mark((function e(){var i,o,u,s,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(r.signal).then((function(e){return e.json()}));case 2:if(!(i=e.sent)){e.next=11;break}return o=i.device_code,u=i.interval,s=i.verification_uri_complete,f=1e3*u,n.sendMessage(new d.v("identity-sign-in-request",{url:s,taskId:t},t)),e.next=9,H((0,c.Z)(p().mark((function e(){var a,i,u,c,s,f,l,h,k;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(o,r.signal);case 3:if(200!==(a=e.sent).status){e.next=19;break}return e.next=7,a.json();case 7:return i=e.sent,u=i.access_token,c=i.expires_in,s=i.id_token,f=i.refresh_token,l={idToken:s,accessToken:u,refreshToken:f,expiresAt:(new Date).getTime()+1e3*c},e.next=15,(0,v.Sm)(l);case 15:return n.sendMessage(new d.v("authentication-succeeded",void 0,t)),e.abrupt("return",{done:!0});case 19:if(400!==a.status){e.next=34;break}return e.next=22,a.json();case 22:h=e.sent,k=h.error,e.t0=k,e.next="access_denied"===e.t0?27:"authorization_pending"===e.t0?29:30;break;case 27:return n.sendMessage(new d.v("authentication-cancelled",void 0,t)),e.abrupt("return",{done:!0});case 29:case 39:return e.abrupt("return",{done:!1});case 30:return n.sendMessage(new d.v("authentication-failed",{error:'Retrieved the following error "'.concat(k,'" while obtaining auth token.')},t)),e.abrupt("return",{done:!0});case 32:e.next=40;break;case 34:if(!r.signal.aborted){e.next=39;break}return n.sendMessage(new d.v("authentication-cancelled",void 0,t)),e.abrupt("return",{done:!0});case 40:e.next=46;break;case 42:return e.prev=42,e.t1=e.catch(0),(0,x.D_)(e.t1)?n.sendMessage(new d.v("authentication-cancelled",void 0,t)):n.sendMessage(new d.v("authentication-failed",{error:"Unknown error occurred while obtaining auth token, check connection and try again."},t)),e.abrupt("return",Promise.reject(e.t1));case 46:case"end":return e.stop()}}),e,null,[[0,42]])}))),f);case 9:e.next=12;break;case 11:n.sendMessage(new d.v("authentication-failed",{error:"Unable to obtain device code, check connection and try again."},t));case 12:self.clearTimeout(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}(e,n))}function Q(e,n){h(V(e,n))}function $(e,n){h(function(e,n){var t=e.id,r=e.type,a=e.payload,i=a.workspaceId,o=a.version,u=new AbortController;return{id:t,cancel:function(){var e=(0,c.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.abort());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),execute:function(){var e=(0,c.Z)(p().mark((function e(){var a,c,s,f,l,h,k,w,y,Z,I,A,C,j,S;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(e.t1=!u.signal.aborted,!e.t1){e.next=6;break}return e.next=5,(0,v.rT)();case 5:e.t1=a=e.sent;case 6:if(e.t0=e.t1,!e.t0){e.next=9;break}e.t0=a.length;case 9:if(!e.t0){e.next=17;break}return e.next=12,g(i,a);case 12:return c=e.sent,e.next=15,O(n,c);case 15:e.next=1;break;case 17:f=o;case 18:if(e.t2=!u.signal.aborted,!e.t2){e.next=30;break}return e.next=22,b(i,f);case 22:if(e.t5=l=s=e.sent,e.t4=null!==e.t5,!e.t4){e.next=26;break}e.t4=void 0!==l;case 26:if(e.t3=e.t4,!e.t3){e.next=29;break}e.t3=l.changes.length;case 29:e.t2=!!e.t3;case 30:if(!e.t2){e.next=60;break}h=[],f=s.version,k=(0,m.Z)(s.changes),e.prev=34,k.s();case 36:if((w=k.n()).done){e.next=47;break}y=w.value,e.t6=null===y||void 0===y?void 0:y.__typename,e.next="DocumentCreated"===e.t6||"DocumentChanged"===e.t6?41:"DocumentDeleted"===e.t6?43:45;break;case 41:return y.document&&(Z=T(y.document),h.push({kind:"create-or-update",namePath:y.path,remoteDocument:Z,remoteId:y.documentId,version:y.version,workspaceId:i})),e.abrupt("continue",45);case 43:return h.push({kind:"delete",remoteId:y.documentId}),e.abrupt("continue",45);case 45:e.next=36;break;case 47:e.next=52;break;case 49:e.prev=49,e.t7=e.catch(34),k.e(e.t7);case 52:return e.prev=52,k.f(),e.finish(52);case 55:if(!h.length){e.next=58;break}return e.next=58,(0,v.LC)(h);case 58:e.next=18;break;case 60:if(!u.signal.aborted){e.next=64;break}n.sendMessage(new d.v(r,{kind:"cancelled",workspaceId:i,version:null!==(I=null===(A=s)||void 0===A?void 0:A.version)&&void 0!==I?I:f,hasChanges:!0},t)),e.next=68;break;case 64:return e.next=66,(0,v.j6)();case 66:S=e.sent,n.sendMessage(new d.v(r,{kind:"success",workspaceId:i,version:null!==(C=null===(j=s)||void 0===j?void 0:j.version)&&void 0!==C?C:f,hasChanges:S},t));case 68:e.next=74;break;case 70:e.prev=70,e.t8=e.catch(0),(0,x.Nu)(e.t8)&&(0,x.fh)(n),n.sendMessage(new d.v(r,{kind:"failed",workspaceId:i},t));case 74:case"end":return e.stop()}}),e,null,[[0,70],[34,49,52,55]])})));return function(){return e.apply(this,arguments)}}()}}(e,n))}t(32789);t(64667),t(36684),t(12956);var Y=function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"registerMessageReceiveHandlers",value:function(){this.registerOnCancelTask(),this.registerOnCheckForWorkspaceChanges(),this.registerOnCreateAccount(),this.registerOnFetchUserAccount(),this.registerOnPersistThemeSettings(),this.registerOnPrepareWorkspace(),this.registerOnSignIn(),this.registerOnSignOut(),this.registerOnSynchronizeWorkspace()}},{key:"registerOnCancelTask",value:function(){this.registerReceiveMessageHandler("cancel-task",(function(e){return function(e){var n;null===(n=f.get(e))||void 0===n||n.cancel()}(e.payload.taskId)}))}},{key:"registerOnCheckForWorkspaceChanges",value:function(){this.registerReceiveMessageHandler("check-for-workspace-changes",q)}},{key:"registerOnCreateAccount",value:function(){this.registerReceiveMessageHandler("create-user-account",X)}},{key:"registerOnFetchUserAccount",value:function(){this.registerReceiveMessageHandler("fetch-user-account",W)}},{key:"registerOnPersistThemeSettings",value:function(){this.registerReceiveMessageHandler("persist-theme-settings",L)}},{key:"registerOnPrepareWorkspace",value:function(){this.registerReceiveMessageHandler("prepare-workspace",G)}},{key:"registerOnSignIn",value:function(){this.registerReceiveMessageHandler("sign-in-user",J)}},{key:"registerOnSignOut",value:function(){this.registerReceiveMessageHandler("sign-out-user",Q)}},{key:"registerOnSynchronizeWorkspace",value:function(){this.registerReceiveMessageHandler("synchronize-workspace",$)}}]),t}(u.Q);new Y},52982:function(e,n,t){t.d(n,{D:function(){return a},N:function(){return i}});var r=t(98090);function a(e){return e instanceof Error&&"AbortError"===e.name}function i(e){return e instanceof r.p$}},66567:function(e,n,t){t.d(n,{D_:function(){return a.D},G6:function(){return r.G6},H:function(){return o.H},Nu:function(){return a.N},Q4:function(){return i.Q},fh:function(){return o.fh},jk:function(){return u.jk}});var r=t(76038),a=t(52982),i=(t(649),t(83433)),o=t(49361),u=(t(2611),t(80810));t(47542)},49361:function(e,n,t){t.d(n,{H:function(){return i},fh:function(){return o}});var r,a=t(89932);function i(e,n,t,i){e.sendMessage(new a.v("log-entry",{tabId:t,level:r.error,message:n,details:i}))}function o(e){e.sendMessage(new a.v("user-session-expired",void 0))}!function(e){e[e.error=0]="error",e[e.warning=1]="warning",e[e.info=2]="info"}(r||(r={}))},80810:function(e,n,t){t.d(n,{aU:function(){return p},jk:function(){return c}});var r,a=t(15861),i=t(87757),o=t.n(i),u=t(996);t(98090);function c(){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)(o().mark((function e(){var n,t,a,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=r)||void 0===n){e.next=4;break}e.t0=n,e.next=7;break;case 4:return e.next=6,(0,u.cw)();case 6:e.t0=e.sent;case 7:if(!((r=e.t0)&&r.expiresAt<Date.now())){e.next=27;break}return t=new Headers,a=new URLSearchParams,t.append("Content-Type","application/x-www-form-urlencoded"),a.append("client_id","0910a943-9561-4b7c-8aaa-197c222c076c"),a.append("grant_type","refresh_token"),a.append("refresh_token",r.refreshToken),e.next=17,fetch("https://identity.chillicream.com/connect/token",{method:"POST",headers:t,body:a}).then((function(e){return e.json()}));case 17:if(!("access_token"in(i=e.sent))){e.next=24;break}c={idToken:i.id_token,accessToken:i.access_token,refreshToken:i.refresh_token,expiresAt:(new Date).getTime()+1e3*i.expires_in},(0,u.Sm)(c),r=c,e.next=27;break;case 24:return r=void 0,e.next=27,(0,u.Ke)();case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){void 0,r=void 0}},42860:function(e,n,t){t.d(n,{v:function(){return o}});var r=t(43144),a=t(15671),i=t(32789),o=(0,r.Z)((function e(n,t,r){(0,a.Z)(this,e),this.type=n,this.payload=t,this.id=void 0,this.createdAt=void 0,this.id=r||(0,i.Mc)(),this.createdAt=(0,i.zO)()}))},60114:function(e,n,t){t.d(n,{Q:function(){return p},v:function(){return s}});var r,a=t(15671),i=t(43144),o=t(60136),u=t(43668),c=t(89932),s={bcpAgent:function(){return r},sendMessage:function(e){return self.postMessage(e)}},p=function(e){(0,o.Z)(t,e);var n=(0,u.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=n.call(this)).context={sendMessage:function(e){return self.postMessage(e)}},e.initialize(),e}return(0,i.Z)(t,[{key:"getContext",value:function(){return this.context}},{key:"initialize",value:function(){var e=this;self.onmessage=function(n){var t=n.data;e.handleMessage(e.context,t)};var n=this.registerReceiveMessageHandler("initialize-scheduler",(function(e){r=e.payload.bcpAgent,n()}));this.registerMessageReceiveHandlers()}}]),t}(c.K)},24346:function(e,n,t){t.d(n,{N:function(){return a}});var r=t(89988);function a(){return(0,r.M)("dir")}},32789:function(e,n,t){function r(e){return e.filter((function(e,n,t){return t.indexOf(e)===n}))}t.d(n,{F5:function(){return p},A0:function(){return i.A},NN:function(){return o.N},js:function(){return a.j},Mc:function(){return u.M},I8:function(){return c.I},EB:function(){return r},ag:function(){return h.ag},zO:function(){return v}});var a=t(42917);var i=t(57096),o=t(24346),u=t(89988),c=t(7326),s=t(4147),p=(s.i8,navigator.userAgent.indexOf("Electron")>=0),d=s.ss,f=s.i8,l=p?"app":"middleware";(function(){if(navigator.userAgent.indexOf("Win")>=0)return"Windows";if(navigator.userAgent.indexOf("Mac")>=0)return"macOS";if(navigator.userAgent.indexOf("X11")>=0||navigator.userAgent.indexOf("Linux")>=0)return"Linux"})(),"".concat(d,"/").concat(f," (").concat(l,")");var h=t(28383);t(56686),t(89391);function v(){return Date.now()}}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var i=n[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,t.x=function(){var e=t.O(void 0,[502,338,738,268,400,498],(function(){return t(86471)}));return e=t.O(e)},function(){var e=[];t.O=function(n,r,a,i){if(!r){var o=1/0;for(p=0;p<e.length;p++){r=e[p][0],a=e[p][1],i=e[p][2];for(var u=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(t.O).every((function(e){return t.O[e](r[c])}))?r.splice(c--,1):(u=!1,i<o&&(o=i));if(u){e.splice(p--,1);var s=a();void 0!==s&&(n=s)}}return n}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[r,a,i]}}(),t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,r){return t.f[r](e,n),n}),[]))},t.u=function(e){return"static/js/"+e+"."+{268:"3eb1aaa1",338:"5d3af481",400:"a44ded47",498:"bacf030a",502:"42e91a67",738:"c7b92eac"}[e]+".chunk.js"},t.miniCssF=function(e){},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../../"}(),function(){var e={773:1};t.f.i=function(n,r){e[n]||importScripts(t.p+t.u(n))};var n=self.webpackChunkbanana_cake_pop=self.webpackChunkbanana_cake_pop||[],r=n.push.bind(n);n.push=function(n){var a=n[0],i=n[1],o=n[2];for(var u in i)t.o(i,u)&&(t.m[u]=i[u]);for(o&&o(t);a.length;)e[a.pop()]=1;r(n)}}(),function(){var e=t.x;t.x=function(){return Promise.all([502,338,738,268,400,498].map(t.e,t)).then(e)}}();t.x()}();