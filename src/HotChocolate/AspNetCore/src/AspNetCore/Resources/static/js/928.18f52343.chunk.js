"use strict";(self.webpackChunkbanana_cake_pop=self.webpackChunkbanana_cake_pop||[]).push([[928],{99928:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var r=t(26994),i=t(43203),u=t(55567),o=t(68224),c=t(85554),a=t(51146),s=t(15861),l=t(1413),d=t(87757),f=t.n(d),h=t(27330),v=t(48548),p=t(30832),m=t(65640),x=t(32884),S=t(42525),g=t(996),w=t(70097),j=t(32789),b=t(79646),k=t(92524),C=(t(22657),t(3337)),D=t(47313),E=t(7231),V=t(46417),z="schema-sdl",A=(0,D.memo)((function(e){var n=e.documentId,t=(0,c.v9)(x.Tk.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)})),r=function(e,n){var t=(0,h.Tx)(),r=(0,D.useRef)(C.editor.createModel("","graphql"));return r.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),(0,D.useEffect)((function(){null!==n&&void 0!==n&&n.exists?function(e){return F.apply(this,arguments)}(n.endpoint).then((function(e){r.current.setValue(e)})).catch((function(n){t.error(e,"Could not get SDL. Please reload the schema and try again.",(0,l.Z)({},n))})):r.current.setValue("")}),[e,t,r,n]),r.current}(n,t),i=function(e,n){var t=(0,m.Qn)(S.zw.selectActiveSchemaSdlEditorViewState),r=(0,h.t2)(),i=(0,D.useRef)(null),u=(0,m.Qn)(S.zw.selectActiveFocusedElement),a=(0,c.I0)(),s=(0,o.Nr)((function(n){var t,r=null!==(t=n.saveViewState())&&void 0!==t?t:void 0;a(S.zM.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:r}))}),250,[e,a]);return(0,D.useEffect)((function(){var o=i.current,c=(0,l.Z)((0,l.Z)({},p.Nt),{},{model:n,readOnly:!0}),d=C.editor.create(o,c);return window.setTimeout((function(){return d.render()}),500),r.register(z,d),(0,v.YT)(d),t&&d.restoreViewState(t),"schema-sdl-editor"===u&&d.focus(),d.onContextMenu((function(){return(0,E.L)(o)})),d.onDidChangeCursorPosition((function(){return s(d)})),d.onDidChangeCursorSelection((function(){return s(d)})),d.onDidScrollChange((function(){return s(d)})),d.onDidFocusEditorText((function(){a(S.zM.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),function(){r.unregister(z),d.dispose()}}),[e,r,u,t,n,a,s]),(0,o.Az)(z,i),i}(n,r);return w.api.schemaInfo=null!==t&&void 0!==t?t:null,(0,V.jsx)(u.Nf,{ref:i})}));function F(){return(F=(0,s.Z)(f().mark((function e(n){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.Y5)(n);case 2:if(!(t=e.sent)){e.next=6;break}return r=(0,b.t3)((0,k.Z)(t.result)).replace(/""""""/gi,""),e.abrupt("return",(0,j.e6)(r));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=t(29158),T=t(87373),y=function(e){var n=e.isFetchingSchema;return(0,V.jsxs)(u.x8,{children:[(0,V.jsx)(u.qF,{children:"Schema Definition"}),(0,V.jsx)(u.Jm,{}),(0,V.jsx)(I,{disabled:n})]})},I=function(e){var n=e.disabled,t=(0,h.t2)(),r=(0,c.v9)(x.Tk.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)}));return(0,V.jsx)(M.hU,{disabled:n||!r,tooltip:"Download as SDL",onClick:function(){var e,n;if(null!==r&&void 0!==r&&r.exists){var i=null===(e=t.get("schema-sdl"))||void 0===e||null===(n=e.getModel())||void 0===n?void 0:n.getValue();if(i){var u=new Blob([i],{type:"text/plain"});(0,v.lm)(u)}}},children:(0,V.jsx)(T.nM,{})})},N=function(){var e=(0,c.v9)(r.QN.selectActiveId),n=(0,o.LA)();return(0,V.jsx)(a.S,{children:(0,V.jsxs)(u.sg,{children:[(0,V.jsx)(y,{isFetchingSchema:n}),(0,V.jsx)(u.Q5,{}),n?(0,V.jsx)(i.N,{}):(0,V.jsx)(A,{documentId:e})]})})}}}]);