(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[11],{1091:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(368),a=Object(r.a)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function c(e,n){var t="object"===typeof n;return new Promise((function(r,c){var o,i=!1;e.subscribe({next:function(e){o=e,i=!0},error:c,complete:function(){i?r(o):t?r(n.defaultValue):c(new a)}})}))}},1232:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return fe}));var r=t(78),a=t(80),c=t.n(a),o=t(92),i=t(107),d=t(413),s=t(101),l=t(269),u=t(291),b=t(1),f=t(106);function j(e,n){var t;return e?n?n.expandable?n:null!==(t=n.parent)&&void 0!==t?t:e:e:void 0}function m(e){var n=Object(f.b)();return e.triggerCreate({name:"",expandable:!1,metadata:{id:n,kind:"document"}})}function O(e){var n=Object(f.c)();return e.triggerCreate({name:"",expandable:!0,metadata:{id:n,kind:"folder"}})}var p=t(2),x="root-menu",v=function(e){var n=e.documentId,t=e.workspaceId,r=Object(s.f)(x),a=Object(d.b)(),i=Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return n=r.item.treeModel,e.next=4,O(n);case 4:r.hide();case 5:case"end":return e.stop()}}),e)}))),[r]),f=Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return n=r.item.treeModel,e.next=4,m(n);case 4:r.hide();case 5:case"end":return e.stop()}}),e)}))),[r]),j=Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&(a({documentId:n,workspaceId:t}),r.hide());case 1:case"end":return e.stop()}}),e)}))),[r,n,t,a]);return Object(p.jsxs)(l.b,{id:x,children:[Object(p.jsx)(l.a,{onClick:f,children:"New document"}),Object(p.jsx)(l.a,{onClick:i,children:"New folder"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:j,children:"Add file"})]})};var h=t(212),k=t(108),w=t(129),C=t(297),I=t(241),g=t(208),E=t(123),y=t(132),T=t(163),H=t(138),F=t(173),N=t(139),M=t(128),S=t(143),R=t(97),D=t(1147),L=t(244),A=t(127),_=t(193),P=t(1091),B=t(788);var U=t(206),z="delete-node",J=function(e){var n=e.documentId,t=e.workspaceId,r=Object(R.b)(),a=Object(s.f)(z),d=Object(b.useCallback)((function(){null===a||void 0===a||a.hide()}),[a]),l=Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var o,d,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=17;break}d=a.item.node,l=d.metadata.id,u=d.metadata.kind,e.t0=u,e.next="document"===e.t0?7:"file"===e.t0?9:"folder"===e.t0?13:15;break;case 7:return r(k.a.deleteDocument({documentId:l})),e.abrupt("break",15);case 9:return e.next=11,Object(i.deleteFile)(l);case 11:return n&&s.e.filesUpdated(n,t),e.abrupt("break",15);case 13:return r(k.a.deleteFolder({folderId:l})),e.abrupt("break",15);case 15:(null!==(o=d.parent)&&void 0!==o?o:d.model).remove(d),a.hide();case 17:case"end":return e.stop()}}),e)}))),[a,n,t,r]);return Object(p.jsx)(U.a,{id:z,title:a?V(a.item.node):"",showConfirm:!0,confirmText:"Yes",onConfirm:l,showCancel:!0,cancelText:"No",onCancel:d,onClose:d,children:a&&Object(p.jsx)(q,{node:a.item.node})})};function K(){return Object(U.d)(z)}function V(e){switch(e.metadata.kind){case"document":return"Delete document";case"file":return"Delete file";case"folder":return"Delete folder"}}var q=function(e){var n=e.node,t=n.name;switch(n.metadata.kind){case"document":return Object(p.jsxs)(U.c,{children:["Do you really want to delete the document ",Object(p.jsx)("em",{children:t}),"?"]});case"file":return Object(p.jsxs)(U.c,{children:["Do you really want to delete the file ",Object(p.jsx)("em",{children:t}),"?"]});case"folder":return Object(p.jsxs)(U.c,{children:["Do you really want to delete the folder ",Object(p.jsx)("em",{children:t})," and all it's content?"]})}},Q=t(200),Y=t(26),G=t(207),W="replace-node",X=function(e){var n=e.workspaceId,t=Object(R.b)(),r=Object(s.f)(W),a=Object(b.useCallback)((function(){null===r||void 0===r||r.hide()}),[r]),c=Object(b.useCallback)((function(){if(r){var e=r.item,a=e.nodeId,c=e.nodeName,o=e.fromFolderId,i=e.toFolderId;t(h.a.moveAndReplaceNode({id:a,name:c,workspaceId:n,fromFolderId:o,toFolderId:i})),r.hide()}}),[r,n,t]);return Object(p.jsxs)(U.a,{id:W,title:"Replace document or folder",showConfirm:!0,confirmText:"Replace",onConfirm:c,showCancel:!0,cancelText:"Cancel",onCancel:a,onClose:a,children:[Object(p.jsxs)(U.c,{children:["A file or folder with the name ",Object(p.jsx)("em",{children:null===r||void 0===r?void 0:r.item.nodeName})," ","already exists in the destination folder. Do you want to replace it?"]}),Object(p.jsx)(U.b,{children:"This action is irreversible!"})]})};var Z="move-node",$=function(e){var n,t,r=e.workspaceId,a=Object(R.b)(),c=Object(s.f)(Z),o=Object(b.useState)(void 0),d=Object(Y.a)(o,2),l=d[0],u=d[1],f=Object(U.d)(W),j=Object(b.useCallback)((function(){null===c||void 0===c||c.hide(),u("")}),[c,u]),m=Object(b.useCallback)((function(){if(c){var e=c.item,n=e.nodeId,t=e.nodeName,o=e.fromFolderId;Object(i.isNameTaken)(null!==l&&void 0!==l?l:r,t).then((function(e){e?f({nodeId:n,nodeName:t,fromFolderId:o,toFolderId:l}):a(h.a.moveAndReplaceNode({id:n,name:t,workspaceId:r,fromFolderId:o,toFolderId:l}))})),c.hide(),u(void 0)}}),[c,l,r,a,f,u]),O=Object(b.useCallback)((function(e){u(e)}),[u]);return Object(p.jsx)(U.a,{id:Z,title:c?ee(c.item.nodeKind):"",showConfirm:!0,confirmText:"Move",onConfirm:m,showCancel:!0,cancelText:"Cancel",onCancel:j,onClose:j,children:Object(p.jsx)(ne,{id:null!==(n=null===c||void 0===c?void 0:c.item.nodeId)&&void 0!==n?n:"",name:null!==(t=null===c||void 0===c?void 0:c.item.nodeName)&&void 0!==t?t:"",workspaceId:r,fromFolderId:null===c||void 0===c?void 0:c.item.fromFolderId,onFolderChange:O,onPressEnter:m})})};function ee(e){switch(e){case"document":return"Move document";case"file":return"Move file";case"folder":return"Move folder"}}var ne=Object(b.memo)((function(e){var n=e.id,t=e.name,r=e.workspaceId,a=e.fromFolderId,c=e.onFolderChange,o=e.onPressEnter,d=Object(b.useState)([]),s=Object(Y.a)(d,2),l=s[0],u=s[1],f=Object(b.useCallback)((function(e){c(e.currentTarget.value||void 0)}),[c]),j=Object(b.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),o()}),[o]);return Object(b.useEffect)((function(){Object(i.getAllFolders)(r).then((function(e){var t;c(a||null===(t=e[0])||void 0===t?void 0:t.id),u(e.filter((function(e){return e.id!==n&&e.id!==a})).map((function(n){return{id:n.id,name:n.path.map((function(n){var t;return null===(t=e.find((function(e){return e.id===n})))||void 0===t?void 0:t.name})).join("/")}})))}))}),[a,n,r,c,u]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(U.c,{children:["Choose a new folder for ",Object(p.jsx)("em",{children:t})]}),Object(p.jsx)(G.b,{onSubmit:j,children:Object(p.jsxs)(G.c,{children:[Object(p.jsx)(G.e,{htmlFor:"folder",children:"Folder"}),Object(p.jsxs)(G.h,{id:"folder",onChange:f,children:[a&&Object(p.jsx)("option",{value:"",children:"/"}),l.map((function(e){var n=e.id,t=e.name;return Object(p.jsx)("option",{value:n,children:t},n)}))]})]})})]})}));function te(e){var n=Object(U.d)(Z),t=Object(s.f)(e);return Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var r,a,o,i,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(d=t.item.node,n({nodeId:null===(r=d.metadata)||void 0===r?void 0:r.id,nodeName:d.name,nodeKind:null===(a=d.metadata)||void 0===a?void 0:a.kind,fromFolderId:null===(o=d.parent)||void 0===o||null===(i=o.metadata)||void 0===i?void 0:i.id}),t.hide());case 1:case"end":return e.stop()}}),e)}))),[t,n])}function re(e){var n=Object(s.f)(e);return Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}if(t=n.item.node,!(r=j(t.model,t))){e.next=6;break}return e.next=6,O(r);case 6:n.hide();case 7:case"end":return e.stop()}}),e)}))),[n])}function ae(e){var n=Object(s.f)(e);return Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}if(t=n.item.node,!(r=j(t.model,t))){e.next=6;break}return e.next=6,m(r);case 6:n.hide();case 7:case"end":return e.stop()}}),e)}))),[n])}function ce(e){var n=Object(s.f)(e);return Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(n.item.node.triggerRename(),n.hide());case 1:case"end":return e.stop()}}),e)}))),[n])}function oe(e,n,t){var r=Object(s.f)(e),a=Object(d.b)();return Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&(o=r.item.node,i=j(o.model,o),a({documentId:n,workspaceId:t,parentId:i&&Object(T.g)(i)?i.metadata.id:void 0}),r.hide());case 1:case"end":return e.stop()}}),e)}))),[r,n,t,a])}var ie="document-menu",de=function(e){var n=e.documentId,t=e.workspaceId,r=Object(R.b)(),a=Object(Q.a)(ie),i=K(),d=te(ie),s=ae(ie),f=re(ie),j=ce(ie),m=oe(ie,n,t),O=Object(b.useCallback)(Object(o.a)(c.a.mark((function e(){var n,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&(t=a.item.node,r(k.a.cloneDocument({documentId:null===(n=t.metadata)||void 0===n?void 0:n.id})),a.hide());case 1:case"end":return e.stop()}}),e)}))),[a,r]),x=Object(b.useCallback)((function(){if(a){var e=a.item.node;i({node:e}),a.hide()}}),[a,i]);return Object(p.jsxs)(l.b,{id:ie,children:[Object(p.jsx)(l.a,{onClick:s,children:"New document"}),Object(p.jsx)(l.a,{onClick:f,children:"New folder"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:m,children:"Add file"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:j,children:"Rename"}),Object(p.jsx)(l.a,{onClick:d,children:"Move to"}),Object(p.jsx)(l.a,{onClick:O,children:"Clone"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:x,children:"Delete"})]})};var se="file-menu",le=function(e){var n=e.documentId,t=e.workspaceId,r=Object(Q.a)(se),a=K(),c=te(se),o=ae(se),i=re(se),d=ce(se),s=oe(se,n,t),f=Object(b.useCallback)((function(){if(r){var e=r.item.node;a({node:e}),r.hide()}}),[r,a]);return Object(p.jsxs)(l.b,{id:se,children:[Object(p.jsx)(l.a,{onClick:o,children:"New document"}),Object(p.jsx)(l.a,{onClick:i,children:"New folder"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:s,children:"Add file"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:d,children:"Rename"}),Object(p.jsx)(l.a,{onClick:c,children:"Move to"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:f,children:"Delete"})]})};var ue="folder-menu",be=function(e){var n=e.documentId,t=e.workspaceId,r=Object(Q.a)(ue),a=K(),c=te(ue),o=ae(ue),i=re(ue),d=ce(ue),s=oe(ue,n,t),f=Object(b.useCallback)((function(){if(r){var e=r.item.node;a({node:e}),r.hide()}}),[r,a]);return Object(p.jsxs)(l.b,{id:ue,children:[Object(p.jsx)(l.a,{onClick:o,children:"New document"}),Object(p.jsx)(l.a,{onClick:i,children:"New folder"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:s,children:"Add file"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:d,children:"Rename"}),Object(p.jsx)(l.a,{onClick:c,children:"Move to"}),Object(p.jsx)(u.a,{}),Object(p.jsx)(l.a,{onClick:f,children:"Delete"})]})};var fe=function(){var e=Object(R.b)(),n=Object(R.c)(k.c.selectActiveId),t=Object(R.c)(M.c.selectIsUserSignedIn),a=Object(R.c)(M.c.selectIsFetchingUser),d=Object(R.c)(S.c.selectActiveId),s=Object(N.b)(F.b.selectActiveNodeId),u=Object(N.c)(h.c.selectSearchTerm),f=Object(b.useRef)([]),U=Object(b.useRef)(),z=Object(l.c)(ie),K=Object(l.c)(se),V=Object(l.c)(ue),q=Object(l.c)(x),Q=Object(N.b)(h.c.selectExpandedFolders),Y=function(e,n){return{getNodes:function(t,r,a){return e?Object(P.a)(n.pipe(Object(D.a)(1),Object(B.a)((function(n){return Object(i.getChildrenByFilter)(e,null===r||void 0===r?void 0:r.metadata.id,a?function(e){return a({name:e})}:void 0).then((function(e){return function(e,n,t){return e.map((function(e){var r=e.id,a=e.name,c=e.kind;return{name:a,expanded:n.includes(r)||t,expandable:"folder"===c,metadata:{id:r,kind:c}}}))}(e,n,!!a)}))})))):Promise.resolve([])},comparer:function(e,n){return"folder"===e.metadata.kind&&"folder"===n.metadata.kind||"folder"!==e.metadata.kind&&"folder"!==n.metadata.kind?e.name.localeCompare(n.name,"en",{sensitivity:"base"}):"folder"===e.metadata.kind&&"folder"!==n.metadata.kind?-1:1},validate:function(n,t){return Object(o.a)(c.a.mark((function r(){var a,o,i,d;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(a=T.a.getSegments(n)).length){r.next=3;break}return r.abrupt("return",Promise.resolve(L.a.fail("An empty path is invalid.")));case 3:return o=t?t.metadata.id:null!==e&&void 0!==e?e:"",i=a[a.length-1],r.next=7,Object(A.t)(i,o);case 7:if("invalid"!==(d=r.sent)){r.next=11;break}return Object(_.f)(i),r.abrupt("return",Promise.resolve(L.a.fail("Invalid name.")));case 11:if("name-taken"!==d){r.next=14;break}return Object(_.e)(i),r.abrupt("return",Promise.resolve(L.a.fail('A document with name "'.concat(a[1],'" already exists.'))));case 14:return r.abrupt("return",Promise.resolve(L.a.success()));case 15:case"end":return r.stop()}}),r)})))()}}}(d,Q),G=Object(b.useCallback)((function(e,n){if(!n.metadata)throw new Error("Metadata should be there.");switch(n.metadata.kind){case"document":z(e,{node:n});break;case"file":K(e,{node:n});break;case"folder":V(e,{node:n})}}),[z,K,V]),W=Object(b.useCallback)((function(e){q(e,{treeModel:U.current})}),[q]),Z=Object(H.a)((function(n,t,r){switch(n.preventDefault(),n.stopPropagation(),t.selected||(Object(T.f)(t.model),t.selected=!0),t.metadata.kind){case"document":e(k.a.activateOrOpenDocument({documentId:t.metadata.id,isHistory:!1,isPreview:r}));break;case"file":e(F.a.activateNode({id:t.metadata.id}));break;case"folder":t.toggleExpanded(),e(F.a.activateNode({id:t.metadata.id}))}}),25,[e]),ee=function(e,n){return Z(e,n,!0)},ne=function(e,n){return Z(e,n,!1)},te=function(e){var n=s.subscribe(function(){var n=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ke(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t=e.subscribeFor(function(){var n=Object(o.a)(c.a.mark((function n(t){var a,o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=Object(r.a)(t),n.prev=1,a.s();case 3:if((o=a.n()).done){n.next=23;break}i=o.value,n.t0=i.kind,n.next="collapsed"===n.t0?8:"created"===n.t0?10:"expanded"===n.t0?13:"renamed"===n.t0?15:"reset-filter"===n.t0?17:"set-filter"===n.t0?19:21;break;case 8:return re(i.node),n.abrupt("break",21);case 10:return n.next=12,ae(i.node);case 12:return n.abrupt("break",21);case 13:return ce(i.node),n.abrupt("break",21);case 15:return oe(i.node),n.abrupt("break",21);case 17:case 19:return fe(e),n.abrupt("break",21);case 21:n.next=3;break;case 23:n.next=28;break;case 25:n.prev=25,n.t1=n.catch(1),a.e(n.t1);case 28:return n.prev=28,a.f(),n.finish(28);case 31:case"end":return n.stop()}}),n,null,[[1,25,28,31]])})));return function(e){return n.apply(this,arguments)}}(),"collapsed","created","expanded","renamed","reset-filter","set-filter");u&&u.length>0&&e.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(u.toLowerCase())})),f.current.push((function(){return n.unsubscribe()})),f.current.push((function(){return t()})),U.current=e},re=function(n){e(h.a.collapseFolder({folderId:n.metadata.id}))},ae=function(){var n=Object(o.a)(c.a.mark((function n(t){var r,a,o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"document"===t.metadata.kind?t.metadata.exists?(t.metadata.closeTabAfterCreation?e(k.a.saveAndCloseNewDocument({documentId:t.metadata.id,documentName:t.name,folderId:null===(r=t.parent)||void 0===r?void 0:r.metadata.id,isHistory:!1})):e(k.a.saveNewDocument({documentId:t.metadata.id,documentName:t.name,folderId:null===(a=t.parent)||void 0===a?void 0:a.metadata.id,isHistory:!1})),delete t.metadata.exists,delete t.metadata.closeTabAfterCreation):e(k.a.createAndSaveDocument({documentId:t.metadata.id,documentName:t.name,folderId:null===(o=t.parent)||void 0===o?void 0:o.metadata.id})):e(k.a.createFolder({folderId:t.metadata.id,folderName:t.name,parentFolderId:null===(i=t.parent)||void 0===i?void 0:i.metadata.id}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),ce=function(n){e(h.a.expandFolder({folderId:n.metadata.id}))},oe=function(){var n=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.metadata.kind,n.next="document"===n.t0?3:"file"===n.t0||"folder"===n.t0?5:8;break;case 3:return e(k.a.renameDocument({documentId:t.metadata.id,name:t.name})),n.abrupt("break",8);case 5:return n.next=7,Object(i.renameNode)(t.metadata.id,t.name);case 7:return n.abrupt("break",8);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),fe=function(e){s.pipe(Object(D.a)(1)).subscribe(function(){var n=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ke(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},me=function(){var e=Object(o.a)(c.a.mark((function e(){var n,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=j(U.current,null===(n=U.current)||void 0===n?void 0:n.selectedNodes[0]))){e.next=4;break}return e.next=4,m(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(o.a)(c.a.mark((function e(){var n,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=j(U.current,null===(n=U.current)||void 0===n?void 0:n.selectedNodes[0]))){e.next=4;break}return e.next=4,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var n=Object(o.a)(c.a.mark((function n(t){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(h.a.changeDocumentSearchTerm({searchTerm:t})),!U.current){n.next=9;break}if(!(t.length>0)){n.next=7;break}return n.next=5,U.current.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));case 5:n.next=9;break;case 7:return n.next=9,U.current.resetFilter();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),xe=function(){e(M.a.signIn())};function ve(e){return he.apply(this,arguments)}function he(){return(he=Object(o.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.selected||(Object(T.f)(n.model),n.selected=!0),e.next=3,n.ensureVisible();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,n){return we.apply(this,arguments)}function we(){return(we=Object(o.a)(c.a.mark((function e(n,t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(!(r=n.find((function(e){return e.metadata&&e.metadata.id&&e.metadata.id===t})))){e.next=7;break}return e.next=5,ve(r);case 5:e.next=8;break;case 7:Object(T.f)(n);case 8:e.next=11;break;case 10:Object(T.f)(n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.useEffect)((function(){var e=f.current;return function(){for(var n;n=e.pop();)n();U.current=void 0}}),[]),Object(p.jsxs)(y.a,{children:[Object(p.jsxs)(y.f,{children:[Object(p.jsx)(y.n,{children:"Documents"}),Object(p.jsx)(y.m,{}),Object(p.jsxs)(w.b,{children:[Object(p.jsx)(w.d,{disabled:!t,tooltip:"New document",onClick:me,children:Object(p.jsx)(E.H,{})}),Object(p.jsx)(w.d,{disabled:!t,tooltip:"New folder",onClick:Oe,children:Object(p.jsx)(E.I,{})})]})]}),Object(p.jsx)(y.e,{children:Object(p.jsx)(C.a,{searchTerm:u,onSearchTermChange:pe})}),a?Object(p.jsx)(I.a,{}):t?Object(p.jsxs)(y.c,{children:[Object(p.jsx)(T.c,{id:"documents",itemHeight:T.b,provider:Y,onContextMenu:W,onInitialized:te,children:function(e){return Object(p.jsx)(T.d,{id:e.id,depth:e.depth,name:e.name,path:e.path,expanded:e.expanded,expandable:e.expandable,node:e,onClick:ee,onDoubleClick:ne,onContextMenu:G,renderIcon:je})}}),Object(p.jsx)(de,{documentId:n,workspaceId:d}),Object(p.jsx)(le,{documentId:n,workspaceId:d}),Object(p.jsx)(be,{documentId:n,workspaceId:d}),Object(p.jsx)(v,{documentId:n,workspaceId:d}),Object(p.jsx)(J,{documentId:n,workspaceId:d}),Object(p.jsx)($,{workspaceId:d}),Object(p.jsx)(X,{workspaceId:d})]}):Object(p.jsx)(g.a,{title:"Sign in to save documents",icon:Object(p.jsx)(E.b,{}),children:Object(p.jsx)(w.a,{primary:!0,onClick:xe,children:"Sign in"})})]})};function je(e){switch(e.metadata.kind){case"file":return Object(p.jsx)(T.e,{colorSelector:function(e){return e.mediaIcon},children:Object(p.jsx)(E.t,{})});case"document":return Object(p.jsx)(T.e,{colorSelector:function(e){return e.documentIcon},children:"creation"===e.editMode?Object(p.jsx)(E.H,{}):Object(p.jsx)(E.s,{})});case"folder":return Object(p.jsx)(T.e,{colorSelector:function(e){return e.folderIcon},children:e.expanded?Object(p.jsx)(E.y,{}):"creation"===e.editMode?Object(p.jsx)(E.I,{}):Object(p.jsx)(E.x,{})});default:throw new Error("Unknown kind")}}},297:function(e,n,t){"use strict";t.d(n,"a",(function(){return m}));var r,a,c,o,i=t(4),d=t(138),s=t(1),l=t(3),u=t(6),b=t(129),f=t(123),j=t(2),m=Object(s.memo)(Object(s.forwardRef)((function(e,n){var t=e.searchTerm,r=e.onSearchTermChange,a=Object(s.useRef)(null),c=Object(s.useRef)(null),o=Object(d.a)((function(e){r(e.target.value.trim())}),250,[r]),i=Object(s.useCallback)((function(e){o(e),c.current.style.display=e.currentTarget.value.length>0?"flex":"none"}),[o]),l=Object(s.useCallback)((function(){var e;null===(e=a.current)||void 0===e||e.focus()}),[]);return Object(s.useEffect)((function(){var e=a.current,n=c.current;t&&t.length>0?(e.value=t,n.style.display="flex"):n.style.display="none"}),[t]),Object(j.jsx)(O,{ref:n,onClick:l,children:Object(j.jsxs)(v,{children:[Object(j.jsx)(p,{children:Object(j.jsx)(f.Q,{})}),Object(j.jsx)(x,{ref:a,placeholder:"Find...",onChange:i}),Object(j.jsx)(b.d,{innerRef:c,onClick:function(){r(""),a.current.value="",c.current.style.display="none"},children:Object(j.jsx)(f.l,{})})]})})}))),O=l.d.div(r||(r=Object(i.a)(["\n  z-index: 1;\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: row;\n  align-items: center;\n"]))),p=l.d.div(a||(a=Object(i.a)(["\n  display: flex;\n  flex: 0 0 24px;\n  align-items: center;\n  justify-content: center;\n  transition: fill 0.2s ease;\n\n  & > svg {\n    fill: "," !important;\n  }\n"])),u.THEME_COLORS.components.fieldText),x=l.d.input(c||(c=Object(i.a)(["\n  flex: 1 1 auto;\n  border: 0 none;\n  padding: 0 9px;\n  color: ",";\n  background-color: ",";\n  transition: background-color 0.2s ease, color 0.2s ease;\n  user-select: initial;\n\n  ::placeholder {\n    color: ",";\n    transition: color 0.2s ease;\n  }\n"])),u.THEME_COLORS.components.fieldText,u.THEME_COLORS.components.field,u.THEME_COLORS.components.fieldPlaceholder),v=l.d.div(o||(o=Object(i.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  border-radius: 8px;\n  border: 1px solid ",";\n  padding-left: 5px;\n  height: 28px;\n  background-color: ",";\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n  cursor: text;\n\n  &:focus-within,\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      background-color: ",";\n      color: ",";\n\n      ::placeholder {\n        color: ",";\n      }\n    }\n  }\n\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      color: ",";\n      background-color: ",";\n    }\n  }\n"])),u.THEME_COLORS.components.fieldBorder,u.THEME_COLORS.components.field,u.THEME_COLORS.components.fieldHoverBorder,u.THEME_COLORS.components.fieldHover,p,u.THEME_COLORS.components.fieldHoverText,x,u.THEME_COLORS.components.fieldHover,u.THEME_COLORS.components.fieldHoverText,u.THEME_COLORS.components.fieldHoverPlaceholder,u.THEME_COLORS.components.fieldHoverBorder,u.THEME_COLORS.components.fieldHover,p,u.THEME_COLORS.components.fieldHoverText,x,u.THEME_COLORS.components.fieldHoverText,u.THEME_COLORS.components.fieldHover)}}]);