(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[6],{179:function(e,n,t){"use strict";var r=t(261);t.o(r,"LogLevel")&&t.d(n,"LogLevel",(function(){return r.LogLevel}));var i=t(262);t.o(i,"LogLevel")&&t.d(n,"LogLevel",(function(){return i.LogLevel}));var a=t(263);t.o(a,"LogLevel")&&t.d(n,"LogLevel",(function(){return a.LogLevel}));var o=t(264);t.o(o,"LogLevel")&&t.d(n,"LogLevel",(function(){return o.LogLevel}));var s=t(265);t.o(s,"LogLevel")&&t.d(n,"LogLevel",(function(){return s.LogLevel}));var c=t(266);t.o(c,"LogLevel")&&t.d(n,"LogLevel",(function(){return c.LogLevel}));var u=t(267);t.d(n,"LogLevel",(function(){return u.a}));t(268),t(269),t(270),t(271),t(272),t(273),t(274)},261:function(e,n){},262:function(e,n){},263:function(e,n){},264:function(e,n){},265:function(e,n){},266:function(e,n){},267:function(e,n,t){"use strict";var r;t.d(n,"a",(function(){return r})),function(e){e[e.error=0]="error",e[e.warning=1]="warning",e[e.info=2]="info"}(r||(r={}))},268:function(e,n){},269:function(e,n){},270:function(e,n){},271:function(e,n){},272:function(e,n){},273:function(e,n){},274:function(e,n){},275:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(57);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a=function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"id",void 0),i(this,"type",void 0),i(this,"createdAt",void 0),i(this,"payload",void 0),this.id=n.id||Object(r.b)(),this.type=n.type,this.createdAt=n.createdAt||Object(r.e)(),this.payload=n.payload}},276:function(e,n){},277:function(e,n,t){"use strict";t(278),t(279),t(280),t(281),t(282),t(283),t(284),t(285),t(286),t(287),t(288),t(289),t(290),t(291)},278:function(e,n){},279:function(e,n){},280:function(e,n){},281:function(e,n){},282:function(e,n){},283:function(e,n){},284:function(e,n){},285:function(e,n){},286:function(e,n){},287:function(e,n){},288:function(e,n){},289:function(e,n){},290:function(e,n){},291:function(e,n){},370:function(e,n){},371:function(e,n){},57:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return s})),t.d(n,"d",(function(){return c})),t.d(n,"e",(function(){return d})),t.d(n,"c",(function(){return u}));var r=t(317),i=t.n(r);function a(){for(var e=new i.a,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.forEach((function(n){return e=e.update(n)})),e.digest("hex")}var o=t(258);function s(e){return e&&e.length>0?"".concat(e,"|").concat(Object(o.a)()):Object(o.a)()}function c(e){return"OperationDefinition"===e.kind}function u(e,n){if(e>n)throw new Error("'start' must be smaller than 'end'.");return n-e}function d(){return Date.now()}},58:function(e,n,t){"use strict";var r=t(275);t.d(n,"Message",(function(){return r.a}));t(276),t(277)},844:function(e,n,t){"use strict";t.r(n);var r=t(57),i=t(934),a=t(935),o=t(936),s=t(58),c=t(938),u=t(937),d=t(8),l=t.n(d);function p(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function f(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var v=[0,1,1,2,3,5,8,13,21,34],h=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.execute=n,m(this,"count",0),m(this,"running",!1),m(this,"timeout",void 0)}var n,t,r;return n=e,(t=[{key:"start",value:function(e){var n=this,t=function(){var r,i=(r=l.a.mark((function r(){var i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.running=!0,r.prev=1,r.next=4,n.execute(n.count++);case 4:if(!r.sent){r.next=7;break}n.stop(),e();case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.error(r.t0);case 12:n.running&&(n.count<10?(i=Math.floor(Math.random()*v[n.count]*250),n.timeout=self.setTimeout(t,i)):e());case 13:case"end":return r.stop()}}),r,null,[[1,9]])})),function(){var e=this,n=arguments;return new Promise((function(t,i){var a=r.apply(e,n);function o(e){p(a,t,i,o,s,"next",e)}function s(e){p(a,t,i,o,s,"throw",e)}o(void 0)}))});return function(){return i.apply(this,arguments)}}();t()}},{key:"stop",value:function(){this.running=!1,self.clearTimeout(this.timeout)}}])&&f(n.prototype,t),r&&f(n,r),e}();function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var w=new i.a({});function S(){Jn("document-cache-delete-item",(function(e,n){!function(e){w.next(b(b({},w.value),{},g({},e,void 0)))}(n.session.documentId)})),Jn("document-cache-set-item",(function(e,n){var t=e.payload;!function(e,n){w.next(b(b({},w.value),{},g({},e,n)))}(n.session.documentId,t)}))}function j(e){return Object(c.a)([e.select((function(e){return e.documentId})),w]).pipe(Object(a.a)((function(e){var n=k(e,2),t=n[0];return{documentId:t,document:n[1][t]}})),Object(o.a)(),Object(u.a)((function(e){var n=e.document,t=e.documentId;return!!n&&""!==t})),Object(a.a)((function(e){return function(e){var n=[];return e&&e.definitions.forEach((function(e){var t;Object(r.d)(e)&&(null===(t=e.name)||void 0===t?void 0:t.value)&&n.push({name:e.name.value,type:e.operation})})),n}(e.document)}))).subscribe((function(n){e.sendMessage(new s.Message({type:"document-operations-update",payload:n}))}))}function x(e){return w.value[e]}function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var E=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.port=n,P(this,"id",Object(r.b)("context")),P(this,"session$",new i.a({documentId:"",httpMethod:"POST",schemaEndpoint:""})),P(this,"subscriptions",[]),this.initialize()}var n,t,s;return n=e,(t=[{key:"dispose",value:function(){this.session$.complete(),this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"initialize",value:function(){var e=this;Jn("set-session",(function(n){var t=n.payload;e.session$.next(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){P(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},t))})),this.subscriptions.push(j(this))}},{key:"select",value:function(e){return this.session$.pipe(Object(a.a)(e),Object(o.a)())}},{key:"sendMessage",value:function(e){this.port.postMessage(e)}},{key:"session",get:function(){return this.session$.value}}])&&N(n.prototype,t),s&&N(n,s),e}();function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){M(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var D={};function L(){Jn("http-headers-cache-delete-item",(function(e,n){!function(e){D=I(I({},D),{},M({},e,void 0))}(n.session.documentId)})),Jn("http-headers-cache-set-item",(function(e,n){var t=e.payload;!function(e,n){D=I(I({},D),{},M({},e,n))}(n.session.documentId,t)}))}function V(e){return D[e]}var C=t(337),R=t(941),_=t(335);function q(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function G(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){q(a,r,i,o,s,"next",e)}function s(e){q(a,r,i,o,s,"throw",e)}o(void 0)}))}}function A(e){return Q.apply(this,arguments)}function Q(){return(Q=G(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return t=e.sent,e.next=5,t.get("schema",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,n){return B.apply(this,arguments)}function B(){return(B=G(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return r=e.sent,e.next=5,r.put("schema",t,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return Object(_.a)("bcp-schema",1,{upgrade:function(e){e.createObjectStore("document"),e.createObjectStore("schema")}})}function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){z(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function K(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function W(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){K(a,r,i,o,s,"next",e)}function s(e){K(a,r,i,o,s,"throw",e)}o(void 0)}))}}var X={};function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=W(l.a.mark((function e(n){var t,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.session.schemaEndpoint,!(r=X[t])){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,A(t);case 6:return(i=e.sent)&&te(n,t,i.schema,i.hash),e.abrupt("return",X[t]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,n){return ne.apply(this,arguments)}function ne(){return(ne=W(l.a.mark((function e(n,t){var i,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.session.schemaEndpoint,e.next=3,Y(n);case 3:if(a=e.sent,o=Object(r.a)(JSON.stringify(t)),a&&a.hash===o){e.next=9;break}return te(n,i,t,o),e.next=9,J(i,{hash:o,schema:t});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,n,t,r){var i=Object(R.a)(t);ce(e,{endpoint:n,exists:!0,hash:r,hasMutationType:!!i.getMutationType(),hasSubscriptionType:!!i.getSubscriptionType()}),X=H(H({},X),{},z({},n,{hash:r,schema:i}))}function re(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function ie(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){re(a,r,i,o,s,"next",e)}function s(e){re(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ae={"GraphQL: Validation":"validation","GraphQL: Deprecation":"deprecation","GraphQL: Syntax":"syntax"};function oe(){Jn("auto-suggestions",function(){var e=ie(l.a.mark((function e(n,t){var r,i,a,o,c,u,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.payload,a=i.content,o=i.cursor,c=n.type,e.next=3,Y(t);case 3:u=e.sent,d=[],u&&(p=Object(C.a)(u.schema,a,o),d=p.map((function(e){var n=e.label;return{label:n,kind:e.kind,detail:e.detail,documentation:e.documentation,insertText:n}}))),t.sendMessage(new s.Message({id:r,type:c,payload:d}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Jn("diagnostics",function(){var e=ie(l.a.mark((function e(n,t){var r,i,a,o,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.payload,a=n.type,e.next=3,Y(t);case 3:o=e.sent,c=Object(C.b)(i||"",o?o.schema:void 0),u=c.map((function(e){var n=e.message,t=e.range,r=e.severity,i=e.source;return{message:n,severity:r?se(r):1,source:i?ae[i]:void 0,startLineNumber:t.start.line+1,startColumn:t.start.character+1,endLineNumber:t.end.line+1,endColumn:t.end.character+1}})),t.sendMessage(new s.Message({id:r,type:a,payload:u}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Jn("hover-information",function(){var e=ie(l.a.mark((function e(n,t){var r,i,a,o,c,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.payload,a=i.content,o=i.cursor,c=n.type,e.next=3,Y(t);case 3:u=e.sent,d=void 0,u&&(d=Object(C.c)(u.schema,a,o)),t.sendMessage(new s.Message({id:r,type:c,payload:d}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function se(e){return[8,4,2,1][e-1]}function ce(e,n){e.sendMessage(new s.Message({type:"schema-update",payload:n}))}var ue=t(179);function de(e,n,t,r){var i=r||e.session.documentId;e.sendMessage(new s.Message({type:"log",payload:{tabId:i,level:ue.LogLevel.error,message:n,details:t}}))}function le(e,n,t,r){var i=r||e.session.documentId;e.sendMessage(new s.Message({type:"log",payload:{tabId:i,level:ue.LogLevel.info,message:n,details:t}}))}t(831);var pe=t(93);function fe(e){return(fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function he(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(t),!0).forEach((function(n){ye(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ye(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function be(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function ge(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){be(a,r,i,o,s,"next",e)}function s(e){be(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ke={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"introspection_phase_1"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"schema"},name:{kind:"Name",value:"__type"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"StringValue",value:"__Schema",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"directive"},name:{kind:"Name",value:"__type"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"StringValue",value:"__Directive",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:199,source:{body:'query introspection_phase_1 {\n  schema: __type(name: "__Schema") {\n    name\n    fields {\n      name\n    }\n  }\n\n  directive: __type(name: "__Directive") {\n    name\n    fields {\n      name\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}};function Oe(e,n,t){return we.apply(this,arguments)}function we(){return(we=ge(l.a.mark((function e(n,t,r){var i,a,o,s,c,u,d,p,f,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(n,t,r);case 2:if(i=e.sent,a=i.response,o=a.isMultipart,(s=a.responseOrError)instanceof Response){e.next=6;break}return e.abrupt("return",{isMultipart:o,request:i.request,response:{error:s}});case 6:if(!o){e.next=9;break}return c=Se({},s),e.abrupt("return",{isMultipart:o,request:i.request,response:c});case 9:return e.next=11,De(s);case 11:if(u=e.sent,d=u.data,!(p=u.error)){e.next=17;break}return f=je(p,s),e.abrupt("return",{isMultipart:o,request:i.request,response:f});case 17:return m=Se(d,s),e.abrupt("return",{isMultipart:o,request:i.request,response:m});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,n){return{parsedBody:e,headers:xe(n.headers),statusCode:n.status,statusText:n.statusText}}function je(e,n){return{error:e,headers:xe(n.headers),statusCode:n.status,statusText:n.statusText}}function xe(e){var n=Object.create(null);return e.forEach((function(e,t){n[t]=e})),n}function Te(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=ge(l.a.mark((function e(n){var t,r,i,a,o,s,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(n,{query:ke,variables:{},operationName:"introspection_phase_1"});case 2:if(t=e.sent,(r=t.response.responseOrError)instanceof Response){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,De(r);case 8:if(!(i=e.sent).error){e.next=11;break}return e.abrupt("return",i.error);case 11:return a=qe(i.data.data),o=Re(a),e.next=15,Pe(n,{query:o,variables:{},operationName:"introspection_phase_2"});case 15:if(s=e.sent,(c=s.response.responseOrError)instanceof Response){e.next=19;break}return e.abrupt("return",c);case 19:return e.next=21,De(c);case 21:if(!(u=e.sent).error){e.next=24;break}return e.abrupt("return",u.error);case 24:return e.abrupt("return",u.data.data);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,n,t){var r=e.credentials||"omit",i=n.extensions,a=n.operationName,o=n.variables,s={cache:"no-cache",credentials:r,referrerPolicy:"no-referrer"};if(e.useGET){var c=function(e,n){var t=[],r=function(e,n){t.push("".concat(e,"=").concat(encodeURIComponent(n)))};n.query&&r("query",Object(pe.print)(n.query));n.operationName&&r("operationName",n.operationName);n.variables&&r("variables",JSON.stringify(n.variables));n.extensions&&r("extensions",JSON.stringify(n.extensions));var i="",a=e,o=e.indexOf("#");-1!==o&&(i=e.substr(o),a=e.substr(0,o));var s=-1===a.indexOf("?")?"?":"&";return a+s+t.join("&")+i}(e.uri,n),u=he(he({},s),{},{method:"GET",headers:e.headers});return self.fetch(c,u).catch(Fe).then((function(e){return Ie(e,t)})).then((function(n){return Ee(c,"GET",n,e.headers,u.credentials)}))}var d={extensions:i,operationName:a,query:Object(pe.print)(n.query),variables:o},l=JSON.stringify(d),p=he(he({},e.headers),{},{"Content-Type":"application/json"}),f=he(he({},s),{},{method:"POST",headers:p,body:l});return self.fetch(e.uri,f).catch(Fe).then((function(e){return Ie(e,t)})).then((function(n){return Ee(e.uri,"POST",n,p,f.credentials,d)}))}function Ee(e,n,t,r,i,a){return{request:{uri:e,cache:"no-cache",credentials:i,headers:r,method:n,referrerPolicy:"no-referrer",body:a},response:t}}function Fe(e){return e instanceof TypeError?Ve("Server Not Reachable",e.message):Ve("Server Not Reachable")}function Ie(e,n){var t=!1;if(e instanceof Response&&e.ok&&!e.bodyUsed&&e.headers&&n){var r=e.headers.get("Content-Type")||"";if(~r.indexOf("multipart/mixed"))t=!0,function(e,n,t){var r=e.body.getReader(),i=new TextDecoder;new Me(n,t).startReading(r,i,e)}(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="boundary=",t=e.indexOf(n);return~t?e.substring(t+n.length).trim().replace(/['"]/g,""):"-"}(r),n)}return{isMultipart:t,responseOrError:e}}var Me=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.boundary=n,this.observable=t,ye(this,"actualValue",""),ye(this,"contentEnd",void 0),ye(this,"crlf","\r\n"),ye(this,"delimiter",void 0),ye(this,"headers",{contentType:""}),ye(this,"partCount",0),ye(this,"position",0),ye(this,"receivedTerminator",!1),ye(this,"state","delimiter"),ye(this,"terminator",void 0),this.contentEnd="".concat(this.crlf).concat(this.crlf),this.delimiter="--".concat(this.boundary).concat(this.crlf),this.terminator="--".concat(this.boundary,"--").concat(this.crlf)}var n,t,r;return n=e,(t=[{key:"startReading",value:function(e,n,t){var r=this,i=function(){var a=ge(l.a.mark((function a(o){var s,c,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=o.value,!o.done&&!r.receivedTerminator){a.next=5;break}r.observable.onComplete(r.partCount),a.next=9;break;case 5:c="";try{c=n.decode(s),r.readBuffer(c)}catch(d){u=Ce(t,d,""),r.observable.onError(u)}return a.next=9,e.read().then(i);case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return e.read().then(i)}},{key:"readBuffer",value:function(e){for(;e.length>this.position&&!this.receivedTerminator;)switch(this.state){case"delimiter":this.readDelimiterOrTerminator(e);break;case"headers":this.readHeaders(e);break;case"content":this.readContent(e)}this.position=0}},{key:"readDelimiterOrTerminator",value:function(e){if(this.actualValue===this.delimiter)this.state="headers",this.partCount++;else if(this.actualValue===this.terminator)this.receivedTerminator=!0;else{if(this.terminator[this.actualValue.length]===e[this.position])return void(this.actualValue+=e[this.position++]);if(this.delimiter[this.actualValue.length]===e[this.position])return void(this.actualValue+=e[this.position++])}this.actualValue=""}},{key:"readHeaders",value:function(e){if(this.actualValue===this.crlf)if(""===this.headers.contentType){var n=Le(new Error("Invalid MultiPart Response, no content-type header"),this.actualValue,e,this.position);this.observable.onError(n,this.partCount-1),this.state="delimiter",this.headers={contentType:""}}else this.state="content";else{if(!this.actualValue.endsWith(this.crlf))return void(this.actualValue+=e[this.position++]);try{this.parseHeader()}catch(r){var t=Le(r,this.actualValue,e,this.position);this.observable.onError(t,this.partCount-1),this.state="delimiter",this.headers={contentType:""}}}this.actualValue=""}},{key:"readContent",value:function(e){if(this.actualValue.endsWith(this.contentEnd))try{var n=JSON.parse(this.actualValue);this.observable.onNext({content:n,headers:this.headers},this.partCount-1)}catch(r){var t=Le(r,this.actualValue,e,this.position);this.observable.onError(t,this.partCount-1)}finally{this.state="delimiter",this.headers={contentType:""},this.actualValue=""}else this.actualValue+=e[this.position++]}},{key:"parseHeader",value:function(){this.parseMultipartPartContentType()}},{key:"parseMultipartPartContentType",value:function(){if(-1!==this.actualValue.toLowerCase().indexOf("content-type:")){var e=this.actualValue.split(":");if(2!==e.length)throw new Error("Invalid MultiPart Response, could not parse content-type");if(this.headers.contentType=e[1].trim(),-1===this.headers.contentType.toLowerCase().indexOf("application/json; charset=utf-8"))throw new Error("Invalid content type");return!0}return!1}}])&&me(n.prototype,t),r&&me(n,r),e}();function De(e){return e.text().then((function(n){try{var t=JSON.parse(n);return"object"===fe(t)&&(t.data||t.errors)?{data:t}:{error:function(e,n,t){var r=e.status,i=e.statusText;return{message:t,name:"ServerError",statusCode:r,statusText:i,bodyText:n}}(e,n,"Response not successful: Received status code ".concat(e.status))}}catch(r){return{error:Ce(e,r,n)}}}))}function Le(e,n,t,r){return he(he({},e),{},{name:"MultipartParseError",actualValue:n,chunk:t,position:r})}function Ve(e,n){return{message:e,name:"ServerNetworkError",statusText:n}}function Ce(e,n,t){var r=e.status,i=e.statusText;return he(he({},n),{},{name:"ServerParseError",statusCode:r,statusText:i,bodyText:t})}function Re(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"introspection_phase_2"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__schema"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mutationType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"types"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FullType"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"directives"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"args"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InputValue"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FullType"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"__Type"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fields"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDeprecated"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"args"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InputValue"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TypeRef"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isDeprecated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deprecationReason"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"inputFields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InputValue"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interfaces"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TypeRef"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"enumValues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"includeDeprecated"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDeprecated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deprecationReason"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"possibleTypes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TypeRef"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"InputValue"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"__InputValue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TypeRef"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"defaultValue"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TypeRef"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"__Type"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ofType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ofType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ofType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ofType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ofType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1138,source:{body:"query introspection_phase_2 {\n  __schema {\n    queryType {\n      name\n    }\n    mutationType {\n      name\n    }\n    subscriptionType {\n      name\n    }\n    types {\n      ...FullType\n    }\n    directives {\n      name\n      description\n      args {\n        ...InputValue\n      }\n    }\n  }\n}\n\nfragment FullType on __Type {\n  kind\n  name\n  description\n  fields(includeDeprecated: true) {\n    name\n    description\n    args {\n      ...InputValue\n    }\n    type {\n      ...TypeRef\n    }\n    isDeprecated\n    deprecationReason\n  }\n  inputFields {\n    ...InputValue\n  }\n  interfaces {\n    ...TypeRef\n  }\n  enumValues(includeDeprecated: true) {\n    name\n    description\n    isDeprecated\n    deprecationReason\n  }\n  possibleTypes {\n    ...TypeRef\n  }\n}\n\nfragment InputValue on __InputValue {\n  name\n  description\n  type {\n    ...TypeRef\n  }\n  defaultValue\n}\n\nfragment TypeRef on __Type {\n  kind\n  name\n  ofType {\n    kind\n    name\n    ofType {\n      kind\n      name\n      ofType {\n        kind\n        name\n        ofType {\n          kind\n          name\n          ofType {\n            kind\n            name\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},t=n.definitions.find((function(e){return"OperationDefinition"===e.kind})).selectionSet.selections.find((function(e){return"Field"===e.kind}));return function(e,n){var t=[];e.selectionSet.selections.forEach((function(e){return t.push(e)})),n.isRepeatable&&t.push(_e("isRepeatable"));n.locations?t.push(_e("locations")):(t.push(_e("onField")),t.push(_e("onFragment")),t.push(_e("onOperation")));e.selectionSet.selections=t}(t.selectionSet.selections.find((function(e){return"Field"===e.kind&&"directives"===e.name.value})),e),function(e,n){if(!n.subscription){var t=[];e.selectionSet.selections.forEach((function(e){"Field"===e.kind&&"subscriptionType"===e.name.value||t.push(e)})),e.selectionSet.selections=t}}(t,e),n}function _e(e){return{kind:"Field",name:{kind:"Name",value:e},directives:[],arguments:[]}}function qe(e){var n=e.directive;return{isRepeatable:!!n.fields.find((function(e){return"isRepeatable"===e.name})),locations:!!n.fields.find((function(e){return"locations"===e.name})),subscription:!!e.schema.fields.find((function(e){return"subscriptionType"===e.name}))}}function Ge(e,n,t,r,i){e.sendMessage(new s.Message({type:"new-history-item",payload:{documentId:n,operationFailed:t,operationName:i,operationType:r}}))}function Ae(e,n,t){e.sendMessage(new s.Message({type:"new-result",payload:{documentId:n,result:t}}))}function Qe(e,n,t,r){e.sendMessage(new s.Message({type:"new-result-patch",payload:{documentId:n,resultId:t,patch:r}}))}function Je(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Je(Object(t),!0).forEach((function(n){$e(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Je(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function $e(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ue={};function He(){Jn("variables-cache-delete-item",(function(e){!function(e){Ue=Be(Be({},Ue),{},$e({},e,void 0))}(e.payload.documentId)})),Jn("variables-cache-set-item",(function(e){var n=e.payload;!function(e,n){Ue=Be(Be({},Ue),{},$e({},e,n))}(n.documentId,n.variables)}))}function ze(e){return Ue[e]}function Ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ke(Object(t),!0).forEach((function(n){Ze(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Xe(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function Ye(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var en=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Ze(this,"runningOperations",{})}var n,t,i;return n=e,(t=[{key:"isExecuting",value:function(e){return!!this.runningOperations[e.session.documentId]}},{key:"cancel",value:function(e){var n=e.session.documentId,t=this.runningOperations[n];t&&(this.stop(e,n),le(e,t.operationName?"Cancelled ".concat(t.operationType,' operation "').concat(t.operationName,'".'):"Cancelled ".concat(t.operationType," operation.")))}},{key:"execute",value:function(e,n,t){var r=e.session;if(!this.runningOperations[r.documentId]&&r&&r.schemaEndpoint.length>0){var i=r.documentId,a=V(i)||{};this.executeCore(e,{documentId:i,httpOptions:{headers:a,uri:r.schemaEndpoint,useGET:"GET"===r.httpMethod,credentials:r.credentials},operationName:t},n)}}},{key:"executeCore",value:function(){var e,n=(e=l.a.mark((function e(n,t,i){var a,o,c,u,d,p,f,m,v,h,y,b,g,k,O,w,S,j=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.httpOptions,o=t.documentId,c=t.operationName,!(u=x(o))){e.next=22;break}return p=Object(r.e)(),f=ze(o)||{},this.runningOperations=We(We({},this.runningOperations),{},Ze({},o,{operationName:c,operationType:i})),n.sendMessage(new s.Message({type:"operation-execution",payload:{documentId:o,isExecuting:!0,isSubscription:!1}})),le(n,c?"Starting ".concat(i,' operation "').concat(c,'".'):"Starting ".concat(i," operation."),void 0,o),m=Object(r.b)(),v="query"===i?"Query":"Mutation",h=c?'"'.concat(c,'" '):"",e.next=13,Oe(a,{operationName:c,query:u,variables:f},{onComplete:function(e){le(n,"Patch completed (".concat(e," patches received)."),void 0,o),j.stop(n,o)},onError:function(e,t){Qe(n,o,m,{payload:e,success:!1,timestamp:Object(r.e)()}),de(n,t?"Patch ".concat(t," failed."):"Multipart error.",e,o)},onNext:function(e,t){Qe(n,o,m,{payload:e.content,success:!0,timestamp:Object(r.e)()}),le(n,"Received patch ".concat(t,"."),e,o)}});case 13:y=e.sent,b=Object(r.e)(),g=y.response,k=g.parsedBody,O=g.error,w=!!O||!!(null===(d=k.errors)||void 0===d?void 0:d.length)||!1,Ge(n,o,w,i,c),Ae(n,o,{id:m,payload:y,duration:Object(r.c)(p,b),operationName:c,operationType:i,success:!w,timestamp:p}),S="".concat(v," operation ").concat(h),w?de(n,"".concat(S," failed."),O||k.errors,o):le(n,"".concat(S," succeeded."),void 0,o),y.isMultipart||this.stop(n,o);case 22:case"end":return e.stop()}}),e,this)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Xe(a,r,i,o,s,"next",e)}function s(e){Xe(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}()},{key:"stop",value:function(e,n){this.runningOperations=We(We({},this.runningOperations),{},Ze({},n,void 0)),e.sendMessage(new s.Message({type:"operation-execution",payload:{documentId:n,isExecuting:!1,isSubscription:!1}}))}}])&&Ye(n.prototype,t),i&&Ye(n,i),e}(),nn=t(401);function tn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function rn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tn(Object(t),!0).forEach((function(n){on(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function an(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var sn=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),on(this,"runningSubscriptions",{})}var n,t,i;return n=e,i=[{key:"getSchemaEndpoint",value:function(e){return!e.subscriptionEndpoint&&e.schemaEndpoint?e.schemaEndpoint.replace(/^http/i,"ws"):e.subscriptionEndpoint||""}}],(t=[{key:"isExecuting",value:function(e){return!!this.runningSubscriptions[e.session.documentId]}},{key:"cancel",value:function(e){var n=e.session;if(n){var t=this.runningSubscriptions[n.documentId];if(t){var r=t.operationName,i=t.unsubscribe;le(e,r?'Cancelled subscription operation "'.concat(r,'".'):"Cancelled subscription operation.",void 0,n.documentId),i(),this.runningSubscriptions=rn(rn({},this.runningSubscriptions),{},on({},n.documentId,void 0)),e.sendMessage(new s.Message({type:"operation-execution",payload:{documentId:n.documentId,isExecuting:!1,isSubscription:!1}}))}}}},{key:"execute",value:function(n,t,r){var i=n.session;if(i&&!this.runningSubscriptions[i.documentId]){var a=V(i.documentId)||{},o=e.getSchemaEndpoint(i);o.length&&this.executeCore(n,{documentId:i.documentId,httpOptions:{headers:a,uri:o,useGET:"GET"===i.httpMethod,credentials:i.credentials},operationName:r},t)}}},{key:"executeCore",value:function(e,n,t){var i=this,a=n.documentId,o=n.httpOptions,c=n.operationName,u=x(a);if(u){le(e,c?'Subscribing to subscription "'.concat(c,'".'):"Subscribing to subscription.",void 0,a);var d=ze(a)||{},l=new nn.SubscriptionClient(o.uri,{lazy:!0});l.onConnected((function(){i.runningSubscriptions=rn(rn({},i.runningSubscriptions),{},on({},a,p)),e.sendMessage(new s.Message({type:"operation-execution",payload:{documentId:a,isExecuting:!0,isSubscription:!0}})),Ge(e,a,!1,t,c)})),l.onError((function(n){de(e,c?'Subscribing to subscription "'.concat(c,'" failed.'):"Subscribing to subscription failed.",n,a),Ge(e,a,!0,t,c)}));var p=l.request({operationName:c,query:u,variables:d}).subscribe({next:function(n){var i=n&&n.errors&&n.errors.length>0||!1;i?de(e,"New subscription result arrived.",n.errors,a):le(e,"New subscription result arrived.",void 0,a),Ae(e,a,{id:Object(r.b)(),payload:{raw:n},duration:0,operationName:c,operationType:t,success:!i,timestamp:Object(r.e)()})},error:function(n){de(e,"A subscription result ended up in an error.",n,a),Ae(e,a,{id:Object(r.b)(),payload:{error:n},duration:0,operationName:c,operationType:t,success:!1,timestamp:Object(r.e)()})},complete:function(){le(e,c?'Unsubscribing from subscription "'.concat(c,'".'):"Unsubscribing from subscription.",void 0,a)}})}}}])&&an(n.prototype,t),i&&an(n,i),e}(),cn=new en,un=new sn,dn=new Map([["query",cn],["mutation",cn],["subscription",un]]);function ln(){Jn("cancel-operation-execution",(function(e,n){!function(e){cn.isExecuting(e)&&cn.cancel(e),un.isExecuting(e)&&un.cancel(e)}(n)})),Jn("begin-operation-execution",(function(e,n){!function(e,n){if(!cn.isExecuting(e)&&!un.isExecuting(e)){var t=x(e.session.documentId);if(t){var r=function(e,n){var t=e.definitions.map((function(e){return e})).filter((function(e){return!!e})),r=1===t.length?t[0]:t.find((function(e){return e.name&&e.name.value===n||!1}));return r?r.operation:"query"}(t,n),i=dn.get(r);i&&i.execute(e,r,n)}}}(n,e.payload.operationName)}))}var pn=t(22);function fn(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function mn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){fn(a,r,i,o,s,"next",e)}function s(e){fn(a,r,i,o,s,"throw",e)}o(void 0)}))}}function vn(){Jn("fetch-schema-field-type",function(){var e=mn(l.a.mark((function e(n,t){var r,i,a,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.payload,a=n.type,e.next=3,Y(t);case 3:o=e.sent,c=void 0,o&&(c=hn(o.schema,i.typeName,i.fieldName)),t.sendMessage(new s.Message({id:r,type:a,payload:c}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Jn("fetch-schema-field-types",function(){var e=mn(l.a.mark((function e(n,t){var r,i,a,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.payload,a=n.type,e.next=3,Y(t);case 3:o=e.sent,c=void 0,o&&(c=yn(o.schema,i)),t.sendMessage(new s.Message({id:r,type:a,payload:c}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Jn("fetch-schema-type",function(){var e=mn(l.a.mark((function e(n,t){var r,i,a,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.payload,a=n.type,e.next=3,Y(t);case 3:o=e.sent,c=void 0,o&&(c=gn(o.schema,i)),t.sendMessage(new s.Message({id:r,type:a,payload:c}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Jn("fetch-schema-types",function(){var e=mn(l.a.mark((function e(n,t){var r,i,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.type,e.next=3,Y(t);case 3:a=e.sent,o=void 0,a&&(o=bn(a.schema)),t.sendMessage(new s.Message({id:r,type:i,payload:o}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}function hn(e,n,t){var r=e.getType(n);if(r)return function(e,n,t){if(n instanceof pn.b){var r=n.getFields()[t];if(r)return{id:"".concat(n.name,"-").concat(r.name),name:r.name,kind:"field",description:r.description||void 0,valueType:wn(e,r.type),defaultValue:r.defaultValue}}else if(n instanceof pn.c||n instanceof pn.f){var i=n.getFields()[t];if(i){var a=0===i.args.length?void 0:i.args.map((function(t){var r=wn(e,t.type);return{id:"".concat(n.name,"-").concat(i.name,"-").concat(t.name),name:t.name,kind:"argument",description:t.description||void 0,defaultValue:t.defaultValue||void 0,type:r}}));return{id:"".concat(n.name,"-").concat(i.name),name:i.name,kind:"field",description:i.description||void 0,arguments:a,valueType:wn(e,i.type),isDeprecated:i.isDeprecated,deprecationReason:i.deprecationReason||void 0}}}return}(e,r,t)}function yn(e,n){var t=e.getType(n);if(t)return function(e,n){var t=[];if(n instanceof pn.b){var r=n.getFields();for(var i in r){var a=r[i];t.push({id:"".concat(n.name,"-").concat(a.name),name:a.name,kind:"field",description:a.description||void 0,valueType:wn(e,a.type),defaultValue:a.defaultValue})}}else if(n instanceof pn.c||n instanceof pn.f){var o=n.getFields(),s=function(r){var i=o[r],a=0===i.args.length?void 0:i.args.map((function(t){var r=wn(e,t.type);return{id:"".concat(n.name,"-").concat(i.name,"-").concat(t.name),name:t.name,kind:"argument",description:t.description||void 0,defaultValue:t.defaultValue||void 0,type:r}}));t.push({id:"".concat(n.name,"-").concat(i.name),name:i.name,kind:"field",description:i.description||void 0,arguments:a,valueType:wn(e,i.type),isDeprecated:i.isDeprecated,deprecationReason:i.deprecationReason||void 0})};for(var c in o)s(c)}return t}(e,t)}function bn(e){var n=[],t=e.getQueryType(),r=e.getMutationType(),i=e.getSubscriptionType();return t&&n.push(On(e,t)),r&&n.push(On(e,r)),i&&n.push(On(e,i)),0===n.length?void 0:n}function gn(e,n){var t=e.getType(n);if(t)return On(e,t)}function kn(e){return e instanceof pn.a?"enum":e instanceof pn.b?"input-object":e instanceof pn.c?"interface":e instanceof pn.g?"scalar":e instanceof pn.h?"union":e instanceof pn.d||e instanceof pn.e?kn(e.ofType):"object"}function On(e,n){var t,r,i;return n instanceof pn.a&&(t=n.getValues().map((function(e){return{id:"".concat(n.name,"-").concat(e.name),name:e.name,kind:"enum-value",description:e.description||void 0,value:e.value,isDeprecated:e.isDeprecated,deprecationReason:e.deprecationReason||void 0}}))),n instanceof pn.c&&(i=e.getPossibleTypes(n).map((function(n){return wn(e,n)}))),n instanceof pn.f&&(r=n.getInterfaces().map((function(e){return{id:e.name,name:e.name,kind:"type",description:e.description||void 0,typeKind:"interface"}}))),n instanceof pn.h&&(i=n.getTypes().map((function(n){return wn(e,n)}))),{id:n.name,name:n.name,kind:"type",description:n.description||void 0,typeKind:kn(n),enumValues:t,interfaces:r,types:i}}function wn(e,n){var t,r=!1,i=!0;return n instanceof pn.e?(i=!1,n.ofType instanceof pn.d?(t=n.ofType.ofType,r=!0):t=n.ofType):n instanceof pn.d?(t=n.ofType,r=!0):t=n,{kind:"value-type",isList:r,isOptional:i,type:t instanceof pn.d||t instanceof pn.e?wn(e,t):On(e,t)}}function Sn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function jn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Sn(Object(t),!0).forEach((function(n){xn(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function xn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Tn(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function Nn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Tn(a,r,i,o,s,"next",e)}function s(e){Tn(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Pn=new Map;function En(){Jn("cancel-schema-fetching",(function(e,n){!function(e){var n=Pn.get(e.id);(null===n||void 0===n?void 0:n.running)&&(n.backoff&&le(e,"Cancelled schema fetching.",void 0,n.currentId),n.timeout&&le(e,"Cancelled schema polling.",void 0,n.currentId),qn(e))}(n)})),Jn("fetch-schema",(function(e,n){!function(e){Fn.apply(this,arguments)}(n)})),Jn("refetch-schema",(function(e,n){!function(e){if(!Dn(e.id).running){var n=e.session;if(n.schemaEndpoint.length>0&&!n.enableSchemaPolling){var t={headers:V(n.documentId)||{},uri:n.schemaEndpoint,useGETForQueries:"GET"===n.httpMethod,credentials:n.credentials};Cn(e.id,{running:!0}),le(e,"Reload schema."),Rn(e,t)}}}(n)}))}function Fn(){return(Fn=Nn(l.a.mark((function e(n){var t,r,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dn(n.id).running){e.next=14;break}if(!((t=n.session).schemaEndpoint.length>0)){e.next=13;break}return r=V(t.documentId)||{},i={headers:r,uri:t.schemaEndpoint,useGETForQueries:"GET"===t.httpMethod,credentials:t.credentials},e.next=8,Y(n);case 8:(a=e.sent)&&(ce(n,{endpoint:t.schemaEndpoint,exists:!0,hash:a.hash,hasMutationType:!!a.schema.getMutationType(),hasSubscriptionType:!!a.schema.getSubscriptionType()}),le(n,"Fetched schema from cache.")),t.enableSchemaPolling?(Cn(n.id,{running:!0}),le(n,"Started schema polling."),_n(n,i,t.schemaPollingInterval||2e4)):a||(Cn(n.id,{running:!0}),le(n,"Started schema fetching."),Rn(n,i)),e.next=14;break;case 13:ce(n,{endpoint:t.schemaEndpoint,exists:!1,hasMutationType:!1,hasSubscriptionType:!1});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e,n,t,r){return Mn.apply(this,arguments)}function Mn(){return(Mn=Nn(l.a.mark((function e(n,t,r,i){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentRequestId,e.next=3,Te(i);case 3:if(o=e.sent,r!==a){e.next=14;break}if(!Ln(o)){e.next=11;break}return e.next=8,ee(n,o);case 8:le(n,"Fetched schema successfully."),e.next=14;break;case 11:return ce(n,{endpoint:i.uri,exists:!1,hasMutationType:!1,hasSubscriptionType:!1}),de(n,"Fetching schema failed.",o),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e){return Pn.get(e)||{fetching:!1,running:!1}}function Ln(e){return"__schema"in e}function Vn(e,n){e.sendMessage(new s.Message({type:"is-schema-fetching",payload:n}))}function Cn(e,n){var t=jn(jn({},Dn(e)),n);return Pn.set(e,t),t}function Rn(e,n){var t=e.id,i=e.session.documentId,a=Object(r.b)(),o=new h((function(r){var i=Dn(t);return r>0?le(e,"Retry schema fetching."):(i=Cn(t,{fetching:!0}),Vn(e,i.fetching)),In(e,i,a,n)}));Cn(t,{backoff:o,currentId:i,currentRequestId:a}),o.start((function(){var n=Dn(t);a===n.currentRequestId&&qn(e)}))}function _n(e,n,t){var i=Object(r.b)(),a=Cn(e.id,{currentId:e.session.documentId,currentRequestId:i,timeout:window.setTimeout((function(){_n(e,n,t)}),t)});In(e,a,i,n)}function qn(e){var n=Dn(e.id);n.backoff&&n.backoff.stop(),n.timeout&&window.clearTimeout(n.timeout),Vn(e,(n=Cn(e.id,{backoff:void 0,currentId:void 0,currentRequestId:void 0,fetching:!1,running:!1,timeout:void 0})).fetching)}var Gn=[],An=[];function Qn(e){var n=new E(e);Gn.push(n),S(),L(),He(),oe(),vn(),ln(),En(),e.onmessage=function(e){var t=e.data;!function(e,n){An.filter((function(e){return e.type===n.type})).forEach((function(t){return(0,t.handle)(n,e)}))}(n,t)},e.start()}function Jn(e,n){An.push({type:e,handle:n})}self.onconnect=function(e){return Qn(e.ports[0])}}},[[844,5,0,8]]]);