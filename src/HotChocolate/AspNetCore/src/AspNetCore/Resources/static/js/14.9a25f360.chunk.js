(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[14],{1086:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return L}));var r=t(178),a=t(6),c=t(10),i=t.n(c),o=t(461),u=t(471),s=t(469),l=t(477),d=t(596),f=t(540),b=t(479),p=t(543),j=t(561),x=t(478),m=t(651),h=t(495),O=t(489),v=t(502),g=t(485),k=t(472),y=t(44),w=t(462),C=t(991),F=t(168),T=t(565),S=t(459),H=t(503),I=t(474),D=t(942),E=t(780);var R,N,P=t(90),L=function(){var e=Object(w.b)(),n=Object(w.c)(k.c.selectIsUserSignedIn),t=Object(w.c)(k.c.selectIsFetchingUser),r=Object(g.b)(v.b.selectActiveNodeId),c=Object(g.c)(T.c.selectSearchTerm),m=Object(y.useRef)([]),F=Object(y.useRef)(),R=function(e){return{comparer:function(e,n){var t="item"===e.metadata.kind?e.metadata.created:e.metadata.day,r="item"===n.metadata.kind?n.metadata.created:n.metadata.day;return t>r?-1:t<r?1:0},getNodes:function(n,t,r){return Object(D.a)(e.pipe(Object(C.a)(1),Object(E.a)((function(e){return h.a.isRoot(n)?Object(u.getHistoryDayGroupKeys)(r?function(e){return r({name:e})}:void 0).then((function(n){return n.map((function(n,t){var a=Object(I.d)(n);return Object(S.a)(Object(S.a)({},a),{},{expanded:e.includes(a.name)||!!r})}))})):h.a.getSegments(n).length>1||!t?Promise.resolve([]):Object(u.getHistoryByDay)(t.metadata.day,r?function(e){return r({name:e})}:void 0).then((function(e){return e.map((function(e){return Object(S.a)(Object(S.a)({},Object(I.e)(e)),{},{expanded:!1})}))}))}))))},validate:function(e,n){return Promise.resolve(H.a.fail("This tree is read-only."))}}}(Object(g.b)(T.c.selectExpandedFolders)),N=Object(O.a)(function(){var n=Object(o.a)(i.a.mark((function n(t,r,a){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),t.stopPropagation(),r.selected||(Object(h.f)(r.model),r.selected=!0),"group"!==r.metadata.kind){n.next=7;break}r.toggleExpanded(),n.next=9;break;case 7:return n.next=9,Object(u.getDocument)(r.metadata.id).then((function(n){n&&e(s.a.activateOrOpenDocument({documentId:r.metadata.id,isHistory:!0,isPreview:a}))}));case 9:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),25,[e]),L=function(e,n){return N(e,n,!0)},V=function(e,n){return N(e,n,!1)},q=function(e){var n=r.subscribe(function(){var n=Object(o.a)(i.a.mark((function n(t){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t=e.subscribeFor(function(){var n=Object(o.a)(i.a.mark((function n(t){var r,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=Object(a.a)(t),n.prev=1,r.s();case 3:if((c=r.n()).done){n.next=19;break}o=c.value,n.t0=o.kind,n.next="collapsed"===n.t0?8:"expanded"===n.t0?11:"reset-filter"===n.t0?13:"set-filter"===n.t0?15:17;break;case 8:return n.next=10,A(o.node);case 10:return n.abrupt("break",17);case 11:return B(o.node),n.abrupt("break",17);case 13:case 15:return K(e),n.abrupt("break",17);case 17:n.next=3;break;case 19:n.next=24;break;case 21:n.prev=21,n.t1=n.catch(1),r.e(n.t1);case 24:return n.prev=24,r.f(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})));return function(e){return n.apply(this,arguments)}}(),"collapsed","expanded","reset-filter","set-filter");c&&c.length>0&&e.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(c.toLowerCase())})),m.current.push((function(){return n.unsubscribe()})),m.current.push((function(){return t()})),F.current=e},A=function(n){var t=n.name;e(T.a.collapseFolder({folderName:t}))},B=function(n){var t=n.name;e(T.a.expandFolder({folderName:t}))},G=function(){var n=Object(o.a)(i.a.mark((function n(t){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(T.a.changeHistorySearchTerm({searchTerm:t})),!F.current){n.next=9;break}if(!(t.length>0)){n.next=7;break}return n.next=5,F.current.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));case 5:n.next=9;break;case 7:return n.next=9,F.current.resetFilter();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),K=function(e){r.pipe(Object(C.a)(1)).subscribe(function(){var n=Object(o.a)(i.a.mark((function n(t){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},M=function(){e(k.a.signIn())},Q=function(e){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(J,{title:e.name,children:e.name}),Object(P.jsx)(U,{title:e.metadata.time,children:e.metadata.time}),"group"===e.metadata.kind?Object(P.jsx)(P.Fragment,{}):W(e)]})},W=function(e){var n,t,r;switch(e.metadata.operationStatus){case"cancelled":n="yellow",t=Object(P.jsx)(j.a,{}),r="Operation cancelled";break;case"failed":n="red",t=Object(P.jsx)(j.b,{}),r="Operation failed";break;default:n="green",t=Object(P.jsx)(j.e,{}),r="Operation succeeded"}return Object(P.jsx)(h.e,{color:n,title:r,children:t})};function X(e,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(o.a)(i.a.mark((function e(n,t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}if(!(r=n.find((function(e){return e.metadata&&e.metadata.id&&e.metadata.id===t})))){e.next=8;break}return r.selected||(Object(h.f)(n),r.selected=!0),e.next=6,r.ensureVisible();case 6:e.next=9;break;case 8:Object(h.f)(n);case 9:e.next=12;break;case 11:Object(h.f)(n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(y.useEffect)((function(){var e=m.current;return function(){for(var n;n=e.pop();)n();F.current=void 0}}),[]),Object(P.jsx)(b.k,{children:Object(P.jsxs)(b.a,{children:[Object(P.jsxs)(b.c,{children:[Object(P.jsx)(b.i,{children:"History"}),Object(P.jsx)(b.h,{}),Object(P.jsx)(l.c,{disabled:!n,title:"Clear History",onClick:function(){e(T.a.clearHistory())},children:Object(P.jsx)(x.i,{})})]}),Object(P.jsx)(d.a,{searchTerm:c,onSearchTermChange:G}),t?Object(P.jsx)(f.a,{}):n?Object(P.jsx)(b.j,{children:Object(P.jsx)(h.c,{id:"history",itemHeight:h.b,provider:R,onInitialized:q,children:function(e){return Object(P.jsx)(h.d,{id:e.id,depth:e.depth,name:e.name,path:e.path,expanded:e.expanded,expandable:e.expandable,node:e,onClick:L,onDoubleClick:V,renderIcon:z,renderName:Q})}})}):Object(P.jsx)(p.a,{title:"Sign in to access history data",icon:Object(P.jsx)(x.c,{}),children:Object(P.jsx)(l.a,{onClick:M,primary:!0,children:"Sign in"})})]})})};function z(e){return"group"===e.metadata.kind?Object(P.jsx)(h.e,{color:"yellow",children:Object(P.jsx)(x.e,{})}):Object(P.jsx)(h.e,{children:"mutation"===e.metadata.operationType?Object(P.jsx)(m.a,{title:"Mutation"}):"subscription"===e.metadata.operationType?Object(P.jsx)(m.c,{title:"Subscription"}):Object(P.jsx)(m.b,{title:"Query"})})}var J=F.d.h3(R||(R=Object(r.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  padding: 0 4px 0 0;\n  font-weight: normal;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),U=F.d.div(N||(N=Object(r.a)(["\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  padding: 0 4px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])))},596:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r,a,c,i,o=t(178),u=t(489),s=t(44),l=t(168),d=t(477),f=t(478),b=t(90),p=Object(s.memo)(Object(s.forwardRef)((function(e,n){var t=e.searchTerm,r=e.onSearchTermChange,a=Object(s.useRef)(null),c=Object(s.useRef)(null),i=Object(u.a)((function(e){r(e.target.value.trim())}),250,[r]),o=Object(s.useCallback)((function(e){i(e),c.current.style.display=e.currentTarget.value.length>0?"flex":"none"}),[i]),l=Object(s.useCallback)((function(){var e;null===(e=a.current)||void 0===e||e.focus()}),[]);return Object(s.useEffect)((function(){var e=a.current,n=c.current;t&&t.length>0?(e.value=t,n.style.display="flex"):n.style.display="none"}),[t]),Object(b.jsx)(j,{ref:n,onClick:l,children:Object(b.jsxs)(h,{children:[Object(b.jsx)(x,{children:Object(b.jsx)(f.x,{})}),Object(b.jsx)(m,{ref:a,placeholder:"Find...",onChange:o}),Object(b.jsx)(d.c,{ref:c,onClick:function(){r(""),a.current.value="",c.current.style.display="none"},children:Object(b.jsx)(f.j,{})})]})})}))),j=l.d.div(r||(r=Object(o.a)(["\n  z-index: 1;\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: row;\n  align-items: center;\n  height: 44px;\n  max-height: 44px;\n  padding: 0 8px;\n"]))),x=l.d.div(a||(a=Object(o.a)(["\n  display: flex;\n  flex: 0 0 24px;\n  align-items: center;\n  justify-content: center;\n\n  & > svg {\n    fill: "," !important;\n  }\n"])),(function(e){return e.theme.accentColor1})),m=l.d.input(c||(c=Object(o.a)(["\n  flex: 1 1 auto;\n  border: 0 none;\n  padding: 0 9px;\n  color: ",";\n  background-color: ",";\n  transition: background-color 0.2s ease;\n  user-select: initial;\n"])),(function(e){return e.theme.accentColor1}),(function(e){return e.theme.accentColor4})),h=l.d.div(i||(i=Object(o.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  border-radius: 4px;\n  border: 1px solid ",";\n  padding: 0 5px;\n  height: 30px;\n  background-color: ",";\n  transition: background-color 0.2s ease, border-color 0.2s ease,\n    box-shadow 0.2s ease;\n  cursor: text;\n\n  &:focus-within {\n    border-color: ",";\n    background-color: ",";\n    box-shadow: 0 0 4px 0 ",";\n\n    & > "," {\n      background-color: ",";\n    }\n  }\n\n  &:hover {\n    background-color: ",";\n\n    & > "," {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.accentColor3}),(function(e){return e.theme.accentColor4}),(function(e){return e.theme.mainColor}),(function(e){return e.theme.mainColor}),(function(e){return e.theme.accentColor1}),m,(function(e){return e.theme.mainColor}),(function(e){return e.theme.mainColor}),m,(function(e){return e.theme.mainColor}))},942:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(600),a=Object(r.a)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function c(e,n){var t="object"===typeof n;return new Promise((function(r,c){var i,o=!1;e.subscribe({next:function(e){i=e,o=!0},error:c,complete:function(){o?r(i):t?r(n.defaultValue):c(new a)}})}))}}}]);