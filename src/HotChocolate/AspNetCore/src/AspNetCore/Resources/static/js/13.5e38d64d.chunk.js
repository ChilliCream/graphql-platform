(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[13],{628:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));var c=n(388),r=n(434),i=n(390),a=n(488),o=n(385),u=n(11),s=n.n(u),d=n(394),l=n(384),b=n(387),j=n(401),h=n(408),O=n(409),f=n(396),v=n(405),p=n(392),m=n(410),g=n(148),x=n(543),S=n(613),w=n(625),k=(n(247),n(80)),E=n(68),V=n(91),C="schema-sdl",D=Object(E.memo)((function(e){var t=e.documentId,n=Object(b.k)(),c=Object(o.c)(v.b.selectActive,(function(e,t){return(null===e||void 0===e?void 0:e.hash)===(null===t||void 0===t?void 0:t.hash)})),r=function(e,t,n){var c=Object(f.c)(p.c.selectActiveSchemaSdlEditorViewState),r=Object(b.g)(),i=Object(E.useRef)(null),a=Object(f.c)(p.c.selectActiveFocusedElement),u=Object(o.b)(),s=Object(h.a)((function(t){var n,c=null!==(n=t.saveViewState())&&void 0!==n?n:void 0;u(p.a.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:c}))}),250,[e,u]);return Object(E.useEffect)((function(){var n=i.current,o=Object(l.a)(Object(l.a)({},O.a),{},{model:t,readOnly:!0,theme:"light"}),d=k.editor.create(n,o);return window.setTimeout((function(){return d.render()}),500),r.register(C,d),Object(j.d)(d),c&&d.restoreViewState(c),"schema-sdl-editor"===a&&d.focus(),d.onDidChangeCursorPosition((function(){return s(d)})),d.onDidChangeCursorSelection((function(){return s(d)})),d.onDidScrollChange((function(){return s(d)})),d.onDidFocusEditorText((function(){u(p.a.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),function(){r.unregister(C),d.dispose()}}),[e,r,a,c,t,n,u,s]),Object(h.b)(C,i),i}(t,function(e,t){var n=Object(b.h)(),c=Object(E.useRef)(k.editor.createModel("","graphql"));return c.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),Object(E.useEffect)((function(){(null===t||void 0===t?void 0:t.exists)?function(e){return I.apply(this,arguments)}(t.endpoint).then((function(e){c.current.setValue(e)})).catch((function(t){n.error(e,"Could not get SDL. Please reload the schema and try again.",Object(l.a)({},t))})):c.current.setValue("")}),[e,n,c,t]),c.current}(t,c),n);return g.api.schemaInfo=null!==c&&void 0!==c?c:null,Object(V.jsx)(i.m,{ref:r})}));function I(){return(I=Object(d.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)(t);case 2:if(!(n=e.sent)){e.next=6;break}return c=Object(S.a)(Object(w.a)(n.result)).replace(/""""""/gi,""),e.abrupt("return",Object(m.g)(c));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=n(400),A=n(485),F=n(395),z=function(e){var t=e.documentId,n=e.isFetchingSchema;return Object(V.jsxs)(i.c,{children:[Object(V.jsx)(i.i,{children:Object(V.jsx)(A.a,{documentId:t})}),Object(V.jsx)(i.h,{}),Object(V.jsx)(J,{disabled:n})]})},J=function(e){var t=e.disabled,n=Object(b.g)(),c=Object(o.c)(v.b.selectActive,(function(e,t){return(null===e||void 0===e?void 0:e.hash)===(null===t||void 0===t?void 0:t.hash)}));return Object(V.jsx)(y.c,{disabled:t||!c,title:"Download as SDL",onClick:function(){var e,t;if(null===c||void 0===c?void 0:c.exists){var r=null===(e=n.get("schema-sdl"))||void 0===e||null===(t=e.getModel())||void 0===t?void 0:t.getValue();if(r){var i=new Blob([r],{type:"text/plain"});Object(j.f)(i)}}},children:Object(V.jsx)(F.i,{})})},L=function(){var e=Object(o.c)(c.c.selectActiveId),t=Object(a.a)();return Object(V.jsx)(i.b,{children:Object(V.jsxs)(i.a,{children:[Object(V.jsx)(z,{documentId:e,isFetchingSchema:t}),t?Object(V.jsx)(r.a,{}):Object(V.jsx)(D,{documentId:e})]})})}}}]);