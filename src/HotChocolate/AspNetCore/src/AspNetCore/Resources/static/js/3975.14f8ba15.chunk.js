"use strict";(self.webpackChunk_banana_cake_pop_main=self.webpackChunk_banana_cake_pop_main||[]).push([[3975],{83975:function(e,n,r){r.r(n),r.d(n,{default:function(){return R}});var t=r(71171),a=r(41361),o=r(34795),i=r(77162),c=r.n(i),s=r(32502),u=r(63395),l=r(43395),d=r(75144),f=r(52830),p=r(71618),x=r(82800),m=r(73355),h=r(87415),v=r(38018),k=r(51196),g=r(22025),b=r(23319),y=r(70773),j=r(63206),T=r(20763),w=r(40415),Z=r(72335),C=r(7167),_=r(17772),H=r(33028),F=r(34294),S=r(17901),P=r(46997),I=r(90150);var N,O,E=r(27778),R=function(){var e=(0,w.I0)(),n=(0,w.v9)(y.G0.selectIsUserSignedIn),r=(0,w.v9)(y.G0.selectIsFetchingUser),t=(0,b.mA)(g.Ut.selectActiveNodeId),i=(0,b.Qn)(_.qv.selectSearchTerm),h=(0,T.useRef)([]),j=(0,T.useRef)(),C=function(e){return{comparer:function(e,n){var r="item"===e.metadata.kind?e.metadata.created:e.metadata.day,t="item"===n.metadata.kind?n.metadata.created:n.metadata.day;return r>t?-1:r<t?1:0},getNodes:function(n,r,t){return(0,P.n)(e.pipe((0,Z.q)(1),(0,I.z)((function(e){return v.y$.isRoot(n)?(0,s.nJ)(t?function(e){return t({name:e})}:void 0).then((function(n){return n.map((function(n,r){var a=(0,S.J2)(n);return(0,H.Z)((0,H.Z)({},a),{},{expanded:e.includes(a.name)||!!t})}))})):v.y$.getSegments(n).length>1||!r?Promise.resolve([]):(0,s.Kj)(r.metadata.day,t?function(e){return t({name:e})}:void 0).then((function(e){return e.map((function(e){return(0,H.Z)((0,H.Z)({},(0,S.Gm)(e)),{},{expanded:!1})}))}))}))))},validate:function(e,n){return Promise.resolve(F.Z.fail("This tree is read-only."))}}}((0,b.mA)(_.qv.selectExpandedFolders)),N=(0,k.Nr)(function(){var n=(0,o.Z)(c().mark((function n(r,t,a){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),r.stopPropagation(),t.selected||((0,v.gF)(t.model),t.selected=!0),"group"!==t.metadata.kind){n.next=7;break}t.toggleExpanded(),n.next=9;break;case 7:return n.next=9,(0,s.Me)(t.metadata.id).then((function(n){n&&e(u.RW.activateOrOpenDocument({documentId:t.metadata.id,isHistory:!0,isPreview:a}))}));case 9:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),25,[e]),O=function(e,n){return N(e,n,!0)},R=function(e,n){return N(e,n,!1)},z=function(e){var n=t.subscribe(function(){var n=(0,o.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r=e.subscribeFor(function(){var n=(0,o.Z)(c().mark((function n(r){var t,o,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=(0,a.Z)(r),n.prev=1,t.s();case 3:if((o=t.n()).done){n.next=19;break}i=o.value,n.t0=i.kind,n.next="collapsed"===n.t0?8:"expanded"===n.t0?11:"reset-filter"===n.t0?13:"set-filter"===n.t0?15:17;break;case 8:return n.next=10,M(i.node);case 10:return n.abrupt("break",17);case 11:return A(i.node),n.abrupt("break",17);case 13:case 15:return J(e),n.abrupt("break",17);case 17:n.next=3;break;case 19:n.next=24;break;case 21:n.prev=21,n.t1=n.catch(1),t.e(n.t1);case 24:return n.prev=24,t.f(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})));return function(e){return n.apply(this,arguments)}}(),"collapsed","expanded","reset-filter","set-filter");i&&i.length>0&&e.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(i.toLowerCase())})),h.current.push((function(){return n.unsubscribe()})),h.current.push((function(){return r()})),j.current=e},M=function(n){var r=n.name;e(_.vu.collapseFolder({folderName:r}))},A=function(n){var r=n.name;e(_.vu.expandFolder({folderName:r}))},B=function(){var n=(0,o.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(_.vu.changeHistorySearchTerm({searchTerm:r})),!j.current){n.next=9;break}if(!(r.length>0)){n.next=7;break}return n.next=5,j.current.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(r.toLowerCase())}));case 5:n.next=9;break;case 7:return n.next=9,j.current.resetFilter();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),J=function(e){t.pipe((0,Z.q)(1)).subscribe(function(){var n=(0,o.Z)(c().mark((function n(r){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},L=function(){e(y.EJ.signIn())},G=function(e){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(D,{title:e.name,children:e.name}),(0,E.jsx)(U,{title:e.metadata.time,children:e.metadata.time}),"group"===e.metadata.kind?(0,E.jsx)(E.Fragment,{}):K(e)]})},K=function(e){switch(e.metadata.operationStatus){case"cancelled":return(0,E.jsx)(v._c,{colorSelector:function(e){return e.warning},title:"Operation cancelled",children:(0,E.jsx)(x.KH,{})});case"failed":return(0,E.jsx)(v._c,{colorSelector:function(e){return e.failure},title:"Operation failed",children:(0,E.jsx)(x.Pz,{})});default:return(0,E.jsx)(v._c,{colorSelector:function(e){return e.success},title:"Operation succeeded",children:(0,E.jsx)(x.nq,{})})}};function Q(e,n){return V.apply(this,arguments)}function V(){return(V=(0,o.Z)(c().mark((function e(n,r){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}if(!(t=n.find((function(e){return e.metadata&&e.metadata.id&&e.metadata.id===r})))){e.next=8;break}return t.selected||((0,v.gF)(n),t.selected=!0),e.next=6,t.ensureVisible();case 6:e.next=9;break;case 8:(0,v.gF)(n);case 9:e.next=12;break;case 11:(0,v.gF)(n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,T.useEffect)((function(){var e=h.current;return function(){for(var n;n=e.pop();)n();j.current=void 0}}),[]),(0,E.jsxs)(m.sg,{children:[(0,E.jsxs)(m.x8,{children:[(0,E.jsx)(m.qF,{children:"History"}),(0,E.jsx)(m.Jm,{}),(0,E.jsx)(l.hE,{children:(0,E.jsx)(l.hU,{disabled:!n,tooltip:"Clear History",onClick:function(){e(_.vu.clearHistory())},children:(0,E.jsx)(x.KH,{})})})]}),(0,E.jsx)(m.F0,{children:(0,E.jsx)(d.k,{searchTerm:i,onSearchTermChange:B})}),r?(0,E.jsx)(f.N,{}):n?(0,E.jsx)(m.f,{children:(0,E.jsx)(v.mp,{id:"history",itemHeight:v.C_,provider:C,onInitialized:z,children:function(e){return(0,E.jsx)(v.OF,{id:e.id,depth:e.depth,name:e.name,path:e.path,expanded:e.expanded,expandable:e.expandable,node:e,onClick:O,onDoubleClick:R,renderIcon:q,renderName:G})}})}):(0,E.jsx)(p.z,{title:"Sign in to access history data",icon:(0,E.jsx)(x.qD,{}),children:(0,E.jsx)(l.zx,{primary:!0,onClick:L,children:"Sign in"})})]})};function q(e){return"group"===e.metadata.kind?(0,E.jsx)(v._c,{colorSelector:function(e){return e.calendarIcon},children:(0,E.jsx)(x.Qu,{})}):(0,E.jsx)(v._c,{children:e.metadata.operationType===j.ku.MUTATION?(0,E.jsx)(h.mm,{title:"Mutation"}):e.metadata.operationType===j.ku.SUBSCRIPTION?(0,E.jsx)(h.w0,{title:"Subscription"}):(0,E.jsx)(h.AE,{title:"Query"})})}var D=C.ZP.h3(N||(N=(0,t.Z)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  padding: 0 4px 0 0;\n  font-weight: normal;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),U=C.ZP.div(O||(O=(0,t.Z)(["\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  padding: 0 4px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])))},75144:function(e,n,r){r.d(n,{k:function(){return m}});var t,a,o,i,c=r(71171),s=r(51196),u=r(20763),l=r(7167),d=r(92633),f=r(43395),p=r(82800),x=r(27778),m=(0,u.memo)((0,u.forwardRef)((function(e,n){var r=e.searchTerm,t=e.onSearchTermChange,a=(0,u.useRef)(null),o=(0,u.useRef)(null),i=(0,s.Nr)((function(e){t(e.target.value.trim())}),250,[t]),c=(0,u.useCallback)((function(e){i(e),o.current.style.display=e.currentTarget.value.length>0?"flex":"none"}),[i]),l=(0,u.useCallback)((function(){var e;null===(e=a.current)||void 0===e||e.focus()}),[]);return(0,u.useEffect)((function(){var e=a.current,n=o.current;r&&r.length>0?(e.value=r,n.style.display="flex"):n.style.display="none"}),[r]),(0,x.jsx)(h,{ref:n,onClick:l,children:(0,x.jsxs)(g,{children:[(0,x.jsx)(v,{children:(0,x.jsx)(p.W1,{})}),(0,x.jsx)(k,{ref:a,placeholder:"Find...",onChange:c}),(0,x.jsx)(f.hU,{innerRef:o,onClick:function(){t(""),a.current.value="",o.current.style.display="none"},children:(0,x.jsx)(p.Tw,{})})]})})}))),h=l.ZP.div(t||(t=(0,c.Z)(["\n  z-index: 1;\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: row;\n  align-items: center;\n"]))),v=l.ZP.div(a||(a=(0,c.Z)(["\n  display: flex;\n  flex: 0 0 24px;\n  align-items: center;\n  justify-content: center;\n  transition: fill 0.2s ease;\n\n  & > svg {\n    fill: "," !important;\n  }\n"])),d.kT.components.fieldText),k=l.ZP.input(o||(o=(0,c.Z)(["\n  flex: 1 1 auto;\n  border: 0 none;\n  padding: 0 9px;\n  color: ",";\n  background-color: ",";\n  transition: background-color 0.2s ease, color 0.2s ease;\n  user-select: initial;\n\n  ::placeholder {\n    color: ",";\n    transition: color 0.2s ease;\n  }\n"])),d.kT.components.fieldText,d.kT.components.field,d.kT.components.fieldPlaceholder),g=l.ZP.div(i||(i=(0,c.Z)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  border-radius: 8px;\n  border: 1px solid ",";\n  padding-left: 5px;\n  height: 28px;\n  background-color: ",";\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n  cursor: text;\n\n  &:focus-within,\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      background-color: ",";\n      color: ",";\n\n      ::placeholder {\n        color: ",";\n      }\n    }\n  }\n\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      color: ",";\n      background-color: ",";\n    }\n  }\n"])),d.kT.components.fieldBorder,d.kT.components.field,d.kT.components.fieldHoverBorder,d.kT.components.fieldHover,v,d.kT.components.fieldHoverText,k,d.kT.components.fieldHover,d.kT.components.fieldHoverText,d.kT.components.fieldHoverPlaceholder,d.kT.components.fieldHoverBorder,d.kT.components.fieldHover,v,d.kT.components.fieldHoverText,k,d.kT.components.fieldHoverText,d.kT.components.fieldHover)},34294:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(9249),a=r(87371),o=function(){function e(n,r,a){(0,t.Z)(this,e),this._succeeded=n,this._errorMessage=r,this._errorDetails=a}return(0,a.Z)(e,[{key:"succeeded",get:function(){return this._succeeded}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"errorDetails",get:function(){return this._errorDetails}}],[{key:"fail",value:function(n,r){return new e(!1,n,r)}},{key:"success",value:function(){return new e(!0)}}]),e}()},46997:function(e,n,r){r.d(n,{n:function(){return a}});var t=(0,r(44494).d)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function a(e,n){var r="object"===typeof n;return new Promise((function(a,o){var i,c=!1;e.subscribe({next:function(e){i=e,c=!0},error:o,complete:function(){c?a(i):r?a(n.defaultValue):o(new t)}})}))}}}]);