(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[13],{622:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var c=n(387),i=n(434),r=n(390),a=n(487),o=n(385),u=n(11),s=n.n(u),d=n(394),l=n(384),h=n(388),b=n(401),j=n(409),f=n(408),v=n(396),O=n(405),p=n(392),g=n(410),m=n(148),w=n(542),x=n(607),S=n(619),E=(n(247),n(80)),I=n(68),k=n(91),y=Object(I.memo)((function(e){var t=e.documentId,n=Object(h.k)(),c=Object(o.c)(O.b.selectActive,(function(e,t){return(null===e||void 0===e?void 0:e.hash)===(null===t||void 0===t?void 0:t.hash)})),i=function(e,t,n){var c=Object(v.c)(p.c.selectActiveSchemaSdlEditorViewState),i=Object(h.g)(),r=Object(I.useRef)(null),a=Object(v.c)(p.c.selectActiveFocusedElement),u=Object(o.b)(),s=Object(j.a)((function(t){var n,c=null!==(n=t.saveViewState())&&void 0!==n?n:void 0;u(p.a.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:c}))}),250,[e,u]);return Object(I.useEffect)((function(){var n=r.current,o=Object(l.a)(Object(l.a)({},f.a),{},{model:t,readOnly:!0,theme:"light"}),d=E.editor.create(n,o);function h(){var e=n.parentElement.getBoundingClientRect();d.getLayoutInfo().width===e.width&&d.getLayoutInfo().height===e.height||d.layout({width:e.width,height:e.height})}return window.setTimeout((function(){return d.render()}),500),i.register("schema-sdl",d),Object(b.d)(d),c&&d.restoreViewState(c),"schema-sdl-editor"===a&&d.focus(),d.onDidChangeCursorPosition((function(){return s(d)})),d.onDidChangeCursorSelection((function(){return s(d)})),d.onDidScrollChange((function(){return s(d)})),d.onDidFocusEditorText((function(){u(p.a.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),window.addEventListener("splitterchange",h),function(){window.removeEventListener("splitterchange",h),i.unregister("operations"),d.dispose()}}),[e,i,a,c,t,n,u,s]),r}(t,function(e,t){var n=Object(h.h)(),c=Object(I.useRef)(E.editor.createModel("","graphql"));return c.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),Object(I.useEffect)((function(){(null===t||void 0===t?void 0:t.exists)?function(e){return C.apply(this,arguments)}(t.endpoint).then((function(e){c.current.setValue(e)})).catch((function(t){n.error(e,"Could not get SDL. Please reload the schema and try again.",Object(l.a)({},t))})):c.current.setValue("")}),[e,n,c,t]),c.current}(t,c),n);return m.api.schemaInfo=null!==c&&void 0!==c?c:null,Object(k.jsx)(r.m,{ref:i})}));function C(){return(C=Object(d.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)(t);case 2:if(!(n=e.sent)){e.next=6;break}return c=Object(x.a)(Object(S.a)(n.result)).replace(/""""""/gi,""),e.abrupt("return",Object(g.g)(c));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=n(400),D=n(484),L=n(395),A=function(e){var t=e.documentId,n=e.isFetchingSchema;return Object(k.jsxs)(r.c,{children:[Object(k.jsx)(r.i,{children:Object(k.jsx)(D.a,{documentId:t})}),Object(k.jsx)(r.h,{}),Object(k.jsx)(F,{disabled:n})]})},F=function(e){var t=e.disabled,n=Object(h.g)(),c=Object(o.c)(O.b.selectActive,(function(e,t){return(null===e||void 0===e?void 0:e.hash)===(null===t||void 0===t?void 0:t.hash)}));return Object(k.jsx)(V.c,{disabled:t||!c,title:"Download as SDL",onClick:function(){var e,t;if(null===c||void 0===c?void 0:c.exists){var i=null===(e=n.get("schema-sdl"))||void 0===e||null===(t=e.getModel())||void 0===t?void 0:t.getValue();if(i){var r=new Blob([i],{type:"text/plain"});Object(b.f)(r)}}},children:Object(k.jsx)(L.i,{})})},R=function(){var e=Object(o.c)(c.c.selectActiveId),t=Object(a.a)();return Object(k.jsx)(r.b,{children:Object(k.jsxs)(r.a,{children:[Object(k.jsx)(A,{documentId:e,isFetchingSchema:t}),t?Object(k.jsx)(i.a,{}):Object(k.jsx)(y,{documentId:e})]})})}}}]);