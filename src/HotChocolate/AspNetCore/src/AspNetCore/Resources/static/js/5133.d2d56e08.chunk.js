"use strict";(self.webpackChunk_banana_cake_pop_main=self.webpackChunk_banana_cake_pop_main||[]).push([[5133],{85133:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(63395),i=t(52830),u=t(73355),o=t(51196),c=t(40415),a=t(22104),s=t(34795),l=t(33028),d=t(77162),f=t.n(d),h=t(32502),v=t(36947),p=t(17901),m=t(92449),x=t(23319),S=t(25767),g=t(7344),w=t(46797),j=t(99579),b=t(58261),k=t(25537),C=(t(61735),t(60565)),D=t(20763),E=t(56167),V=t(27778),_="schema-sdl",z=(0,D.memo)((function(e){var n=e.documentId,t=(0,c.v9)(S.Tk.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)})),r=function(e,n){var t=(0,v.Tx)(),r=(0,D.useRef)(C.editor.createModel("","graphql"));return r.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),(0,D.useEffect)((function(){null!==n&&void 0!==n&&n.exists?function(e){return A.apply(this,arguments)}(n.endpoint).then((function(e){r.current.setValue(e)})).catch((function(n){t.error(e,"Could not get SDL. Please reload the schema and try again.",(0,l.Z)({},n))})):r.current.setValue("")}),[e,t,r,n]),r.current}(n,t),i=function(e,n){var t=(0,x.Qn)(g.zw.selectActiveSchemaSdlEditorViewState),r=(0,v.t2)(),i=(0,D.useRef)(null),u=(0,x.Qn)(g.zw.selectActiveFocusedElement),a=(0,c.I0)(),s=(0,o.Nr)((function(n){var t,r=null!==(t=n.saveViewState())&&void 0!==t?t:void 0;a(g.zM.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:r}))}),250,[e,a]);return(0,D.useEffect)((function(){var o=i.current,c=(0,l.Z)((0,l.Z)({},m.Nt),{},{model:n,readOnly:!0}),d=C.editor.create(o,c);return window.setTimeout((function(){return d.render()}),500),r.register(_,d),(0,p.YT)(d),t&&d.restoreViewState(t),"schema-sdl-editor"===u&&d.focus(),d.onContextMenu((function(){return(0,E.L)(o)})),d.onDidChangeCursorPosition((function(){return s(d)})),d.onDidChangeCursorSelection((function(){return s(d)})),d.onDidScrollChange((function(){return s(d)})),d.onDidFocusEditorText((function(){a(g.zM.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),function(){r.unregister(_),d.dispose()}}),[e,r,u,t,n,a,s]),(0,o.Az)(_,i),i}(n,r);return w.h.schemaInfo=null!==t&&void 0!==t?t:null,(0,V.jsx)(u.Nf,{ref:i})}));function A(){return(A=(0,s.Z)(f().mark((function e(n){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Y5)(n);case 2:if(!(t=e.sent)){e.next=6;break}return r=(0,b.t3)((0,k.Z)(t.result)).replace(/""""""/gi,""),e.abrupt("return",(0,j.e6)(r));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=t(43395),M=t(82800),T=function(e){var n=e.isFetchingSchema;return(0,V.jsxs)(u.x8,{children:[(0,V.jsx)(u.qF,{children:"Schema Definition"}),(0,V.jsx)(u.Jm,{}),(0,V.jsx)(y,{disabled:n})]})},y=function(e){var n=e.disabled,t=(0,v.t2)(),r=(0,c.v9)(S.Tk.selectActive,(function(e,n){return(null===e||void 0===e?void 0:e.hash)===(null===n||void 0===n?void 0:n.hash)}));return(0,V.jsx)(F.hU,{disabled:n||!r,tooltip:"Download as SDL",onClick:function(){var e,n;if(null!==r&&void 0!==r&&r.exists){var i=null===(e=t.get("schema-sdl"))||void 0===e||null===(n=e.getModel())||void 0===n?void 0:n.getValue();if(i){var u=new Blob([i],{type:"text/plain"});(0,p.lm)(u)}}},children:(0,V.jsx)(M.nM,{})})},I=function(){var e=(0,c.v9)(r.QN.selectActiveId),n=(0,o.LA)();return(0,V.jsx)(a.S,{children:(0,V.jsxs)(u.sg,{children:[(0,V.jsx)(T,{isFetchingSchema:n}),(0,V.jsx)(u.Q5,{}),n?(0,V.jsx)(i.N,{}):(0,V.jsx)(z,{documentId:e})]})})}}}]);