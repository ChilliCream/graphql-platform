(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[14],{1063:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(381),c=Object(r.a)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function a(e,n){var t="object"===typeof n;return new Promise((function(r,a){var o,i=!1;e.subscribe({next:function(e){o=e,i=!0},error:a,complete:function(){i?r(o):t?r(n.defaultValue):a(new c)}})}))}},1209:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return P}));var r=t(4),c=t(77),a=t(79),o=t.n(a),i=t(91),s=t(114),u=t(111),l=t(128),d=t(374),f=t(284),b=t(285),p=t(126),O=t(137),j=t(543),x=t(179),m=t(150),h=t(195),v=t(151),g=t(121),k=t(421),y=t(0),E=t(98),T=t(1116),H=t(3),C=t(313),w=t(80),S=t(202),R=t(120),L=t(1063),M=t(774);var _,I,F=t(2),P=function(){var e=Object(E.b)(),n=Object(E.c)(g.c.selectIsUserSignedIn),t=Object(E.c)(g.c.selectIsFetchingUser),r=Object(v.b)(h.b.selectActiveNodeId),a=Object(v.c)(C.c.selectSearchTerm),j=Object(y.useRef)([]),k=Object(y.useRef)(),H=function(e){return{comparer:function(e,n){var t="item"===e.metadata.kind?e.metadata.created:e.metadata.day,r="item"===n.metadata.kind?n.metadata.created:n.metadata.day;return t>r?-1:t<r?1:0},getNodes:function(n,t,r){return Object(L.a)(e.pipe(Object(T.a)(1),Object(M.a)((function(e){return x.a.isRoot(n)?Object(s.getHistoryDayGroupKeys)(r?function(e){return r({name:e})}:void 0).then((function(n){return n.map((function(n,t){var c=Object(R.h)(n);return Object(w.a)(Object(w.a)({},c),{},{expanded:e.includes(c.name)||!!r})}))})):x.a.getSegments(n).length>1||!t?Promise.resolve([]):Object(s.getHistoryByDay)(t.metadata.day,r?function(e){return r({name:e})}:void 0).then((function(e){return e.map((function(e){return Object(w.a)(Object(w.a)({},Object(R.i)(e)),{},{expanded:!1})}))}))}))))},validate:function(e,n){return Promise.resolve(S.a.fail("This tree is read-only."))}}}(Object(v.b)(C.c.selectExpandedFolders)),_=Object(m.a)(function(){var n=Object(i.a)(o.a.mark((function n(t,r,c){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),t.stopPropagation(),r.selected||(Object(x.f)(r.model),r.selected=!0),"group"!==r.metadata.kind){n.next=7;break}r.toggleExpanded(),n.next=9;break;case 7:return n.next=9,Object(s.getDocument)(r.metadata.id).then((function(n){n&&e(u.a.activateOrOpenDocument({documentId:r.metadata.id,isHistory:!0,isPreview:c}))}));case 9:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),25,[e]),I=function(e,n){return _(e,n,!0)},P=function(e,n){return _(e,n,!1)},U=function(e){var n=r.subscribe(function(){var n=Object(i.a)(o.a.mark((function n(t){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t=e.subscribeFor(function(){var n=Object(i.a)(o.a.mark((function n(t){var r,a,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=Object(c.a)(t),n.prev=1,r.s();case 3:if((a=r.n()).done){n.next=19;break}i=a.value,n.t0=i.kind,n.next="collapsed"===n.t0?8:"expanded"===n.t0?11:"reset-filter"===n.t0?13:"set-filter"===n.t0?15:17;break;case 8:return n.next=10,A(i.node);case 10:return n.abrupt("break",17);case 11:return z(i.node),n.abrupt("break",17);case 13:case 15:return V(e),n.abrupt("break",17);case 17:n.next=3;break;case 19:n.next=24;break;case 21:n.prev=21,n.t1=n.catch(1),r.e(n.t1);case 24:return n.prev=24,r.f(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})));return function(e){return n.apply(this,arguments)}}(),"collapsed","expanded","reset-filter","set-filter");a&&a.length>0&&e.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())})),j.current.push((function(){return n.unsubscribe()})),j.current.push((function(){return t()})),k.current=e},A=function(n){var t=n.name;e(C.a.collapseFolder({folderName:t}))},z=function(n){var t=n.name;e(C.a.expandFolder({folderName:t}))},J=function(){var n=Object(i.a)(o.a.mark((function n(t){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(C.a.changeHistorySearchTerm({searchTerm:t})),!k.current){n.next=9;break}if(!(t.length>0)){n.next=7;break}return n.next=5,k.current.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));case 5:n.next=9;break;case 7:return n.next=9,k.current.resetFilter();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),V=function(e){r.pipe(Object(T.a)(1)).subscribe(function(){var n=Object(i.a)(o.a.mark((function n(t){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},q=function(){e(g.a.signIn())},G=function(e){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(D,{title:e.name,children:e.name}),Object(F.jsx)(B,{title:e.metadata.time,children:e.metadata.time}),"group"===e.metadata.kind?Object(F.jsx)(F.Fragment,{}):K(e)]})},K=function(e){switch(e.metadata.operationStatus){case"cancelled":return Object(F.jsx)(x.e,{colorSelector:function(e){return e.warning},title:"Operation cancelled",children:Object(F.jsx)(p.i,{})});case"failed":return Object(F.jsx)(x.e,{colorSelector:function(e){return e.failure},title:"Operation failed",children:Object(F.jsx)(p.l,{})});default:return Object(F.jsx)(x.e,{colorSelector:function(e){return e.success},title:"Operation succeeded",children:Object(F.jsx)(p.A,{})})}};function Q(e,n){return W.apply(this,arguments)}function W(){return(W=Object(i.a)(o.a.mark((function e(n,t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}if(!(r=n.find((function(e){return e.metadata&&e.metadata.id&&e.metadata.id===t})))){e.next=8;break}return r.selected||(Object(x.f)(n),r.selected=!0),e.next=6,r.ensureVisible();case 6:e.next=9;break;case 8:Object(x.f)(n);case 9:e.next=12;break;case 11:Object(x.f)(n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(y.useEffect)((function(){var e=j.current;return function(){for(var n;n=e.pop();)n();k.current=void 0}}),[]),Object(F.jsxs)(O.a,{children:[Object(F.jsxs)(O.e,{children:[Object(F.jsx)(O.m,{children:"History"}),Object(F.jsx)(O.l,{}),Object(F.jsx)(l.c,{disabled:!n,tooltip:"Clear History",onClick:function(){e(C.a.clearHistory())},children:Object(F.jsx)(p.i,{})})]}),Object(F.jsx)(O.d,{children:Object(F.jsx)(d.a,{searchTerm:a,onSearchTermChange:J})}),t?Object(F.jsx)(f.a,{}):n?Object(F.jsx)(O.b,{children:Object(F.jsx)(x.c,{id:"history",itemHeight:x.b,provider:H,onInitialized:U,children:function(e){return Object(F.jsx)(x.d,{id:e.id,depth:e.depth,name:e.name,path:e.path,expanded:e.expanded,expandable:e.expandable,node:e,onClick:I,onDoubleClick:P,renderIcon:N,renderName:G})}})}):Object(F.jsx)(b.a,{title:"Sign in to access history data",icon:Object(F.jsx)(p.b,{}),children:Object(F.jsx)(l.a,{primary:!0,onClick:q,children:"Sign in"})})]})};function N(e){return"group"===e.metadata.kind?Object(F.jsx)(x.e,{colorSelector:function(e){return e.calendarIcon},children:Object(F.jsx)(p.e,{})}):Object(F.jsx)(x.e,{children:e.metadata.operationType===k.b.MUTATION?Object(F.jsx)(j.a,{title:"Mutation"}):e.metadata.operationType===k.b.SUBSCRIPTION?Object(F.jsx)(j.c,{title:"Subscription"}):Object(F.jsx)(j.b,{title:"Query"})})}var D=H.d.h3(_||(_=Object(r.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  padding: 0 4px 0 0;\n  font-weight: normal;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),B=H.d.div(I||(I=Object(r.a)(["\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  padding: 0 4px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])))},374:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var r,c,a,o,i=t(4),s=t(150),u=t(0),l=t(3),d=t(6),f=t(128),b=t(126),p=t(2),O=Object(u.memo)(Object(u.forwardRef)((function(e,n){var t=e.searchTerm,r=e.onSearchTermChange,c=Object(u.useRef)(null),a=Object(u.useRef)(null),o=Object(s.a)((function(e){r(e.target.value.trim())}),250,[r]),i=Object(u.useCallback)((function(e){o(e),a.current.style.display=e.currentTarget.value.length>0?"flex":"none"}),[o]),l=Object(u.useCallback)((function(){var e;null===(e=c.current)||void 0===e||e.focus()}),[]);return Object(u.useEffect)((function(){var e=c.current,n=a.current;t&&t.length>0?(e.value=t,n.style.display="flex"):n.style.display="none"}),[t]),Object(p.jsx)(j,{ref:n,onClick:l,children:Object(p.jsxs)(h,{children:[Object(p.jsx)(x,{children:Object(p.jsx)(b.E,{})}),Object(p.jsx)(m,{ref:c,placeholder:"Find...",onChange:i}),Object(p.jsx)(f.c,{innerRef:a,onClick:function(){r(""),c.current.value="",a.current.style.display="none"},children:Object(p.jsx)(b.j,{})})]})})}))),j=l.d.div(r||(r=Object(i.a)(["\n  z-index: 1;\n  display: flex;\n  flex: 1 1 auto;\n  flex-direction: row;\n  align-items: center;\n"]))),x=l.d.div(c||(c=Object(i.a)(["\n  display: flex;\n  flex: 0 0 24px;\n  align-items: center;\n  justify-content: center;\n  transition: fill 0.2s ease;\n\n  & > svg {\n    fill: "," !important;\n  }\n"])),d.THEME_COLORS.components.fieldText),m=l.d.input(a||(a=Object(i.a)(["\n  flex: 1 1 auto;\n  border: 0 none;\n  padding: 0 9px;\n  color: ",";\n  background-color: ",";\n  transition: background-color 0.2s ease, color 0.2s ease;\n  user-select: initial;\n\n  ::placeholder {\n    color: ",";\n    transition: color 0.2s ease;\n  }\n"])),d.THEME_COLORS.components.fieldText,d.THEME_COLORS.components.field,d.THEME_COLORS.components.fieldPlaceholder),h=l.d.div(o||(o=Object(i.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  border-radius: 8px;\n  border: 1px solid ",";\n  padding-left: 5px;\n  height: 28px;\n  background-color: ",";\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n  cursor: text;\n\n  &:focus-within,\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      background-color: ",";\n      color: ",";\n\n      ::placeholder {\n        color: ",";\n      }\n    }\n  }\n\n  &:hover {\n    border-color: ",";\n    background-color: ",";\n\n    & > "," > svg {\n      fill: ",";\n    }\n\n    & > "," {\n      color: ",";\n      background-color: ",";\n    }\n  }\n"])),d.THEME_COLORS.components.fieldBorder,d.THEME_COLORS.components.field,d.THEME_COLORS.components.fieldHoverBorder,d.THEME_COLORS.components.fieldHover,x,d.THEME_COLORS.components.fieldHoverText,m,d.THEME_COLORS.components.fieldHover,d.THEME_COLORS.components.fieldHoverText,d.THEME_COLORS.components.fieldHoverPlaceholder,d.THEME_COLORS.components.fieldHoverBorder,d.THEME_COLORS.components.fieldHover,x,d.THEME_COLORS.components.fieldHoverText,m,d.THEME_COLORS.components.fieldHoverText,d.THEME_COLORS.components.fieldHover)}}]);