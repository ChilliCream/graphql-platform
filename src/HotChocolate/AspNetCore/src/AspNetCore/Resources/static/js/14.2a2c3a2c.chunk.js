(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[14],{1080:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return U}));var r=t(180),a=t(6),c=t(10),i=t.n(c),o=t(470),u=t(478),s=t(479),l=t(486),d=t(603),f=t(551),b=t(488),p=t(554),j=t(567),x=t(487),m=t(654),h=t(504),O=t(500),v=t(512),g=t(496),k=t(482),y=t(613),w=t(43),C=t(471),T=t(987),S=t(169),F=t(571),I=t(468),H=t(513),N=t(481),R=t(938),D=t(781);var E,P,L=t(91),U=function(){var e=Object(C.b)(),n=Object(C.c)(k.c.selectIsUserSignedIn),t=Object(C.c)(k.c.selectIsFetchingUser),r=Object(g.b)(v.b.selectActiveNodeId),c=Object(g.c)(F.c.selectSearchTerm),m=Object(w.useRef)([]),y=Object(w.useRef)(),S=function(e){return{comparer:function(e,n){var t="item"===e.metadata.kind?e.metadata.created:e.metadata.day,r="item"===n.metadata.kind?n.metadata.created:n.metadata.day;return t>r?-1:t<r?1:0},getNodes:function(n,t,r){return Object(R.a)(e.pipe(Object(T.a)(1),Object(D.a)((function(e){return h.a.isRoot(n)?Object(u.getHistoryDayGroupKeys)(r?function(e){return r({name:e})}:void 0).then((function(n){return n.map((function(n,t){var a=Object(N.h)(n);return Object(I.a)(Object(I.a)({},a),{},{expanded:e.includes(a.name)||!!r})}))})):h.a.getSegments(n).length>1||!t?Promise.resolve([]):Object(u.getHistoryByDay)(t.metadata.day,r?function(e){return r({name:e})}:void 0).then((function(e){return e.map((function(e){return Object(I.a)(Object(I.a)({},Object(N.i)(e)),{},{expanded:!1})}))}))}))))},validate:function(e,n){return Promise.resolve(H.a.fail("This tree is read-only."))}}}(Object(g.b)(F.c.selectExpandedFolders)),E=Object(O.a)(function(){var n=Object(o.a)(i.a.mark((function n(t,r,a){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),t.stopPropagation(),r.selected||(Object(h.f)(r.model),r.selected=!0),"group"!==r.metadata.kind){n.next=7;break}r.toggleExpanded(),n.next=9;break;case 7:return n.next=9,Object(u.getDocument)(r.metadata.id).then((function(n){n&&e(s.a.activateOrOpenDocument({documentId:r.metadata.id,isHistory:!0,isPreview:a}))}));case 9:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),25,[e]),P=function(e,n){return E(e,n,!0)},U=function(e,n){return E(e,n,!1)},J=function(e){var n=r.subscribe(function(){var n=Object(o.a)(i.a.mark((function n(t){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t=e.subscribeFor(function(){var n=Object(o.a)(i.a.mark((function n(t){var r,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=Object(a.a)(t),n.prev=1,r.s();case 3:if((c=r.n()).done){n.next=19;break}o=c.value,n.t0=o.kind,n.next="collapsed"===n.t0?8:"expanded"===n.t0?11:"reset-filter"===n.t0?13:"set-filter"===n.t0?15:17;break;case 8:return n.next=10,M(o.node);case 10:return n.abrupt("break",17);case 11:return V(o.node),n.abrupt("break",17);case 13:case 15:return G(e),n.abrupt("break",17);case 17:n.next=3;break;case 19:n.next=24;break;case 21:n.prev=21,n.t1=n.catch(1),r.e(n.t1);case 24:return n.prev=24,r.f(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})));return function(e){return n.apply(this,arguments)}}(),"collapsed","expanded","reset-filter","set-filter");c&&c.length>0&&e.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(c.toLowerCase())})),m.current.push((function(){return n.unsubscribe()})),m.current.push((function(){return t()})),y.current=e},M=function(n){var t=n.name;e(F.a.collapseFolder({folderName:t}))},V=function(n){var t=n.name;e(F.a.expandFolder({folderName:t}))},q=function(){var n=Object(o.a)(i.a.mark((function n(t){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(F.a.changeHistorySearchTerm({searchTerm:t})),!y.current){n.next=9;break}if(!(t.length>0)){n.next=7;break}return n.next=5,y.current.setFilter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));case 5:n.next=9;break;case 7:return n.next=9,y.current.resetFilter();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),G=function(e){r.pipe(Object(T.a)(1)).subscribe(function(){var n=Object(o.a)(i.a.mark((function n(t){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(e,t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},K=function(){e(k.a.signIn())},Q=function(e){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(A,{title:e.name,children:e.name}),Object(L.jsx)(B,{title:e.metadata.time,children:e.metadata.time}),"group"===e.metadata.kind?Object(L.jsx)(L.Fragment,{}):W(e)]})},W=function(e){var n,t,r;switch(e.metadata.operationStatus){case"cancelled":n="yellow",t=Object(L.jsx)(j.a,{}),r="Operation cancelled";break;case"failed":n="red",t=Object(L.jsx)(j.b,{}),r="Operation failed";break;default:n="green",t=Object(L.jsx)(j.e,{}),r="Operation succeeded"}return Object(L.jsx)(h.e,{color:n,title:r,children:t})};function X(e,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(o.a)(i.a.mark((function e(n,t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}if(!(r=n.find((function(e){return e.metadata&&e.metadata.id&&e.metadata.id===t})))){e.next=8;break}return r.selected||(Object(h.f)(n),r.selected=!0),e.next=6,r.ensureVisible();case 6:e.next=9;break;case 8:Object(h.f)(n);case 9:e.next=12;break;case 11:Object(h.f)(n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.useEffect)((function(){var e=m.current;return function(){for(var n;n=e.pop();)n();y.current=void 0}}),[]),Object(L.jsx)(b.k,{children:Object(L.jsxs)(b.a,{children:[Object(L.jsxs)(b.c,{children:[Object(L.jsx)(b.i,{children:"History"}),Object(L.jsx)(b.h,{}),Object(L.jsx)(l.c,{disabled:!n,title:"Clear History",onClick:function(){e(F.a.clearHistory())},children:Object(L.jsx)(x.i,{})})]}),Object(L.jsx)(d.a,{searchTerm:c,onSearchTermChange:q}),t?Object(L.jsx)(f.a,{}):n?Object(L.jsx)(b.j,{children:Object(L.jsx)(h.c,{id:"history",itemHeight:h.b,provider:S,onInitialized:J,children:function(e){return Object(L.jsx)(h.d,{id:e.id,depth:e.depth,name:e.name,path:e.path,expanded:e.expanded,expandable:e.expandable,node:e,onClick:P,onDoubleClick:U,renderIcon:z,renderName:Q})}})}):Object(L.jsx)(p.a,{title:"Sign in to access history data",icon:Object(L.jsx)(x.c,{}),children:Object(L.jsx)(l.a,{onClick:K,primary:!0,children:"Sign in"})})]})})};function z(e){return"group"===e.metadata.kind?Object(L.jsx)(h.e,{color:"yellow",children:Object(L.jsx)(x.e,{})}):Object(L.jsx)(h.e,{children:e.metadata.operationType===y.b.MUTATION?Object(L.jsx)(m.a,{title:"Mutation"}):e.metadata.operationType===y.b.SUBSCRIPTION?Object(L.jsx)(m.c,{title:"Subscription"}):Object(L.jsx)(m.b,{title:"Query"})})}var A=S.d.h3(E||(E=Object(r.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  padding: 0 4px 0 0;\n  font-weight: normal;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),B=S.d.div(P||(P=Object(r.a)(["\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  padding: 0 4px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])))},603:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r,a,c,i,o=t(180),u=t(500),s=t(43),l=t(169),d=t(486),f=t(487),b=t(91),p=Object(s.memo)(Object(s.forwardRef)((function(e,n){var t=e.searchTerm,r=e.onSearchTermChange,a=Object(s.useRef)(null),c=Object(s.useRef)(null),i=Object(u.a)((function(e){r(e.target.value.trim())}),250,[r]),o=Object(s.useCallback)((function(e){i(e),c.current.style.display=e.currentTarget.value.length>0?"flex":"none"}),[i]),l=Object(s.useCallback)((function(){var e;null===(e=a.current)||void 0===e||e.focus()}),[]);return Object(s.useEffect)((function(){var e=a.current,n=c.current;t&&t.length>0?(e.value=t,n.style.display="flex"):n.style.display="none"}),[t]),Object(b.jsx)(j,{ref:n,onClick:l,children:Object(b.jsxs)(h,{children:[Object(b.jsx)(x,{children:Object(b.jsx)(f.x,{})}),Object(b.jsx)(m,{ref:a,placeholder:"Find...",onChange:o}),Object(b.jsx)(d.c,{ref:c,onClick:function(){r(""),a.current.value="",c.current.style.display="none"},children:Object(b.jsx)(f.j,{})})]})})}))),j=l.d.div(r||(r=Object(o.a)(["\n  z-index: 1;\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: row;\n  align-items: center;\n  height: 44px;\n  max-height: 44px;\n  padding: 0 8px;\n"]))),x=l.d.div(a||(a=Object(o.a)(["\n  display: flex;\n  flex: 0 0 24px;\n  align-items: center;\n  justify-content: center;\n\n  & > svg {\n    fill: "," !important;\n  }\n"])),(function(e){return e.theme.accentColor1})),m=l.d.input(c||(c=Object(o.a)(["\n  flex: 1 1 auto;\n  border: 0 none;\n  padding: 0 9px;\n  color: ",";\n  background-color: ",";\n  transition: background-color 0.2s ease;\n  user-select: initial;\n"])),(function(e){return e.theme.accentColor1}),(function(e){return e.theme.accentColor4})),h=l.d.div(i||(i=Object(o.a)(["\n  display: flex;\n  flex: 1 1 auto;\n  align-items: center;\n  border-radius: 4px;\n  border: 1px solid ",";\n  padding: 0 5px;\n  height: 30px;\n  background-color: ",";\n  transition: background-color 0.2s ease, border-color 0.2s ease,\n    box-shadow 0.2s ease;\n  cursor: text;\n\n  &:focus-within {\n    border-color: ",";\n    background-color: ",";\n    box-shadow: 0 0 4px 0 ",";\n\n    & > "," {\n      background-color: ",";\n    }\n  }\n\n  &:hover {\n    background-color: ",";\n\n    & > "," {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.accentColor3}),(function(e){return e.theme.accentColor4}),(function(e){return e.theme.mainColor}),(function(e){return e.theme.mainColor}),(function(e){return e.theme.accentColor1}),m,(function(e){return e.theme.mainColor}),(function(e){return e.theme.mainColor}),m,(function(e){return e.theme.mainColor}))},938:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(606),a=Object(r.a)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function c(e,n){var t="object"===typeof n;return new Promise((function(r,c){var i,o=!1;e.subscribe({next:function(e){i=e,o=!0},error:c,complete:function(){o?r(i):t?r(n.defaultValue):c(new a)}})}))}}}]);