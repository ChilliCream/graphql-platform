"use strict";(self.webpackChunkbanana_cake_pop=self.webpackChunkbanana_cake_pop||[]).push([[996],{36466:function(n,e,t){t.d(e,{N:function(){return r},R:function(){return u}});var r="state",u="user-session"},40712:function(n,e,t){t.d(e,{NY:function(){return c.N},Ke:function(){return f},W5:function(){return o},cw:function(){return d},Np:function(){return s},Sm:function(){return p}});var r=t(15861),u=t(87757),a=t.n(u),i=t(34502),c=t(36466);function o(){return(0,i.aU)("app",c.N)}function s(n){return l(c.N,n)}function f(){return(0,i.Ks)("app",c.R)}function d(){return(0,i.aU)("app",c.R)}function p(n){return l(c.R,n)}function l(n,e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(a().mark((function n(e,t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.bA)().then((function(n){return n.put("app",t,e)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},24329:function(n,e,t){t.d(e,{Ix:function(){return v},MK:function(){return b},Sr:function(){return h},UN:function(){return i},Wr:function(){return k},ZF:function(){return p},_2:function(){return d},dX:function(){return a},eX:function(){return u},kj:function(){return r},ql:function(){return l},qm:function(){return m},rR:function(){return x},rf:function(){return w},sH:function(){return c},tZ:function(){return f},u2:function(){return s},uM:function(){return o}});var r="Authorization",u="Bearer",a="authorization_code",i="implicit",c="password",o="client_credentials",s="refresh_token",f="code",d="id_token",p="token",l="id_token token",h="S256",x="plain",v="no-auth",k="bearer",b="oauth2",m="basic",w="apollo"},16118:function(n,e,t){t.d(e,{Qz:function(){return p},VN:function(){return d},dy:function(){return f},qV:function(){return l}});var r=t(40918),u=t(24329),a={kind:u.Ix,text:"No Auth",createAuthHeaderValue:function(){return null}},i={kind:u.qm,text:"Basic",createAuthHeaderValue:function(n){var e=n.basicOptions;return e?d(e.username,e.password):null}},c={kind:u.Wr,text:"Bearer",createAuthHeaderValue:function(n){var e=n.bearerOptions;return e?p(e.token,e.prefix):null}},o={kind:u.MK,text:"OAuth 2",createAuthHeaderValue:function(n){var e,t=n.oAuth2Options;return null!==t&&void 0!==t&&null!==(e=t.token)&&void 0!==e&&e.accessToken?p(t.token.accessToken,t.prefix):null}},s={"no-auth":a,basic:i,bearer:c,oauth2:o},f=[a,i,c,o];function d(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf8",u="".concat(null!==n&&void 0!==n?n:"",":").concat(null!==e&&void 0!==e?e:""),a=r.Buffer.from(u,t).toString("base64");return"Basic ".concat(a)}function p(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.eX;return"".concat(null!==e&&void 0!==e&&e.length?e:u.eX," ").concat(n)}function l(n){return s[n.activeAuthenticationKind].createAuthHeaderValue(n)}},92360:function(n,e,t){t.d(e,{Bw:function(){return M},FI:function(){return v},Fj:function(){return V},IJ:function(){return X},Kd:function(){return y},Me:function(){return I},OE:function(){return m},cE:function(){return G},dZ:function(){return Q},gU:function(){return C},iH:function(){return Z},kX:function(){return g},qA:function(){return S},qH:function(){return b},yZ:function(){return P}});var r=t(29439),u=t(93433),a=t(1413),i=t(15861),c=t(16296),o=t(87757),s=t.n(o),f=t(34502),d=t(88656),p=t(59859),l=t(90524),h=t(19614),x=t(32789);function v(n,e,t){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)(s().mark((function n(e,t,r){var u,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return u=n.sent,a=u.transaction("document","readwrite"),n.next=6,b(a.store,e,t,r,!0);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(n,e,t,r,u){return(0,f.i8)(n,e,(function(n){return V((0,a.Z)((0,a.Z)({},n),{},{id:t,isDraft:!1,isNew:null!==u&&void 0!==u&&u,name:r||n.name}))}))}function m(n,e,t,r,u){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)(s().mark((function n(e,t,r,u,a){var i,c,o,d,l,x,v;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return i=n.sent,c=i.transaction(["document","node","workspace-sync"],"readwrite"),o=c.objectStore("document"),d=c.objectStore("node"),l=c.objectStore("workspace-sync"),x=W(e,u,!1,a),n.next=10,(0,p.jb)(d,u,e,t,r);case 10:return v=n.sent,n.next=13,Promise.all([o.put(x),(0,h.NN)(l,{id:e,kind:"create",document:x,documentNode:v}),c.done]);case 13:return n.abrupt("return",x);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(n,e,t){var r=W(n,e,!0,t);return(0,f.XF)("document",r).then((function(){return r}))}function Z(n,e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)(s().mark((function n(e,t){var u,a,i,c,o,p,x,v,k,b;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return u=n.sent,a=u.transaction(["document","node","variable-json-schema","workspace-sync"],"readwrite"),i=a.objectStore("document"),c=a.objectStore("node"),o=a.objectStore("workspace-sync"),p=a.objectStore("variable-json-schema"),n.next=10,Promise.all([i.get(e),T(c,e)]);case 10:if(x=n.sent,v=(0,r.Z)(x,2),k=v[0],b=v[1],k){n.next=16;break}throw new Error('Document with id "'.concat(e,'" does not exist'));case 16:if(!b||!t){n.next=21;break}return n.next=19,Promise.all([g(i,e),(0,d.pS)(c,e,t),(0,l.uO)(p,e),(0,h.NN)(o,{id:e,kind:"delete",remoteId:b.remoteId,document:k,documentNode:b}),a.done]);case 19:n.next=23;break;case 21:return n.next=23,Promise.all([g(i,e),(0,l.uO)(p,e),a.done]);case 23:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(n,e){return j.apply(this,arguments)}function j(){return(j=(0,i.Z)(s().mark((function n(e,t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([e.delete(R(t)),e.delete(t)]);case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function I(n){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)(s().mark((function n(e){var t,u,i,c,o,d,p,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return t=n.sent,u=t.transaction(["document","node"],"readonly"),i=u.objectStore("document"),c=u.objectStore("node"),n.next=8,Promise.all([i.get(e),T(c,e)]);case 8:if(o=n.sent,d=(0,r.Z)(o,2),p=d[0],l=d[1],!p){n.next=14;break}return n.abrupt("return",(0,a.Z)((0,a.Z)({},p),{},{version:null===l||void 0===l?void 0:l.version}));case 14:return n.abrupt("return",void 0);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function S(n){return O.apply(this,arguments)}function O(){return(O=(0,i.Z)(s().mark((function n(e){var t,r,u,a,i,o,d,p,l,h,x,v,k;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:t=n.sent,r=t.transaction("document","readonly"),u=new Map,a=!1,i=!1,n.prev=7,d=(0,c.Z)(r.store.iterate());case 9:return n.next=11,d.next();case 11:if(!(a=!(p=n.sent).done)){n.next=18;break}l=p.value,h=l.value,x=h.id,v=h.name,k=h.hash,e.includes(x)&&u.set(x,{id:x,exists:!0,hash:k,name:v});case 15:a=!1,n.next=9;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(7),i=!0,o=n.t0;case 24:if(n.prev=24,n.prev=25,!a||null==d.return){n.next=29;break}return n.next=29,d.return();case 29:if(n.prev=29,!i){n.next=32;break}throw o;case 32:return n.finish(29);case 33:return n.finish(24);case 34:return n.abrupt("return",e.map((function(n){var e;return null!==(e=u.get(n))&&void 0!==e?e:{id:n,exists:!1}})));case 35:case"end":return n.stop()}}),n,null,[[7,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function P(n){return K.apply(this,arguments)}function K(){return(K=(0,i.Z)(s().mark((function n(e){var t,u,i,c,o,d,p,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return t=n.sent,u=t.transaction(["document","node"],"readwrite"),i=u.objectStore("document"),c=u.objectStore("node"),n.next=8,Promise.all([i.get(e).then((function(n){return Promise.all([D(i,n),u.done])})).then((function(n){return(0,r.Z)(n,1)[0]})),T(c,e)]);case 8:if(o=n.sent,d=(0,r.Z)(o,2),p=d[0],l=d[1],!p){n.next=14;break}return n.abrupt("return",(0,a.Z)((0,a.Z)({},p),{},{version:null===l||void 0===l?void 0:l.version}));case 14:return n.abrupt("return",void 0);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function D(n,e){return q.apply(this,arguments)}function q(){return(q=(0,i.Z)(s().mark((function n(e,t){var r,u,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t)||!r.isDraft&&!r.isNew){n.next=12;break}return n.next=4,e.delete(r.id);case 4:return u=R(r.id),n.next=7,e.get(u);case 7:if(!(i=n.sent)){n.next=12;break}return r=V((0,a.Z)((0,a.Z)({},i),{},{id:r.id,isDraft:!1})),n.next=12,Promise.all([e.put(r),e.delete(u)]);case 12:return n.abrupt("return",r);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function Q(n){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)(s().mark((function n(e){var t,u,i,c,o,d,p,l,x;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return t=n.sent,u=t.transaction(["document","node","workspace-sync"],"readwrite"),i=u.objectStore("document"),c=u.objectStore("node"),o=u.objectStore("workspace-sync"),n.next=9,Promise.all([_(i,e),T(c,e)]);case 9:if(d=n.sent,p=(0,r.Z)(d,2),l=p[0],x=p[1],!l||!x){n.next=17;break}return n.next=16,Promise.all([(0,h.NN)(o,{id:l.id,kind:"update",remoteId:x.remoteId,document:l,documentNode:x}),u.done]);case 16:return n.abrupt("return",(0,a.Z)((0,a.Z)({},l),{},{version:null===x||void 0===x?void 0:x.version}));case 17:return n.next=19,u.done;case 19:return n.abrupt("return",void 0);case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function _(n,e,t){return F.apply(this,arguments)}function F(){return(F=(0,i.Z)(s().mark((function n(e,t,r){var u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get(t);case 2:if(!(u=n.sent)||!u.isDraft&&!u.isNew){n.next=8;break}return u=V((0,a.Z)((0,a.Z)({},u),{},{isDraft:!1,isNew:!1,name:null!==r&&void 0!==r?r:u.name})),n.next=7,Promise.all([e.put(u),e.delete(R(t))]);case 7:return n.abrupt("return",u);case 8:return n.abrupt("return",void 0);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function M(n,e,t,r,u){return E.apply(this,arguments)}function E(){return E=(0,i.Z)(s().mark((function n(e,t,u,a,c){var o,d,l,v,k,m,w,y;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return o=n.sent,d=o.transaction(["document","node","workspace-sync"],"readwrite"),l=d.objectStore("document"),v=d.objectStore("node"),k=d.objectStore("workspace-sync"),n.next=9,Promise.all([c?b(l,e,(0,x.A0)(),t).then((function(n){return n?l.get(e).then((function(e){return D(l,e).then((0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,(0,p.jb)(v,n.name,n.id,a,u);case 3:return t=e.sent,e.next=6,(0,h.NN)(k,{id:n.id,kind:"create",document:n,documentNode:t});case 6:return e.abrupt("return",{document:n,documentNode:t});case 7:return e.abrupt("return",Promise.reject("Document does not exist"));case 8:case"end":return e.stop()}}),e)}))))})):Promise.reject("Document does not exist")})):_(l,e,t).then(function(){var n=(0,i.Z)(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return n.next=3,(0,p.jb)(v,e.name,e.id,a,u);case 3:return t=n.sent,n.next=6,(0,h.NN)(k,{id:e.id,kind:"create",document:e,documentNode:t});case 6:return n.abrupt("return",{document:e,documentNode:t});case 7:return n.abrupt("return",Promise.reject("Document does not exist"));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),d.done]);case 9:return m=n.sent,w=(0,r.Z)(m,1),y=w[0],n.abrupt("return",y);case 13:case"end":return n.stop()}}),n)}))),E.apply(this,arguments)}function X(n,e){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)(s().mark((function n(e,t){var r,u,i,c,o,p,l,x,v;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return r=n.sent,u=r.transaction(["document","node","workspace-sync"],"readwrite"),i=u.objectStore("document"),c=u.objectStore("node"),o=u.objectStore("workspace-sync"),n.next=9,i.get(e);case 9:if(!(p=n.sent)){n.next=30;break}return p=V((0,a.Z)((0,a.Z)({},p),{},{name:t})),n.next=14,i.put(p);case 14:if(p.isNew){n.next=23;break}return n.next=17,(0,d.Q4)(c,e,t);case 17:if(l=n.sent){n.next=20;break}throw new Error('Document node with id "'.concat(e,'" does not exist'));case 20:return p=(0,a.Z)((0,a.Z)({},p),{},{version:null===l||void 0===l?void 0:l.version}),n.next=23,(0,h.NN)(o,{id:e,kind:"update",remoteId:l.remoteId,document:p,documentNode:l});case 23:return x=R(e),n.next=26,i.get(x);case 26:if(!(v=n.sent)){n.next=30;break}return n.next=30,i.put(V((0,a.Z)((0,a.Z)({},v),{},{name:t})));case 30:return n.next=32,u.done;case 32:return n.abrupt("return",p);case 33:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function C(n,e){return B.apply(this,arguments)}function B(){return(B=(0,i.Z)(s().mark((function n(e,t){var u,i,c,o,d,p,l,h;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return u=n.sent,i=u.transaction(["document","node"],"readwrite"),c=i.objectStore("document"),o=i.objectStore("node"),n.next=8,Promise.all([z(c,e,t),T(o,e),i.done]);case 8:if(d=n.sent,p=(0,r.Z)(d,2),l=p[0],h=p[1],!l){n.next=14;break}return n.abrupt("return",(0,a.Z)((0,a.Z)({},l),{},{version:null===h||void 0===h?void 0:h.version}));case 14:return n.abrupt("return",void 0);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function z(n,e,t){return J.apply(this,arguments)}function J(){return(J=(0,i.Z)(s().mark((function n(e,t,r){var u,i,c,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get(t);case 2:if(!(u=n.sent)){n.next=23;break}if(i=R(t),!u.isDraft){n.next=18;break}return n.next=8,e.get(i);case 8:if(c=n.sent,u=V((0,a.Z)((0,a.Z)({},r(u)),{},{id:t})),!c||c.hash!==u.hash){n.next=14;break}return u=V((0,a.Z)((0,a.Z)({},c),{},{id:t,isDraft:!1})),n.next=14,e.delete(i);case 14:return n.next=16,e.put(u);case 16:n.next=23;break;case 18:if(o=V((0,a.Z)((0,a.Z)({},u),{},{id:i})),u=V((0,a.Z)((0,a.Z)({},r(u)),{},{id:t,isDraft:!0})),o.hash===u.hash){n.next=23;break}return n.next=23,Promise.all([e.put(o),e.put(u)]);case 23:return n.abrupt("return",u);case 24:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function V(n){var e=(0,x.js)(JSON.stringify((0,a.Z)((0,a.Z)({},n),{},{id:"",name:"",hash:"",isDraft:!1})));return(0,a.Z)((0,a.Z)({},n),{},{hash:e})}function W(n,e,t,r){var a,i,c,o;return V(r?{id:n,name:e,isDraft:!1,isNew:t,hash:"",body:null!==(a=r.graphQLDocument)&&void 0!==a?a:"",activeConnectionKind:"http",httpConnection:{endpoint:(0,x.O_)(r.useBrowserUrlAsEndpoint,r.endpoint),headers:null!==(i=r.httpHeaders&&Object.keys(r.httpHeaders).reduce((function(n,e){return n=Array.isArray(r.httpHeaders[e])?[].concat((0,u.Z)(n),(0,u.Z)(r.httpHeaders[e].map((function(n,e){return{name:n,value:r.httpHeaders[n][e],enabled:!0}})))):[{name:e,value:r.httpHeaders[e],enabled:!0}]}),[]))&&void 0!==i?i:void 0,includeCookies:null!==(c=r.includeCookies)&&void 0!==c&&c,useGet:null!==(o=r.useGet)&&void 0!==o&&o,useTunnel:!1}}:{id:n,name:e,isDraft:!1,isNew:t,hash:"",body:"",activeConnectionKind:"http",httpConnection:{endpoint:"",includeCookies:!1,useGet:!1,useTunnel:!1}})}function R(n){return n.endsWith("-origin")?n:n+"-origin"}function T(n,e){return n.get(e).then((function(n){return"document"===(null===n||void 0===n?void 0:n.kind)?n:void 0}))}function G(n){var e;return null!==(e=n.httpConnection)&&void 0!==e?e:{endpoint:"",includeCookies:!1,useGet:!1,useTunnel:!1}}},60251:function(n,e,t){t.d(e,{Bw:function(){return r.Bw},FI:function(){return r.FI},Fj:function(){return r.Fj},IJ:function(){return r.IJ},Ix:function(){return u.Ix},Kd:function(){return r.Kd},MK:function(){return u.MK},Me:function(){return r.Me},OE:function(){return r.OE},Qz:function(){return a.Qz},Sr:function(){return u.Sr},UN:function(){return u.UN},VN:function(){return a.VN},Wr:function(){return u.Wr},ZF:function(){return u.ZF},_2:function(){return u._2},cE:function(){return r.cE},dX:function(){return u.dX},dZ:function(){return r.dZ},dy:function(){return a.dy},gU:function(){return r.gU},iH:function(){return r.iH},kX:function(){return r.kX},kj:function(){return u.kj},qA:function(){return r.qA},qV:function(){return a.qV},ql:function(){return u.ql},qm:function(){return u.qm},rR:function(){return u.rR},rf:function(){return u.rf},sH:function(){return u.sH},tZ:function(){return u.tZ},u2:function(){return u.u2},uM:function(){return u.uM},yZ:function(){return r.yZ}});var r=t(92360),u=t(24329),a=t(16118)},34502:function(n,e,t){t.d(e,{Ks:function(){return o},XF:function(){return p},aU:function(){return f},bA:function(){return v},i8:function(){return h}});var r=t(15861),u=t(87757),a=t.n(u),i=t(29725),c=(t(40712),t(69078));function o(n,e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(a().mark((function n(e,t){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v();case 2:return r=n.sent,n.next=5,r.delete(e,t);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(n,e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(a().mark((function n(e,t){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v();case 2:return r=n.sent,n.next=5,r.get(e,t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(n,e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(a().mark((function n(e,t){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v();case 2:return r=n.sent,n.next=5,r.put(e,t);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n,e,t){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(a().mark((function n(e,t,r){var u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get(t);case 2:if(!(u=n.sent)){n.next=8;break}if(!(u=r(u))){n.next=8;break}return n.next=8,e.put(u);case 8:return n.abrupt("return",u);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(){return(0,i.X3)("banana-cake-pop",2,{upgrade:function(n,e,t,r){for(var u=0;u<c.X.length;u++)c.X[u].version>=e&&c.X[u].up(n,r)}})}},8415:function(n,e,t){t.d(e,{QK:function(){return h},_I:function(){return f},nu:function(){return p}});var r=t(29439),u=t(15861),a=t(87757),i=t.n(a),c=t(34502),o=t(88656),s=t(32789);function f(n){return d.apply(this,arguments)}function d(){return(d=(0,u.Z)(i().mark((function n(e){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.bA)();case 2:return t=n.sent,r=t.transaction(["file","node"],"readwrite"),n.next=6,Promise.all([r.objectStore("file").delete(e),r.objectStore("node").delete(e),r.done]);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return l.apply(this,arguments)}function l(){return l=(0,u.Z)(i().mark((function n(){var e,t,r,u,a,o=arguments;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.bA)();case 2:for(e=n.sent,t=e.transaction("file","readonly"),r=o.length,u=new Array(r),a=0;a<r;a++)u[a]=o[a];return n.abrupt("return",Promise.all(u.map((function(n){return t.store.get(n).then((function(e){return{id:n,content:e}}))}))));case 6:case"end":return n.stop()}}),n)}))),l.apply(this,arguments)}function h(n,e){return x.apply(this,arguments)}function x(){return x=(0,u.Z)(i().mark((function n(e,t){var u,a,f,d,p,l,h,x,v,k,b,m,w,y,Z=arguments;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.bA)();case 2:for(u=n.sent,a=u.transaction(["file","node"],"readwrite"),f=a.objectStore("file"),d=a.objectStore("node"),p=[],l=Z.length,h=new Array(l>2?l-2:0),x=2;x<l;x++)h[x-2]=Z[x];for(v=function(){var n=b[k],r=n.name,u=n.content,a=(0,s.Mc)("file");p.push(Promise.all([(0,o.B0)(d,r,a,e,t,u.size),f.put(u,a)]).then((function(){return{id:a,workspaceId:e,name:r,contentSize:u.size}})))},k=0,b=h;k<b.length;k++)v();return n.next=12,Promise.all([Promise.all(p),a.done]);case 12:return m=n.sent,w=(0,r.Z)(m,1),y=w[0],n.abrupt("return",y);case 16:case"end":return n.stop()}}),n)}))),x.apply(this,arguments)}},13324:function(n,e,t){t.d(e,{QK:function(){return r.QK},_I:function(){return r._I},nu:function(){return r.nu}});var r=t(8415)},18063:function(n,e,t){t.d(e,{Kj:function(){return v},QQ:function(){return h},nJ:function(){return b},xU:function(){return p}});var r=t(29439),u=t(1413),a=t(15861),i=t(16296),c=t(87757),o=t.n(c),s=t(92360),f=t(34502),d=t(32789);function p(n){return l.apply(this,arguments)}function l(){return l=(0,a.Z)(o().mark((function n(e){var t,i,c,p,l,h,x,v,k,b,m,w,y,Z;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:return t=n.sent,i=t.transaction(["document","history"],"readwrite"),c=i.objectStore("history"),p=(0,d.zO)(),l=(0,d.sU)(p),h=e.documentId,x=e.historyId,v=e.operationStatus,k=e.operationName,b=e.operationType,n.next=10,(0,f.i8)(c,x,(function(n){return(0,u.Z)((0,u.Z)({},n),{},{operationStatus:v})}));case 10:if(!(m=n.sent)){n.next=15;break}return n.next=14,i.done;case 14:return n.abrupt("return",m);case 15:return n.next=17,Promise.all([(0,s.qH)(i.objectStore("document"),h,x).then(function(){var n=(0,a.Z)(o().mark((function n(e){var t,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return r=k&&k.length>0?"".concat(k," [").concat(e.name,"]"):e.name,t={id:x,name:r,originId:h,created:p,day:l,operationStatus:v,operationName:k,operationType:b},n.next=5,c.put(t);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),i.done]);case 17:return w=n.sent,y=(0,r.Z)(w,1),Z=y[0],n.abrupt("return",Z);case 21:case"end":return n.stop()}}),n)}))),l.apply(this,arguments)}function h(n){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function n(e){var t,r,u,a,c,d,p,l,h,x,v;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:t=n.sent,r=t.transaction("history","readonly"),u=[],a=!1,c=!1,n.prev=7,p=(0,i.Z)(r.store.iterate());case 9:return n.next=11,p.next();case 11:if(!(a=!(l=n.sent).done)){n.next=18;break}h=l.value,x=h.value,v=x.id,u.push(v);case 15:a=!1,n.next=9;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(7),c=!0,d=n.t0;case 24:if(n.prev=24,n.prev=25,!a||null==p.return){n.next=29;break}return n.next=29,p.return();case 29:if(n.prev=29,!c){n.next=32;break}throw d;case 32:return n.finish(29);case 33:return n.finish(24);case 34:return n.next=36,Promise.all([t.clear("history").then((function(){u.forEach((function(n){return(0,s.iH)(n,e)}))})),r.done]);case 36:case"end":return n.stop()}}),n,null,[[7,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function v(n,e){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(o().mark((function n(e,t){var r,u,a,c,s,d,p,l,h,x,v;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:r=n.sent,u=r.transaction("history","readonly"),a=u.store.index("day"),c=[],s=!1,d=!1,n.prev=8,l=(0,i.Z)(a.iterate());case 10:return n.next=12,l.next();case 12:if(!(s=!(h=n.sent).done)){n.next=19;break}x=h.value,(v=x.value).day!==e||t&&!t(v.name.toLowerCase())||c.push(v);case 16:s=!1,n.next=10;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(8),d=!0,p=n.t0;case 25:if(n.prev=25,n.prev=26,!s||null==l.return){n.next=30;break}return n.next=30,l.return();case 30:if(n.prev=30,!d){n.next=33;break}throw p;case 33:return n.finish(30);case 34:return n.finish(25);case 35:return n.abrupt("return",c);case 36:case"end":return n.stop()}}),n,null,[[8,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function b(n){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(o().mark((function n(e){var t,r,u,a,c,s,d,p,l,h,x,v,k;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.bA)();case 2:t=n.sent,r=t.transaction("history","readonly"),u=r.store.index("day"),a=[],c=!1,s=!1,n.prev=8,p=(0,i.Z)(u.iterate());case 10:return n.next=12,p.next();case 12:if(!(c=!(l=n.sent).done)){n.next=19;break}h=l.value,x=h.value,v=x.day,k=x.name,a.includes(v)||e&&!e(k.toLowerCase())||a.push(v);case 16:c=!1,n.next=10;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(8),s=!0,d=n.t0;case 25:if(n.prev=25,n.prev=26,!c||null==p.return){n.next=30;break}return n.next=30,p.return();case 30:if(n.prev=30,!s){n.next=33;break}throw d;case 33:return n.finish(30);case 34:return n.finish(25);case 35:return n.abrupt("return",a.sort((function(n,e){return n<e?1:n>e?-1:0})));case 36:case"end":return n.stop()}}),n,null,[[8,21,25,35],[26,,30,34]])})))).apply(this,arguments)}},71941:function(n,e,t){t.d(e,{Kj:function(){return r.Kj},QQ:function(){return r.QQ},nJ:function(){return r.nJ},xU:function(){return r.xU}});var r=t(18063)},996:function(n,e,t){t.d(e,{Bg:function(){return c.Bg},Bw:function(){return u.Bw},Dv:function(){return c.Dv},FG:function(){return s.FG},FI:function(){return u.FI},Fj:function(){return u.Fj},IJ:function(){return u.IJ},IK:function(){return c.IK},Ix:function(){return u.Ix},Kd:function(){return u.Kd},Ke:function(){return r.Ke},Kj:function(){return i.Kj},MK:function(){return u.MK},Me:function(){return u.Me},NY:function(){return r.NY},Np:function(){return r.Np},OE:function(){return u.OE},Oy:function(){return s.Oy},QK:function(){return a.QK},QQ:function(){return i.QQ},Qz:function(){return u.Qz},Sm:function(){return r.Sm},Sr:function(){return u.Sr},UN:function(){return u.UN},VN:function(){return u.VN},W5:function(){return r.W5},Wr:function(){return u.Wr},Y5:function(){return o.Y5},ZF:function(){return u.ZF},_0:function(){return c._0},_2:function(){return u._2},_I:function(){return a._I},cE:function(){return u.cE},cw:function(){return r.cw},dX:function(){return u.dX},dZ:function(){return u.dZ},dy:function(){return u.dy},gU:function(){return u.gU},iH:function(){return u.iH},kj:function(){return u.kj},mI:function(){return c.mI},nJ:function(){return i.nJ},nu:function(){return a.nu},qA:function(){return u.qA},qQ:function(){return c.qQ},qV:function(){return u.qV},ql:function(){return u.ql},qm:function(){return u.qm},rR:function(){return u.rR},rf:function(){return u.rf},sH:function(){return u.sH},tZ:function(){return u.tZ},u2:function(){return u.u2},uD:function(){return c.uD},uM:function(){return u.uM},w:function(){return c.w},xU:function(){return i.xU},yZ:function(){return u.yZ}});var r=t(40712),u=t(60251),a=t(13324),i=t(71941),c=t(88656),o=t(3116),s=(t(91841),t(90524));t(25291)},59859:function(n,e,t){t.d(e,{_0:function(){return l},jb:function(){return f},uX:function(){return p}});var r=t(15861),u=t(87757),a=t.n(u),i=t(60251),c=t(25291),o=t(32789),s=t(15189);function f(n,e,t,r,u,a,i,c){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(a().mark((function n(e,t,r,u,i,c,f,d){var p,l,h;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===d||void 0===d){n.next=4;break}n.t0=d,n.next=7;break;case 4:return n.next=6,(0,s._X)(e,r,u,i);case 6:n.t0=n.sent;case 7:return p=n.t0,l=(0,o.zO)(),h={id:r,parentId:null!==i&&void 0!==i?i:u,workspaceId:u,remoteId:c,version:f,name:t,path:p,kind:"document",created:l,modified:l},n.next=12,e.put(h);case 12:return n.abrupt("return",h);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(n,e,t){return n.get(t.id).then((function(r){return r?Promise.all([(0,i.kX)(n,t.id),(0,c.NN)(e,{id:t.id,kind:"delete",document:r,documentNode:t,remoteId:t.remoteId})]).then((function(){return{id:t.id,kind:t.kind}})):Promise.resolve({id:t.id,kind:t.kind})}))}function l(n){return(0,s.Mk)(n).then((function(n){return"document"===(null===n||void 0===n?void 0:n.kind)?n:void 0}))}},318:function(n,e,t){t.d(e,{B0:function(){return o},do:function(){return f}});var r=t(15861),u=t(87757),a=t.n(u),i=t(32789),c=t(15189);function o(n,e,t,r,u,a){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(a().mark((function n(e,t,r,u,o,s){var f,d,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c._X)(e,r,u,o);case 2:return f=n.sent,d=(0,i.zO)(),p={id:r,parentId:null!==o&&void 0!==o?o:u,workspaceId:u,name:t,path:f,kind:"file",created:d,modified:d,contentSize:s},n.next=7,e.put(p);case 7:return n.abrupt("return",p);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(n,e){return n.get(e.id).then((function(t){return t?n.delete(e.id).then((function(){return{id:e.id,kind:e.kind}})):Promise.resolve({id:e.id,kind:e.kind})}))}},58070:function(n,e,t){t.d(e,{mI:function(){return v},qQ:function(){return p}});var r=t(29439),u=t(93433),a=t(15861),i=t(16296),c=t(87757),o=t.n(c),s=t(34502),f=t(32789),d=t(15189);function p(n,e,t,r){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)(o().mark((function n(e,t,a,i){var c,f,p,l,x,v,k,b;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.bA)();case 2:if(c=n.sent,f=c.transaction("node","readwrite"),!i){n.next=15;break}return n.next=7,f.store.get(i);case 7:if(p=n.sent,(null===(x=p)||void 0===x?void 0:x.workspaceId)!==a||!(0,d.qR)(p)){n.next=12;break}l=[].concat((0,u.Z)(p.path),[e]),n.next=13;break;case 12:throw new Error("Parent does not exist, parent lives in a different workspace or is not of type folder");case 13:n.next=16;break;case 15:l=[e];case 16:return n.next=18,Promise.all([h(f.store,e,t,l,a,i),f.done]);case 18:return v=n.sent,k=(0,r.Z)(v,1),b=k[0],n.abrupt("return",b);case 22:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n,e,t,r,u,a){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function n(e,t,r,u,a,i){var c,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=(0,f.zO)(),s={id:t,parentId:null!==i&&void 0!==i?i:a,workspaceId:a,name:r,path:u,kind:"folder",created:c,modified:c},n.next=4,e.put(s);case 4:return n.abrupt("return",s);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(n){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(o().mark((function n(e){var t,r,u,a,c,f,d,p,l,h,x;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.bA)();case 2:t=n.sent,r=t.transaction("node","readonly"),u=r.store.index("workspace"),a=[],c=!1,f=!1,n.prev=8,p=(0,i.Z)(u.iterate(e));case 10:return n.next=12,p.next();case 12:if(!(c=!(l=n.sent).done)){n.next=19;break}h=l.value,"folder"===(x=h.value).kind&&a.push(x);case 16:c=!1,n.next=10;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(8),f=!0,d=n.t0;case 25:if(n.prev=25,n.prev=26,!c||null==p.return){n.next=30;break}return n.next=30,p.return();case 30:if(n.prev=30,!f){n.next=33;break}throw d;case 33:return n.finish(30);case 34:return n.finish(25);case 35:return n.abrupt("return",a);case 36:case"end":return n.stop()}}),n,null,[[8,21,25,35],[26,,30,34]])})))).apply(this,arguments)}},88656:function(n,e,t){t.d(e,{B0:function(){return u.B0},Bg:function(){return i.Bg},Dv:function(){return i.Dv},IK:function(){return i.IK},Q4:function(){return i.Q4},_0:function(){return r._0},mI:function(){return a.mI},pS:function(){return i.pS},qQ:function(){return a.qQ},uD:function(){return i.uD},w:function(){return i.w}});var r=t(59859),u=t(318),a=t(58070),i=t(15189)},15189:function(n,e,t){t.d(e,{Bg:function(){return j},Dv:function(){return O},IK:function(){return b},Mk:function(){return A},Q4:function(){return q},_X:function(){return v},pS:function(){return w},qR:function(){return S},uD:function(){return N},w:function(){return K}});var r=t(29439),u=t(93433),a=t(1413),i=t(15861),c=t(16296),o=t(87757),s=t.n(o),f=t(60251),d=t(34502),p=t(25291),l=t(32789),h=t(59859),x=t(318);function v(n,e,t,r){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)(s().mark((function n(e,t,r,a){var i,c,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=13;break}return n.next=3,e.get(a);case 3:if(i=n.sent,(null===(o=i)||void 0===o?void 0:o.workspaceId)!==r||!S(i)){n.next=8;break}c=[].concat((0,u.Z)(i.path),[t]),n.next=11;break;case 8:return n.next=10,Promise.reject("Parent does not exist, parent lives in a different workspace or is not of type folder");case 10:return n.abrupt("return",n.sent);case 11:n.next=14;break;case 13:c=[t];case 14:return n.abrupt("return",c);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(n,e){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)(s().mark((function n(e,t){var u,a,i,c,o,f,p,l,v;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.bA)();case 2:return u=n.sent,a=u.transaction(["document","file","node","workspace-sync"],"readwrite"),i=a.objectStore("document"),c=a.objectStore("file"),o=a.objectStore("node"),f=a.objectStore("workspace-sync"),n.next=10,Promise.all([w(o,e,t).then((function(n){return Promise.all(n.map((function(n){switch(n.kind){case"document":return(0,h.uX)(i,f,n);case"file":return(0,x.do)(c,n);case"folder":return Promise.resolve({id:n.id,kind:n.kind});default:throw new Error("Node kind unknown")}})))})),a.done]);case 10:return p=n.sent,l=(0,r.Z)(p,1),v=l[0],n.abrupt("return",v);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(n,e,t){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)(s().mark((function n(e,t,r){var u,a,i,o,f,d,p,l,h,x;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=e.index("workspace"),a=[],n.next=4,e.get(t);case 4:if(!(i=n.sent)){n.next=42;break}return a.push(i),n.next=9,e.delete(t);case 9:if("folder"!==i.kind){n.next=42;break}o=!1,f=!1,n.prev=12,p=(0,c.Z)(u.iterate(r));case 14:return n.next=16,p.next();case 16:if(!(o=!(l=n.sent).done)){n.next=26;break}if(h=l.value,!(x=h.value).path.includes(t)){n.next=23;break}return a.push(x),n.next=23,e.delete(x.id);case 23:o=!1,n.next=14;break;case 26:n.next=32;break;case 28:n.prev=28,n.t0=n.catch(12),f=!0,d=n.t0;case 32:if(n.prev=32,n.prev=33,!o||null==p.return){n.next=37;break}return n.next=37,p.return();case 37:if(n.prev=37,!f){n.next=40;break}throw d;case 40:return n.finish(37);case 41:return n.finish(32);case 42:return n.abrupt("return",a);case 43:case"end":return n.stop()}}),n,null,[[12,28,32,42],[33,,37,41]])})))).apply(this,arguments)}function Z(n){return(0,d.bA)().then((function(e){return e.getAllFromIndex("node","children",n)}))}function N(n,e,t){return g.apply(this,arguments)}function g(){return(g=(0,i.Z)(s().mark((function n(e,t,r){var u,a,i,o,f,p,l,h,x,v,k,b,m,w,y,N,g,j,I,A;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",Z(null!==t&&void 0!==t?t:e));case 2:return n.next=4,(0,d.bA)();case 4:u=n.sent,a=u.transaction("node","readonly"),i=a.store.index("workspace"),o=new Set,f=!1,p=!1,n.prev=10,h=(0,c.Z)(i.iterate(e));case 12:return n.next=14,h.next();case 14:if(!(f=!(x=n.sent).done)){n.next=22;break}v=x.value,k=v.value,(!t||k.path.includes(t))&&r(k.name.toLowerCase())&&k.path.forEach((function(n){return o.add(n)}));case 19:f=!1,n.next=12;break;case 22:n.next=28;break;case 24:n.prev=24,n.t0=n.catch(10),p=!0,l=n.t0;case 28:if(n.prev=28,n.prev=29,!f||null==h.return){n.next=33;break}return n.next=33,h.return();case 33:if(n.prev=33,!p){n.next=36;break}throw l;case 36:return n.finish(33);case 37:return n.finish(28);case 38:b=a.store.index("children"),m=[],w=!1,y=!1,n.prev=42,g=(0,c.Z)(b.iterate(null!==t&&void 0!==t?t:e));case 44:return n.next=46,g.next();case 46:if(!(w=!(j=n.sent).done)){n.next=53;break}I=j.value,A=I.value,o.has(A.id)&&m.push(A);case 50:w=!1,n.next=44;break;case 53:n.next=59;break;case 55:n.prev=55,n.t1=n.catch(42),y=!0,N=n.t1;case 59:if(n.prev=59,n.prev=60,!w||null==g.return){n.next=64;break}return n.next=64,g.return();case 64:if(n.prev=64,!y){n.next=67;break}throw N;case 67:return n.finish(64);case 68:return n.finish(59);case 69:return n.abrupt("return",m);case 70:case"end":return n.stop()}}),n,null,[[10,24,28,38],[29,,33,37],[42,55,59,69],[60,,64,68]])})))).apply(this,arguments)}function j(n,e){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)(s().mark((function n(e,t){var r,u,a,i,o,f,p,l,h;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.bA)();case 2:r=n.sent,u=r.transaction("node","readonly"),a=u.store.index("children"),i=!1,o=!1,n.prev=7,p=(0,c.Z)(a.iterate(e));case 9:return n.next=11,p.next();case 11:if(!(i=!(l=n.sent).done)){n.next=19;break}if(h=l.value,h.value.name!==t){n.next=16;break}return n.abrupt("return",!0);case 16:i=!1,n.next=9;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(7),o=!0,f=n.t0;case 25:if(n.prev=25,n.prev=26,!i||null==p.return){n.next=30;break}return n.next=30,p.return();case 30:if(n.prev=30,!o){n.next=33;break}throw f;case 33:return n.finish(30);case 34:return n.finish(25);case 35:return n.abrupt("return",!1);case 36:case"end":return n.stop()}}),n,null,[[7,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function A(n){return(0,d.aU)("node",n)}function S(n){return"folder"===n.kind}function O(n,e,t,r){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)(s().mark((function n(e,t,i,o){var h,x,v,k,b,m,y,Z,N,g,j,I,A,O,P,K,D,q,Q,U,_,F,M,E,X,H,C,B,z,J,V,W,R,T,G,L,Y,$,nn,en,tn;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.bA)();case 2:return h=n.sent,x=h.transaction(["document","node","workspace-sync"],"readwrite"),v=x.objectStore("document"),k=x.objectStore("node"),b=x.objectStore("workspace-sync"),m=k.index("workspace"),y=k.index("children"),Z=(0,l.zO)(),N=[],n.next=13,Promise.all([v.get(t),k.get(t)]);case 13:if(j=n.sent,I=(0,r.Z)(j,2),A=I[0],O=I[1]){n.next=21;break}return n.next=20,x.done;case 20:throw new Error("Node does not exist");case 21:if("document"!==O.kind||A){n.next=25;break}return n.next=24,x.done;case 24:throw new Error("Document does not exist");case 25:if(!i){n.next=38;break}return n.next=28,k.get(i);case 28:if(!(P=n.sent)||!S(P)){n.next=33;break}g=[].concat((0,u.Z)(P.path),[O.id]),n.next=36;break;case 33:return n.next=35,x.done;case 35:throw new Error("Parent does not exist or is not of type folder");case 36:n.next=39;break;case 38:g=[O.id];case 39:D=!1,q=!1,n.prev=41,U=(0,c.Z)(y.iterate(null!==i&&void 0!==i?i:e));case 43:return n.next=45,U.next();case 45:if(!(D=!(_=n.sent).done)){n.next=54;break}if(F=_.value,(M=F.value).name!==O.name){n.next=51;break}return K=M,n.abrupt("break",54);case 51:D=!1,n.next=43;break;case 54:n.next=60;break;case 56:n.prev=56,n.t0=n.catch(41),q=!0,Q=n.t0;case 60:if(n.prev=60,n.prev=61,!D||null==U.return){n.next=65;break}return n.next=65,U.return();case 65:if(n.prev=65,!q){n.next=68;break}throw Q;case 68:return n.finish(65);case 69:return n.finish(60);case 70:if(E=void 0,!K){n.next=135;break}if(!o){n.next=132;break}E=[],n.t1=K.kind,n.next="document"===n.t1?77:"file"===n.t1?87:"folder"===n.t1?88:130;break;case 77:return n.next=79,v.get(K.id);case 79:if(X=n.sent){n.next=84;break}return n.next=83,x.done;case 83:throw new Error("Child document does not exist");case 84:return N.push(w(k,K.id,e),(0,f.kX)(v,K.id),(0,p.NN)(b,{id:O.id,kind:"delete",remoteId:K.remoteId,document:X,documentNode:K})),E.push({id:K.id,kind:K.kind}),n.abrupt("break",130);case 87:return n.abrupt("break",130);case 88:H=!1,C=!1,n.prev=90,z=(0,c.Z)(m.iterate(e));case 92:return n.next=94,z.next();case 94:if(!(H=!(J=n.sent).done)){n.next=113;break}if(V=J.value,!(W=V.value).path.includes(K.id)){n.next=110;break}if(N.push(w(k,W.id,e)),N.push((0,f.kX)(v,W.id)),"document"!==W.kind){n.next=109;break}return n.next=103,v.get(W.id);case 103:if(R=n.sent){n.next=108;break}return n.next=107,x.done;case 107:throw new Error("Child document does not exist");case 108:N.push((0,p.NN)(b,{id:W.id,kind:"delete",remoteId:W.remoteId,document:R,documentNode:W}));case 109:E.push({id:W.id,kind:W.kind});case 110:H=!1,n.next=92;break;case 113:n.next=119;break;case 115:n.prev=115,n.t2=n.catch(90),C=!0,B=n.t2;case 119:if(n.prev=119,n.prev=120,!H||null==z.return){n.next=124;break}return n.next=124,z.return();case 124:if(n.prev=124,!C){n.next=127;break}throw B;case 127:return n.finish(124);case 128:return n.finish(119);case 129:return n.abrupt("break",130);case 130:n.next=135;break;case 132:return n.next=134,x.done;case 134:return n.abrupt("return",void 0);case 135:if("folder"!==O.kind){n.next=176;break}T=!1,G=!1,n.prev=138,Y=(0,c.Z)(m.iterate(e));case 140:return n.next=142,Y.next();case 142:if(!(T=!($=n.sent).done)){n.next=160;break}if(nn=$.value,!(en=nn.value).path.includes(O.id)){n.next=157;break}if(en=(0,a.Z)((0,a.Z)({},en),{},{modified:Z,path:[].concat((0,u.Z)(g),(0,u.Z)(en.path.slice(O.path.length)))}),N.push(k.put(en)),"document"!==en.kind){n.next=157;break}return n.next=151,v.get(en.id);case 151:if(tn=n.sent){n.next=156;break}return n.next=155,x.done;case 155:throw new Error("Child document does not exist");case 156:N.push((0,p.NN)(b,{id:en.id,kind:"update",remoteId:en.remoteId,document:tn,documentNode:en}));case 157:T=!1,n.next=140;break;case 160:n.next=166;break;case 162:n.prev=162,n.t3=n.catch(138),G=!0,L=n.t3;case 166:if(n.prev=166,n.prev=167,!T||null==Y.return){n.next=171;break}return n.next=171,Y.return();case 171:if(n.prev=171,!G){n.next=174;break}throw L;case 174:return n.finish(171);case 175:return n.finish(166);case 176:return O=(0,a.Z)((0,a.Z)({},O),{},{parentId:null!==i&&void 0!==i?i:O.workspaceId,path:g,modified:Z}),N.push(k.put(O)),"document"===O.kind&&A&&N.push((0,p.NN)(b,{id:t,kind:"update",remoteId:O.remoteId,document:A,documentNode:O})),N.push(x.done),n.next=182,Promise.all(N);case 182:return n.abrupt("return",{node:O,deletedNodes:E});case 183:case"end":return n.stop()}}),n,null,[[41,56,60,70],[61,,65,69],[90,115,119,129],[120,,124,128],[138,162,166,176],[167,,171,175]])})))).apply(this,arguments)}function K(n,e){return D.apply(this,arguments)}function D(){return(D=(0,i.Z)(s().mark((function n(e,t){var u,a,i,c,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.bA)();case 2:return u=n.sent,a=u.transaction("node","readwrite"),n.next=6,Promise.all([q(a.objectStore("node"),e,t),a.done]);case 6:return i=n.sent,c=(0,r.Z)(i,1),o=c[0],n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function q(n,e,t){return(0,d.i8)(n,e,(function(n){return(0,a.Z)((0,a.Z)({},n),{},{name:t,modified:(0,l.zO)()})}))}},3116:function(n,e,t){t.d(e,{Y5:function(){return r.Y5}});var r=t(74576)},74576:function(n,e,t){t.d(e,{Y5:function(){return u}});var r=t(34502);t(32789);function u(n){return(0,r.aU)("schema-query-result",n)}},90524:function(n,e,t){t.d(e,{FG:function(){return r.FG},Oy:function(){return r.Oy},uO:function(){return r.uO}});var r=t(30021)},30021:function(n,e,t){t.d(e,{FG:function(){return o},Oy:function(){return s},uO:function(){return d}});var r=t(93433),u=t(15861),a=t(87757),i=t.n(a),c=t(34502);function o(n){return(0,c.aU)("variable-json-schema",n)}function s(){return f.apply(this,arguments)}function f(){return f=(0,u.Z)(i().mark((function n(){var e,t,u,a,o,s=arguments;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.bA)();case 2:for(e=n.sent,t=e.transaction("variable-json-schema","readwrite"),u=s.length,a=new Array(u),o=0;o<u;o++)a[o]=s[o];return n.next=7,Promise.all([].concat((0,r.Z)(a.map((function(n){return t.store.delete(n)}))),[t.done]));case 7:case"end":return n.stop()}}),n)}))),f.apply(this,arguments)}function d(n,e){return n.delete(e)}},25291:function(n,e,t){t.d(e,{NN:function(){return r.NN}});var r=t(19614)},19614:function(n,e,t){t.d(e,{NN:function(){return c}});var r=t(1413),u=t(15861),a=t(87757),i=t.n(a);t(60251),t(34502),t(88656),t(32789);function c(n,e){return o.apply(this,arguments)}function o(){return(o=(0,u.Z)(i().mark((function n(e,t){var u,a,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get(t.id);case 2:if(u=n.sent,"delete"!==t.kind||"create"!==(null===u||void 0===u?void 0:u.kind)){n.next=8;break}return n.next=6,e.delete(t.id);case 6:case 12:n.next=16;break;case 8:if("update"!==t.kind||"create"!==(null===u||void 0===u?void 0:u.kind)){n.next=14;break}return a=t.document,c=t.documentNode,n.next=12,e.put((0,r.Z)((0,r.Z)({},u),{},{conflictKind:t.conflictKind,document:a,documentNode:c}));case 14:return n.next=16,e.put((0,r.Z)((0,r.Z)({},t),{},{created:Date.now()}));case 16:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},24346:function(n,e,t){t.d(e,{N:function(){return u}});var r=t(89988);function u(){return(0,r.M)("dir")}},43657:function(n,e,t){t.d(e,{O:function(){return r}});function r(n,e){return(n?function(n){var e=window.location,t=e.origin,r=e.pathname,u=t+r+(r.endsWith("/")?"":"/");return null!==n&&void 0!==n&&n.length?new URL(n,u).href:u}(e):null!==e&&void 0!==e?e:"").replace(/\/$/,"")}},74541:function(n,e,t){function r(n){return n.replace(/\/(?=\?)|\/(?=#)|\/$/,"")}t.d(e,{J:function(){return r}})},32789:function(n,e,t){t.d(e,{qI:function(){return Z},iC:function(){return b},IF:function(){return w},Ji:function(){return m},NB:function(){return v},F5:function(){return k},eM:function(){return y},A0:function(){return d.A},NN:function(){return p.N},js:function(){return f.j},Mc:function(){return l.M},vC:function(){return s},I8:function(){return h.I},EB:function(){return i},fS:function(){return c},O_:function(){return N.O},Jp:function(){return j.J},li:function(){return I.l},ag:function(){return g.ag},zO:function(){return D},e6:function(){return K},sU:function(){return q}});var r=t(93433),u=t(15671),a=t(43144);function i(n){return n.filter((function(n,e,t){return t.indexOf(n)===e}))}function c(n,e){var t=n.length;if(t!==e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}var o=function(){function n(e){(0,u.Z)(this,n),this.stack=void 0,this.stack=e?(0,r.Z)(e):[]}return(0,a.Z)(n,[{key:"append",value:function(n){return-1===this.stack.indexOf(n)&&this.stack.push(n),this}},{key:"find",value:function(n){var e=this.stack.indexOf(n);return-1!==e?this.stack[e]:null}},{key:"getFirst",value:function(){return this.stack[0]||null}},{key:"setFirst",value:function(n){var e=this.stack.indexOf(n);return 0!==e&&n&&(-1===e?this.stack.splice(0,0,n):this.stack.splice(0,0,this.stack.splice(e,1).pop())),this}},{key:"getLast",value:function(){return this.stack.length>0?this.stack[this.stack.length-1]:null}},{key:"setLast",value:function(n){var e=this.stack.indexOf(n),t=this.stack.length-1;return-1!==e&&e===t||!n||(-1===e?this.stack.push(n):this.stack.push(this.stack.splice(e,1).pop())),this}},{key:"count",value:function(){return this.stack.length}},{key:"remove",value:function(){for(var n=this,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach((function(e){var t=n.stack.indexOf(e);-1!==t&&n.stack.splice(t,1)})),this}},{key:"update",value:function(n,e){var t=this.stack.indexOf(n);return-1!==t&&this.stack.splice(t,1,e),this}},{key:"toArray",value:function(){return[].concat(this.stack)}}]),n}();function s(n){return new o(n)}var f=t(42917);var d=t(57096),p=t(24346),l=t(89988),h=t(7326),x=t(4147),v="0.0.0"===x.i8,k=navigator.userAgent.indexOf("Electron")>=0,b=x.ss,m=x.i8,w=k?"app":"middleware",y=function(){if(navigator.userAgent.indexOf("Win")>=0)return"Windows";if(navigator.userAgent.indexOf("Mac")>=0)return"macOS";if(navigator.userAgent.indexOf("X11")>=0||navigator.userAgent.indexOf("Linux")>=0)return"Linux";return"Unknown"}(),Z="".concat(b,"/").concat(m," (").concat(w,")");var N=t(43657),g=t(28383),j=t(74541),I=t(46765),A=t(1413),S=t(56686),O=t.n(S),P=t(89391);function K(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{printWidth:80,tabWidth:2,useTabs:!1};return(0,P.format)(n,(0,A.Z)((0,A.Z)({},e),{},{parser:"graphql",plugins:[O()]}))}function D(){return Date.now()}function q(n){return new Date(new Date(new Date(new Date(n).setUTCHours(0)).setUTCMinutes(0)).setUTCSeconds(0)).setUTCMilliseconds(0)}},46765:function(n,e,t){t.d(e,{l:function(){return u}});var r=/^[!#$%&'*+-.^_`|~a-zA-Z0-9]*$/;function u(n){return r.test(n)}}}]);