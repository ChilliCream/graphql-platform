(this["webpackJsonp@banana-cake-pop/main"]=this["webpackJsonp@banana-cake-pop/main"]||[]).push([[17],{1073:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return te}));var r=n(479),c=n(551),i=n(488),a=n(500),u=n(471),o=n(10),s=n.n(o),l=n(470),d=n(468),f=n(478),b=n(473),j=n(481),p=n(521),v=n(496),O=n(497),m=n(484),h=n(597),g=n(475),y=n(20),S=n(508),x=n(593),k=n(525),w=n(624),T=n(640),R=n(641),I=n(592),V=n(643),D=n(526),E=n(783);function C(e){return M(e,(function(e){return!Object(V.d)(e)}),F)}function F(e){return!Object(I.d)(e)&&!Object(R.d)(e)}function M(e,t,n){var r=e.getDirectives().filter(t),c=Object.values(e.getTypeMap()).filter(n);return[A(e)].concat(Object(y.a)(r.map((function(e){return function(e){return N(e)+"directive @"+e.name+q(e.args)+(e.isRepeatable?" repeatable":"")+" on "+e.locations.join(" | ")}(e)}))),Object(y.a)(c.map((function(e){return function(e){if(Object(D.y)(e))return function(e){return N(e)+"scalar ".concat(e.name)+function(e){if(null==e.specifiedByURL)return"";var t=Object(w.a)({kind:k.a.STRING,value:e.specifiedByURL});return" @specifiedBy(url: ".concat(t,")")}(e)}(e);if(Object(D.w)(e))return function(e){return N(e)+"type ".concat(e.name)+B(e)+L(e)}(e);if(Object(D.s)(e))return function(e){return N(e)+"interface ".concat(e.name)+B(e)+L(e)}(e);if(Object(D.z)(e))return function(e){var t=e.getTypes(),n=t.length?" = "+t.join(" | "):"";return N(e)+"union "+e.name+n}(e);if(Object(D.p)(e))return function(e){var t=e.getValues().map((function(e,t){return N(e,"  ",!t)+"  "+e.name+G(e.deprecationReason)}));return N(e)+"enum ".concat(e.name)+Q(t)}(e);if(Object(D.q)(e))return function(e){var t=Object.values(e.getFields()).map((function(e,t){return N(e,"  ",!t)+"  "+z(e)}));return N(e)+"input ".concat(e.name)+Q(t)}(e);Object(x.a)(!1,"Unexpected type: "+Object(S.a)(e))}(e)})))).filter(Boolean).join("\n\n")}function A(e){if(null!=e.description||!function(e){var t=e.getQueryType();if(t&&"Query"!==t.name)return!1;var n=e.getMutationType();if(n&&"Mutation"!==n.name)return!1;var r=e.getSubscriptionType();if(r&&"Subscription"!==r.name)return!1;return!0}(e)){var t=[],n=e.getQueryType();n&&t.push("  query: ".concat(n.name));var r=e.getMutationType();r&&t.push("  mutation: ".concat(r.name));var c=e.getSubscriptionType();return c&&t.push("  subscription: ".concat(c.name)),N(e)+"schema {\n".concat(t.join("\n"),"\n}")}}function B(e){var t=e.getInterfaces();return t.length?" implements "+t.map((function(e){return e.name})).join(" & "):""}function L(e){return Q(Object.values(e.getFields()).map((function(e,t){return N(e,"  ",!t)+"  "+e.name+q(e.args,"  ")+": "+String(e.type)+G(e.deprecationReason)})))}function Q(e){return 0!==e.length?" {\n"+e.join("\n")+"\n}":""}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return 0===e.length?"":e.every((function(e){return!e.description}))?"("+e.map(z).join(", ")+")":"(\n"+e.map((function(e,n){return N(e,"  "+t,!n)+"  "+t+z(e)})).join("\n")+"\n"+t+")"}function z(e){var t=Object(E.a)(e.defaultValue,e.type),n=e.name+": "+String(e.type);return t&&(n+=" = ".concat(Object(w.a)(t))),n+G(e.deprecationReason)}function G(e){if(null==e)return"";if(e!==V.a){var t=Object(w.a)({kind:k.a.STRING,value:e});return" @deprecated(reason: ".concat(t,")")}return" @deprecated"}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.description;if(null==r)return"";var c=Object(w.a)({kind:k.a.STRING,value:r,block:Object(T.b)(r)}),i=t&&!n?"\n"+t:t;return i+c.replace(/\n/g,"\n"+t)+"\n"}var U=n(1082),J=(n(282),n(87)),P=n(43),H=n(91),K="schema-sdl",W=Object(P.memo)((function(e){var t=e.documentId,n=Object(u.c)(O.b.selectActive,(function(e,t){return(null===e||void 0===e?void 0:e.hash)===(null===t||void 0===t?void 0:t.hash)})),r=function(e,t){var n=Object(v.c)(m.c.selectActiveSchemaSdlEditorViewState),r=Object(b.i)(),c=Object(P.useRef)(null),i=Object(v.c)(m.c.selectActiveFocusedElement),o=Object(u.b)(),s=Object(a.a)((function(t){var n,r=null!==(n=t.saveViewState())&&void 0!==n?n:void 0;o(m.a.changeSchemaSdlEditorViewState({id:e,schemaSdlEditorViewState:r}))}),250,[e,o]);return Object(P.useEffect)((function(){var a=c.current,u=Object(d.a)(Object(d.a)({},p.a),{},{model:t,readOnly:!0,theme:"light"}),l=J.editor.create(a,u);return window.setTimeout((function(){return l.render()}),500),r.register(K,l),Object(j.k)(l),n&&l.restoreViewState(n),"schema-sdl-editor"===i&&l.focus(),l.onDidChangeCursorPosition((function(){return s(l)})),l.onDidChangeCursorSelection((function(){return s(l)})),l.onDidScrollChange((function(){return s(l)})),l.onDidFocusEditorText((function(){o(m.a.changeFocus({id:e,focusedElement:"schema-sdl-editor"}))})),function(){r.unregister(K),l.dispose()}}),[e,r,i,n,t,o,s]),Object(a.b)(K,c),c}(t,function(e,t){var n=Object(b.j)(),r=Object(P.useRef)(J.editor.createModel("","graphql"));return r.current.updateOptions({indentSize:2,insertSpaces:!0,tabSize:2}),Object(P.useEffect)((function(){(null===t||void 0===t?void 0:t.exists)?function(e){return X.apply(this,arguments)}(t.endpoint).then((function(e){r.current.setValue(e)})).catch((function(t){n.error(e,"Could not get SDL. Please reload the schema and try again.",Object(d.a)({},t))})):r.current.setValue("")}),[e,n,r,t]),r.current}(t,n));return h.api.schemaInfo=null!==n&&void 0!==n?n:null,Object(H.jsx)(i.o,{ref:r})}));function X(){return(X=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.getSchemaQueryResult)(t);case 2:if(!(n=e.sent)){e.next=6;break}return r=C(Object(U.a)(n.result)).replace(/""""""/gi,""),e.abrupt("return",Object(g.n)(r));case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=n(486),Z=n(651),$=n(487),_=function(e){var t=e.documentId,n=e.isFetchingSchema;return Object(H.jsxs)(i.c,{children:[Object(H.jsx)(i.i,{children:Object(H.jsx)(Z.a,{documentId:t})}),Object(H.jsx)(i.h,{}),Object(H.jsx)(ee,{disabled:n})]})},ee=function(e){var t=e.disabled,n=Object(b.i)(),r=Object(u.c)(O.b.selectActive,(function(e,t){return(null===e||void 0===e?void 0:e.hash)===(null===t||void 0===t?void 0:t.hash)}));return Object(H.jsx)(Y.c,{disabled:t||!r,title:"Download as SDL",onClick:function(){var e,t;if(null===r||void 0===r?void 0:r.exists){var c=null===(e=n.get("schema-sdl"))||void 0===e||null===(t=e.getModel())||void 0===t?void 0:t.getValue();if(c){var i=new Blob([c],{type:"text/plain"});Object(j.m)(i)}}},children:Object(H.jsx)($.k,{})})},te=function(){var e=Object(u.c)(r.c.selectActiveId),t=Object(a.d)();return Object(H.jsx)(i.k,{children:Object(H.jsxs)(i.a,{children:[Object(H.jsx)(_,{documentId:e,isFetchingSchema:t}),t?Object(H.jsx)(c.a,{}):Object(H.jsx)(W,{documentId:e})]})})}}}]);